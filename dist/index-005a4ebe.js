let k=[];function aa(){var a=p.g.canvas;a.addEventListener("click",b=>{let c=a.getBoundingClientRect(),e=a.width/c.width*(b.clientX-c.left);b=a.height/c.height*(b.clientY-c.top);for(let d of k)e>=d.x&&e<=d.x+d.w&&b>=d.y&&b<=d.y+d.va&&d.Na()})}function ba(a,b,c){k.push({x:10,y:a,w:b,va:90,Na:c})}function r(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(288/c.width*(a-c.left),512/c.height*(b-c.top))}
function t(a){let b,c;.5625<window.innerWidth/window.innerHeight?(c=window.innerHeight,b=.5625*c):(b=window.innerWidth,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}function u(a,b,c,e=18){let d=a.createLinearGradient(0,b-e,0,b);c.forEach(([f,g])=>d.addColorStop(f,g));return d}
function v(a,b,c,e){let d=p.g;d.save();d.font=`bold ${b-2}px "Courier New"`;d.strokeStyle="#0a0601";d.fillStyle="#0a0601";d.textAlign="center";d.strokeText(a,c,e+2);d.fillText(a,c,e+2);d.font=`bold ${b}px "Courier New"`;d.fillStyle=u(d,e,[[0,"#fff4c1"],[.25,"#ffd84a"],[.5,"#6a2c00"],[.75,"#b65a00"],[1,"#ff9d00"]]);d.fillText(a,c,e);d.restore()}
function w(a,b,c,e,d="white",f="center",g,h,m){let l=p.g;l.save();l.font=`${b}px "Courier New", monospace`;l.textAlign=f;l.fillStyle=d;g&&(l.strokeStyle=g);h&&(l.lineWidth=h);m?(l.translate(c,e),l.rotate(m),g&&l.strokeText(a,0,0),l.fillText(a,0,0)):(g&&l.strokeText(a,c,e),l.fillText(a,c,e));l.restore()}
function x(a,b,c=400){var e=p;e.l+=b;.75<=e.l&&(e.l=0,e.A=!e.A);e.A&&(b=e.g,b.save(),b.font='bold 24px "Courier New", serif',b.textAlign="center",b.textBaseline="middle",b.strokeStyle="#161616ff",b.strokeText(a,b.canvas.width/2,c+1),b.fillStyle=u(b,c,[[0,"#ffffff"],[.15,"#dcdcdc"],[.3,"#a0a0a0"],[.45,"#f8f8f8"],[.6,"#7a7a7a"],[.8,"#c8c8c8"],[1,"#5a5a5a"]],20),b.fillText(a,b.canvas.width/2,c),b.restore())}
function y(a,b,c,e,d,f=6,g,h){a.beginPath();a.moveTo(b+f,c);a.lineTo(b+e-f,c);a.quadraticCurveTo(b+e,c,b+e,c+f);a.lineTo(b+e,c+d-f);a.quadraticCurveTo(b+e,c+d,b+e-f,c+d);a.lineTo(b+f,c+d);a.quadraticCurveTo(b,c+d,b,c+d-f);a.lineTo(b,c+f);a.quadraticCurveTo(b,c,b+f,c);a.closePath();g&&(a.fillStyle=g,a.fill());h&&(a.strokeStyle=h,a.stroke())}function z(){return p.g.canvas.width/2}
class ca{constructor(){this.l=0;this.A=!0;this.g=c2d.getContext("2d");this.m=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.m=r(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.m=r(a.clientX,a.clientY)});window.addEventListener("resize",()=>t(this));t(this)}get i(){return this.g.canvas.width}get j(){return this.g.canvas.height}}
let p=new ca,A=[{X:1,color:"#00FF66"},{X:.75,color:"#00BFFF"},{X:.5,color:"#FFA500"},{X:.25,color:"#FF3333"},{X:0,color:"rgba(255, 0, 0, 0)"}],B={blue:["#35a3ec","#4480b8"],green:["#7dff99","#44b867"],Va:["#ce7bfd","#a144b8"],gb:["#ff80df","#b84488"],Sa:["#eca335","#b88244"],red:["#ff5e49","#881c18"]},da={fb:"#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" "),eb:"#201400 #402800 #604000 #805800 #A07000 #C08800 #FF7F00".split(" "),green:"#0D1A0D #163322 #1F4D31 #2A6B44 #3C8C5A #56B27D #7FE6AF".split(" "),
Va:"#1A1026 #2C1E4A #3C2F6B #4E3F8C #6757B0 #8A7ED6 #B5A6FF".split(" "),blue:"#0A1A33 #122B57 #1B3C7A #25509E #3166C7 #4C82E6 #7FAFFF".split(" "),Sa:"#331A0A #572B12 #7A3C1B #9E5025 #C76631 #E6824C #FFB27F".split(" ")},ea="#0d0d0d #1a1a1a #2c2c2c #3f3f3f #5a2b00 #8c3b00 #9aacac #ff7b1c #ffb84d #ffd9a3".split(" "),fa="#200900 #190902 #291403 #311d0c #a05030 #c06440 #e6a67c".split(" "),ha="#201a00 #191502 #291f03 #312e0c #a08230 #c09e40 #e6d37c".split(" "),ia="#310101 #331515 #380d0d #310c0c #A03030 #c04040 #e67c7c".split(" "),
ja=[25,50,0],C=["Starfield Frontiers","Factured Expanse","Rift Horizon","Outer wilds"],D=[6,15,16],ka="#0a0f0a #121a12 #1b261a #253424 #3d583e #4a5c46 #63755f #7f8f7c #a4b1a1 #d0d8ce".split(" "),la="#111821 #152236 #1b2e45 #2d4668 #22354f #3a567a #5a7ba3 #6f92b8 #90afcf #b0cde6".split(" "),ma="#1a130f #2a1f18 #3b2c22 #544036 #6a5448 #7f6a5a #8e8e91 #a5a6a9 #c5c6c9 #e0e1e3".split(" ");function E(a){var b=F;F.active||b.start(1,0,.5,()=>{a();F.start(0,1,.5)})}
class na{constructor(){this.e=this.a=0;this.d=1;this.ba=this.ka=this.f=0}start(a,b,c,e){this.ka=a;this.ba=b;this.a=a;this.d=c;this.e=0;this.f=1;this.c=e}update(a){this.f&&(this.e+=a,a=Math.min(this.e/this.d,1),this.a=this.ka+(this.ba-this.ka)*a,1<=a&&(this.f=0,this.c?.()))}I(a){!this.f&&0>=this.a||(a.fillStyle=`rgba(0,0,0,${.8*(1-this.a)})`,a.fillRect(0,0,p.i,p.j))}get active(){return 1===this.f}}let F=new na;
function G(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,ba:a>>8&255,b:a&255,alpha:b}}function oa(a,b=1){let {r:c,ba:e,b:d}=G(a,b);return`rgba(${c}, ${e}, ${d}, ${b})`}
function pa(){return qa.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var e=Math.max(a,c,b),d=Math.min(a,c,b),f=0,g=0;let h=(e+d)/2;if(e!==d){let q=e-d;g=.5<h?q/(2-e-d):q/(e+d);switch(e){case a:f=(c-b)/q+(c<b?6:0);break;case c:f=(b-a)/q+2;break;case b:f=(a-c)/q+4}f*=60}let {va:m,ka:l,Pa:n}={va:f,ka:100*g,Pa:100*h};a=(m+200*(Math.random()-.5)+360)%360;e=Math.min(100,Math.max(0,n+0*(Math.random()-.5)));
e/=100;c=Math.min(100,Math.max(0,l+10*(Math.random()-.5)))/100*(1-Math.abs(2*e-1));b=c*(1-Math.abs(a/60%2-1));e-=c/2;g=f=d=0;0<=a&&60>a?(d=c,f=b,g=0):60<=a&&120>a?(d=b,f=c,g=0):120<=a&&180>a?(d=0,f=c,g=b):180<=a&&240>a?(d=0,f=b,g=c):240<=a&&300>a?(d=b,f=0,g=c):300<=a&&360>a&&(d=c,f=0,g=b);return`#${Math.round(255*(d+e)).toString(16).padStart(2,"0")}${Math.round(255*(f+e)).toString(16).padStart(2,"0")}${Math.round(255*(g+e)).toString(16).padStart(2,"0")}`})}let qa="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function H(a,b,c,e){b=ra(b,a);return{Ta:a,W:b,offsetX:0,offsetY:0,Ya:c,oa:e}}
function ra(a=.01,b=qa){let c=document.createElement("canvas");c.width=256;c.height=256;let e=c.getContext("2d");e.imageSmoothingEnabled=!1;a=Math.floor(65536*a);for(var d=0;d<a;d++){var f=Math.floor(256*Math.random()),g=Math.floor(256*Math.random());e.fillStyle=b[Math.floor(Math.random()*b.length)];e.fillRect(f,g,1,1)}for(let m=0;2>m;m++){a=e;d=256*Math.random();f=256*Math.random();g=128*Math.random()+256/3;var h=b;for(let l=-256;256>=l;l+=256)for(let n=-256;256>=n;n+=256){let q=a.createRadialGradient(d+
l,f+n,0,d+l,f+n,g);q.addColorStop(0,oa(h[5],.1));q.addColorStop(1,"rgba(0,0,0,0)");a.globalCompositeOperation="screen";a.fillStyle=q;a.beginPath();a.arc(d+l,f+n,g,0,2*Math.PI);a.fill();a.globalCompositeOperation="source-over"}}b=new Image;b.src=c.toDataURL();return b}
class I{constructor(a=75,b=1){this.g=[];this.time=0;let c=pa();this.ma=Math.min(a,350);this.N=b;this.g.push(H(c,.001,.4*this.ma,.2));this.g.push(H(c,.002,.6*this.ma,.3));this.g.push(H(c,.003,this.ma,.4))}update(a,b={x:0,y:0}){this.time+=.1*a;for(let c of this.g)0!==c.W.width&&0!==c.W.height&&(c.offsetY=(c.offsetY+c.Ya*a-.5*b.y*c.oa)%c.W.height,0>c.offsetY&&(c.offsetY+=c.W.height),c.offsetX=(c.offsetX-.4*b.x*c.oa)%c.W.width)}I(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var e=this.g[0];
a.save();a.fillStyle=e.Ta[0];a.fillRect(0,0,b,c);for(let f of this.g)if(f.W.complete&&(e=a.createPattern(f.W,"repeat"))){a.save();var d;a:{for(d=D.length-1;0<=d;d--)if(this.N>=D[d]){d=ja[d];break a}d=0}a.translate(f.offsetX+20*Math.sin(this.time*d+2*f.oa)*f.oa,f.offsetY);a.fillStyle=e;a.fillRect(-f.W.width/4,-f.W.height,b+100,c+f.W.height);a.restore()}a.restore()}}function sa(a){var b=J,c=[];b.g.Fa?.();b.g=a;b.g.na?.(...c)}class ta{constructor(...a){this.g=new ua;this.g.na?.(...a)}}let J;
function K(a,b=8,c=12){if(!a.K){a.la={x:0,y:0};a.K=!0;for(let e=0;e<b;e++){let d=400*(Math.random()-.5),f=Math.random()*Math.PI*2;a.A.push({x:a.x+a.width/2,y:a.y+a.height/2,bb:Math.cos(f)*d,cb:Math.sin(f)*d,ya:Math.random()*Math.PI*2,Wa:8*(Math.random()-.5),alpha:1,size:c,Za:Math.floor(Math.random()*(a.C.width-c)),$a:Math.floor(Math.random()*(a.C.height-c))})}}}function L(a,b){for(let c of a.A)c.x+=c.bb*b,c.y+=c.cb*b,c.ya+=c.Wa*b,c.alpha-=1.5*b;a.A=a.A.filter(c=>0<c.alpha)}
function M(a,b){for(let c of a.A)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.ya),b.drawImage(a.C,c.Za,c.$a,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function N(a){return a.K&&0===a.A.length}class va{constructor(a,b,c,e=0,d=0){this.A=[];this.K=!1;this.la={x:0,y:0};this.C=a;this.x=b;this.y=c;this.width=e;this.height=d;this.active=!0}wa(){return 0>this.x+this.width||this.x>p.i||0>this.y+this.height||this.y>p.j}}
function O(a,b,c,e=a.g,d){if(a.active&&a.Aa){var f=a.Aa.get();f&&(d&&(f.C=P(a.F.U,d)),d=0>=e.y?a.y:a.y+a.height,f.u=b,f.speed=c,b=d,c=e.x,e=e.y,f.x=a.x+a.width/2+a.Ba,f.y=b,f.ra=c,f.sa=e,f.active=!0)}}
function wa(a,b,c,e){if(a.active)if("burst"===a.S)0<a.T?(a.H-=b,0>=a.H&&(O(a,c,e,a.g,a.M),a.T--,a.H=a.Ja),0>=a.T&&(a.i=Math.max(.05,a.v))):(a.i-=b,0>=a.i&&(a.T=a.Ia,a.H=0));else if(a.i-=b,0>=a.i){switch(a.S){case "single":O(a,c,e,a.g,a.M);break;case "spread":b=[-.3,0,.3];var d=Math.hypot(a.g.x,a.g.y),f=a.g.x/d;d=a.g.y/d;for(var g of b){b=Math.cos(g);var h=Math.sin(g);O(a,c,e,{x:f*b-d*h,y:f*h+d*b},a.M)}break;case "megaspread":b=[-.6,-.3,0,.3,.6];g=Math.hypot(a.g.x,a.g.y);f=a.g.x/g;g=a.g.y/g;for(d of b)b=
Math.cos(d),h=Math.sin(d),O(a,c,e,{x:f*b-g*h,y:f*h+g*b},a.M);break;case "boss":b=[-.5,-.4,-.2,0,.2,.4,.5];d=Math.hypot(a.g.x,a.g.y);g=a.g.x/d;d=a.g.y/d;for(f of b)b=Math.cos(f),h=Math.sin(f),b={x:g*b-d*h,y:g*h+d*b},b.x+=.5*(Math.random()-.5),h=Math.hypot(b.x,b.y),b.x/=h,b.y/=h,O(a,c,e,b,a.M)}a.i=Math.max(.05,a.v)}}function xa(a,b){let c=Math.max(-5,Math.min(5,4*a.la.x)),e=a.width/2;for(let d=0;d<a.width;d++)b.drawImage(a.C,d,0,1,a.height,a.x+d,a.y+Math.floor((d-e)/e*c),1,a.height)}
class ya extends va{constructor(a,b,c,e,d,f,g){super(b,e,d,f,g);this.ea={x:0,y:0};this.Ba=0;this.active=!0;this.i=0;this.v=.1;this.g={x:0,y:-1};this.S="single";this.H=this.T=0;this.Ja=.1;this.Ia=3;this.M="red";this.F=a;this.C=b;this.Aa=c}}function Q(a,b){a.o+b>a.B?a.o=a.B:a.o+=b}function za(a){return 0>=a.m&&a.K&&0===a.A.length}
class Aa extends ya{constructor(a,b,c){super(a,b,c,z()-b.width/2,.5*p.j,b.width,b.height);this.m=9;this.Ba=-2;this.l="#00bfff";this.O=150;this.o=this.B=this.L=100;this.v=.6;this.u=10;this.G=200;this.j=this.R=this.J=0;this.S="single";this.M="blue";this.ia="grey";this.C=b}update(a,b,c){if(this.K)L(this,a);else{0<this.R&&this.o<this.B&&(this.j+=a,5<=this.j&&(this.o+=this.R,this.o>this.B&&(this.o=this.B),this.j=0));b-=this.x+this.width/2;c=c-(this.y+this.height/2)-28;var e=Math.hypot(b,c);4<e&&(this.x+=
b/e*Math.min(400,this.O)*a,this.y+=c/e*Math.min(400,this.L)*a);this.la={x:this.x-this.ea.x,y:this.y-this.ea.y};this.ea={x:this.x,y:this.y};a:{b=this.o/this.B;b=Math.max(0,Math.min(1,b));for(var d=0;d<A.length-1;d++)if(c=A[d],e=A[d+1],b<=c.X&&b>=e.X){b=(b-e.X)/(c.X-e.X);c=G(c.color);let g=G(e.color);e=c.alpha+(g.alpha-c.alpha)*(1-b);d=Math.round(c.ba+(g.ba-c.ba)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+d.toString(16).padStart(2,
"0")+f.toString(16).padStart(2,"0");b=oa(b,e);break a}b=A[A.length-1].color}this.l=b;wa(this,a,this.u,this.G);this.C=R(this.F.U,this.ia)}}I(a){if(this.K)M(this,a);else{a.save();if(this.C){var b=document.createElement("canvas");b.width=this.width;b.height=this.height;var c=b.getContext("2d");c.drawImage(this.C,0,0,this.width,this.height);c.globalCompositeOperation="source-in";c.fillStyle=this.l;c.fillRect(0,0,this.width,this.height);a.save();a.globalAlpha=.8;a.filter="blur(20px)";a.drawImage(b,this.x,
this.y,this.width,this.height);a.restore()}b=this.x+this.width/2;c=this.y+this.height+-2;var e=a.createLinearGradient(b,c,b,c+20);e.addColorStop(0,"rgba(0, 180, 255, 0.9)");e.addColorStop(.4,"rgba(255, 255, 255, 0.8)");e.addColorStop(1,"rgba(255, 140, 0, 0)");a.fillStyle=e;e=20+15*Math.random();a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+e);a.lineTo(b+1,c);a.closePath();a.fill();xa(this,a);a.restore()}}qa(a){this.o-=a;0>=this.o&&!this.K&&(this.m--,K(this,40),Ba(this.F.Y));a=this.F.Y;S(a.g,"square",
600,a.g.currentTime,.15,a.i,.6)}}class Ca extends va{constructor(a){super(a,0,0);this.active=!1;this.speed=this.u=1;this.sa=this.ra=0;this.C=a}I(a){this.K?M(this,a):a.drawImage(this.C,this.x,this.y)}update(a){this.K?(L(this,a),N(this)&&(this.active=this.K=!1)):(this.x+=this.ra*this.speed*a,this.y+=this.sa*this.speed*a)}}
class Da extends ya{constructor(a,b,c,e,d,f,g,h,m,l,n){super(a,b,c,h,m,b.width,b.height);this.za="#ffb3007c";this.l=12;this.L=10;this.j=this.$=this.Ca=this.aa=0;this.Ua=.5;this.v=3.5;this.g={x:0,y:1};this.m=0;this.M="red";this.o=this.B=e;a=document.createElement("canvas");a.width=this.C.width+4*this.l;a.height=this.C.height+4*this.l;b=a.getContext("2d");if(!b)throw Error("Failed to get 2D context");b.shadowColor=this.za;b.shadowBlur=this.l;b.drawImage(this.C,2*this.l,2*this.l);this.Ka=a;this.j=60*
(Math.random()-.5);this.u=d;this.G=g;this.ha=l;this.S=n;this.v=f+.3*(2*Math.random()-1);this.i=Math.random()*this.v}update(a){if(this.K)L(this,a);else{var b=this.x;"none"!==this.ha&&(this.$-=a,0>=this.$&&(this.$=.5+1.5*Math.random(),this.Ca=100*(Math.random()-.5)),this.aa+=(this.Ca-this.aa)*a*2,this.y+=Math.max(10,this.L+this.aa)*a);switch(this.ha){case "straight":this.m-=a;0>=this.m&&(this.j=30*(.5>Math.random()?-1:1),this.m=.5);this.x+=this.j*a;break;case "sine":this.x+=1.5*Math.sin(this.y/20);
break;case "zigzag":this.m-=a,0>=this.m&&(this.j=50*(.5>Math.random()?-1:1),this.m=.5),this.x+=this.j*a}0>this.x&&(this.x=0,this.j*=-1);this.x+this.width>p.i&&(this.x=p.i-this.width,this.j*=-1);this.la.x=(this.x-b)/a;wa(this,a,this.u,this.G)}}I(a){this.K?M(this,a):(a.save(),a.drawImage(this.Ka,this.x-2*this.l,this.y-2*this.l),a.drawImage(this.C,this.x,this.y),xa(this,a),a.restore())}qa(a){this.o-=a;0>=this.o&&(K(this),Ba(this.F.Y))}wa(){return 0>this.x+this.width||this.x>p.i||this.y>p.j}}
class Ea extends Da{constructor(){super(...arguments);this.za="#ff1e007c";this.l=12;this.o=this.B=1400;this.v=1.4;this.g={x:0,y:1}}}function Fa(a,b){b=1+1.75*(a.N-1)+1.75*b;for(let e=0;e<b;e++){var c=void 0;c=a.N;c=5>c?[.7,.25,.05]:10>c?[.5,.4,.1]:15>c?[.3,.5,.2]:[.2,.5,.3];let d=Math.random();c=d<c[0]?a.F[0]:d<c[0]+c[1]?a.F[1]:a.F[2];c=new Da(a.g,c.C,a.g.ga,16*(1+.2*a.N),c.ta*(1+.02*a.N),3.5,c.G*(1+.03*a.N),Math.random()*(p.i-c.C.width),-40-100*Math.random(),c.ha,c.S);a.g.V.push(c)}}
function Ga(a){a.m<a.H?(a.m++,Fa(a,a.m)):E(()=>a.g.da.start())}function T(a){a.m=0;a.g.background=new I(1.1*a.g.background.ma,a.N);a.j=4;a.g.V=[];if(15<=a.N&&0===(a.N-15)%5){var b=Math.floor((a.N-15)/5)+1,c=1400*Math.pow(2.5,b),e=10*Math.pow(2.5,b),d=1.4*Math.pow(2.5,b);b=80*Math.pow(2.5,b);a.l=!0;c=new Ea(a.g,a.g.U.Ea,a.g.ga,c,e,d,b,p.i/2-a.g.U.Ea.width/2,20,"none","boss");a.g.V.push(c)}else 0===a.N%6&&a.H++,Ga(a)}function U(a){a.i.push({x:Math.random()*p.i,y:Math.random()*p.j*.4,Xa:a.A})}
function Ha(a){var b=a.g.V[0];if(b){b.o<=.75*b.B&&0>=a.i.length&&U(a);b.o<=.5*b.B&&1>=a.i.length&&U(a);b.o<=.25*b.B&&2>=a.i.length&&U(a);for(let g of a.i)if(.02>Math.random()){b=a;var c=g;let h=b.g.ga.get();if(h){h.u=10;h.speed=90;var e=h,d=c.y,f=Math.cos(Math.random()*Math.PI*2);e.x=c.x;e.y=d;e.ra=f;e.sa=1;e.active=!0;h.C=P(b.g.U,"purple")}}}}function Ia(a){a.l=!1;a.i=[];E(()=>a.g.da.start())}
class Ja{constructor(a){this.m=this.N=0;this.H=1;this.j=0;this.l=!1;this.i=[];this.A=0;this.g=a;this.F=[{C:this.g.U.Ma,ha:"straight",S:"single",G:75,ta:10},{C:this.g.U.Ra,ha:"sine",S:"burst",G:90,ta:11},{C:this.g.U.La,ha:"zigzag",S:"spread",G:112.5,ta:10}]}update(a){this.A+=a;let b=0===this.g.V.length,c=!this.g.da.isActive&&!this.g.fa.isActive&&!this.g.Z.isActive;this.l&&Ha(this);this.l&&b&&Ia(this);b&&c&&(this.m<this.H?Ga(this):E(()=>this.g.da.start()));0<this.j&&(this.j-=a)}I(){if(this.l){var a=
this.g.V[0];if(a){var b=p.g,c=p.i,e=(b.canvas.width-c)/2;a=a.o/a.B*c;b.fillStyle="#444";b.fillRect(e,5,c,10);b.fillStyle="#e33";b.fillRect(e,5,a,10);b.strokeStyle="#fff";b.lineWidth=2;b.strokeRect(e,5,c,10)}}for(var d of this.i){e=d.x;a=d.y;b=this.A-d.Xa;c=p.g;c.save();c.translate(e,a);for(e=0;5>e;e++){a=e/5*Math.PI*2;for(let g=0;15>g;g++){let h=g/15;var f=30*h;let m=a+2.5*h+.75*b,l=Math.cos(m)*f;f*=Math.sin(m);c.fillStyle=`rgba(150, 100, 255, ${1-h})`;c.beginPath();c.arc(l,f,1.5,0,2*Math.PI);c.fill()}}c.restore()}if(0<
this.j){d=Math.min(this.j/.5,1);p.g.save();p.g.globalAlpha=d;d=this.N;b=C.length-1;c=Math.floor((d-1)/5);let {Da:g,Ha:h}=c<b?{Da:C[c],Ha:(d-1)%5+1}:{Da:C[b],Ha:d-5*b};v(g,24,p.i/2,.2*p.j);v(`Zone ${h}`,32,p.i/2,.275*p.j);p.g.restore()}}}function V(a,b,c){for(let e=a.length-1;0<=e;e--){let d=a[e];if(d.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&d&&g&&d.x<g.x+(g.width||0)&&d.x+(d.width||0)>g.x&&d.y<g.y+(g.height||0)&&d.y+(d.height||0)>g.y){c(d,g);break}}}}
function W(a,b,c,e,d,f,g,h){a.g.save();a.g.imageSmoothingEnabled=!1;a.g.drawImage(b,d,f,g,h,c,e,2*g,2*h);a.g.restore()}class Ka{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}function La(a,b){return new Promise((c,e)=>{a.complete&&0!==a.naturalWidth?c(Ma(a,b)):(a.onload=()=>{c(Ma(a,b))},a.onerror=e)})}
function Ma(a,b){let c=document.createElement("canvas"),e=c.getContext("2d");c.width=a.width;c.height=a.height;e.drawImage(a,0,0);a=e.getImageData(0,0,a.width,a.height);let d=a.data;for(let f=0;f<d.length;f+=4){if(0===d[f+3])continue;let g=G(b[Math.min(b.length-1,Math.floor(d[f]/(256/b.length)))]||"#000000");d[f]=g.r;d[f+1]=g.ba;d[f+2]=g.b}e.putImageData(a,0,0);b=new Image;b.src=c.toDataURL();return b}
async function Na(a,b){let c=new Image;c.src=a.canvas.toDataURL();a=await La(c,b);await a.decode();return a}
async function Oa(a){let b=new Image;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABEBAMAAADD1i77AAAAHlBMVEUAAABcXFza2toUFBMzMzIhISFHR0cODg53d3eenp6oiQ8+AAAABHRSTlMA/vZm6v66FgAABMZJREFUSMedlM9z0kAUx79oSOBGNCx4U8cfV53RGY9BdxN6C2OWtDeim4XeqJMf9gbaMnirHW3Lf+tukkKtevEBk328T96+H7sP/xCfznfKj1tG6qI59QsYvNIbooJdoFku5ARTSjMYrFTPzJVrlgvAvAaoCEMYidZa80bsNpQPY2Gg5dZALkIOUW5xJxjOPMNV5KQ1rQFq0mkaBR4rI7AP+8xRBsN+lIgS8KgYJ5xTykq8f/iYelPAJFdOGkCJI6SUCafepMS9+MqhvloNzi8ilGHFiUdEFHqlZqTfyDOVuYXhlwuGUpyEqiAzt1SazBYinINg/8uJQImYST4UfloBZpBTV2VxeTU7f/ZEijJw4qU2C2vANWlguljK4eZHVzDAmptEekmSAUVdYRjAKsm/xFOPTtBlUFnQMEDD0Za6a4OsMZNByMXc66IxOn6aBcjSguqsgEDHYg2Ei4X0P3eL3N97mvH0WKQeSmvzIVpB1VIyHbEsD/u9LMqOolSUHexgpblSPH/I5GAURYzneRQy4CcaZxjjWozkA4+9UcEZD/MTVSCD4J4D6m6JjAjraLAcsSiXQnfZGZyTNJ5gK860MYtXgob0SOocyHBzQcn0xhF1G4IRLwrdz5lSY2l/ezSQcgd8n6AXj7osDI5XSiVMPnhEmXcD6MAioe8HaGkPCZL+MnTpDrhyAdJ3qCp1olQOY730cRMIFLAmTMXHyj4dEZFg9LuHeLkFTMjxVOJGmpuOPhGSAm0HWhIjyDHfAS39WmzrtztlewzgBLekMbN3tVVAgNviqs9/iqmvlAudAuf7fwGW2tYHcKx+D/7cu10Oi2yOVlWTPwDZjAAr9HBWqg8f3rIb89SfI6PM6oDzCHes28BZ6nOeMW8PXc45cGdrMaubipRrkQfI+Kei2AHtVg1MtX08UQArinTavgbubGogiy75cYEDnOqCyOOth6tr4OCIF5c4sM45T6OivQW+V89FwQseRa12+7HOAlvg8KJqzrxQ9ow3m+3HTzTQ3Fa4bq9pFUVU5IvG6VvlYo6za+Di5GN1EHihZDzHAVWAniy1nJy+q6IcKSIbqcXlp588SnfXqVexllFsNs8zBRCVJ986MJe9yoP5tXy8mSiEUh9bwOnxF2XJY93uu46LfVdpT7dAtwbM9H6Tv3/pu1V+zx5ux0Yvm5dBRqJvE68IgqoDH2pgZrOsDMKKsgd9kmT5GcyiyOWzGtjEYf6xBPjRoe0kWQGkdmxvo9wkvQrA6xlRw8G3YA2kbTv1jWuuvXFaAcZwyeOua8GQn2K7XwX5PR4OZU7lAsrxYBA53FdAUsTd3qKs/4rs7a3yUBA9kt/6/HPEFRCvbdvWW3QmQh4oIE1cdwLPGRMWJhqwa2B1ReVw5uRhd3TSQUgkER7DworH/siRClgvl2Q4EyknZLlASnurI8bh+15fynyogbVNYpuOQxL3O6pFvSJPAlinNKRTdqaBASHSFuErIUcKSG0mpwGa/ppKfhpUc2ZirDjHBOprRZRTrv43Pc55owaAU+ZWg+VutFfI7AXGA0nLQWHehZbuuxJQSnPKjwNgdhqqPN8Dj6piui+0s6pdHgtwt38iqaCj7ZEIdoMsp3qGbpbx+sF6P/gFd29b4XeVJzIAAAAASUVORK5CYII=";return new Promise(c=>
{b.onload=async()=>{a.sheet=b;c(a)}})}async function X(a,b,c,e,d,f){let g=new Ka(2*c,2*e);W(g,a.sheet,0,0,d,f,c,e);return Na(g,b)}async function Y(a,b,c,e,d){let f=new Ka(2*c,42);W(f,a.sheet,0,0,e,d,c,16);W(f,a.sheet,1,32,47,64,16,5);return Na(f,b)}class Pa{}function P(a,b="blue"){return a.g[b]??a.g.blue}function R(a,b="grey"){return a.i[b]??a.i.grey}async function Qa(a){let b=Object.keys(da);for(let c of b)a.i[c]=await X(a.j,da[c],25,30,4,38)}
async function Ra(a){let b=Object.keys(B);for(let c of b)a.g[c]=await X(a.j,B[c],3,3,0,65)}async function Sa(){var a=new Ta;let b=new Pa;a.j=await Oa(b);await Qa(a);await Ra(a);a.Ma=await X(b,fa,14,14,0,1);a.Ra=await X(b,ha,16,16,0,15);a.La=await X(b,ia,16,16,2,16);a.Ga=await Y(b,ea,18,29,32);a.ab=await Y(b,ka,17,47,49);a.Qa=await Y(b,la,17,47,32);a.Oa=await X(b,ma,16,20,31,48);a.Ea=await X(b,ma,32,31,32,0);return a}class Ta{constructor(){this.i={};this.g={}}}
function Ua(a,b){for(let c of a.ja)c.active&&(c.update(b),c.wa()&&(c.active=!1))}function Va(a,b){for(let c of a.ja)c.active&&c.I(b)}class Wa{constructor(a){this.ja=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.ja.push(c)}}get(){for(let a of this.ja)if(!a.active)return a.active=!0,a.K=!1,a;return null}}
class Xa{constructor(a){this.i=[{s:"Common",name:"Pulse Lazer MK-II",description:"Damage +4, Fire Rate +10%",apply:async()=>{this.g.h.u+=4;this.g.h.v*=.9;this.g.h.M="green"}},{s:"Common",name:"A.F.K Simulator",description:"Damage +2, Proj Speed 5%",D:"Spread Shot",apply:async()=>{this.g.h.u+=2;this.g.h.G*=1.05;this.g.h.M="orange";this.g.h.S="spread"}},{s:"Common",name:"Starburst",description:"Damage +3, Fire Rate 5%",D:"Burst Shot",apply:async()=>{this.g.h.u+=3;this.g.h.v*=.95;this.g.h.S="burst"}},
{s:"Rare",name:"Nebula Railcoil",description:"Damage +5, Proj Speed +20%",D:"Burst Shot",apply:()=>{this.g.h.u+=5;this.g.h.G*=1.2;this.g.h.M="purple";this.g.h.S="burst"}},{s:"Epic",name:"Iron Fang Torpedo",description:"Damage +6, Fire Rate +20%",D:"Spread Shot",apply:()=>{this.g.h.u+=6;this.g.h.v*=.8;this.g.h.M="orange";this.g.h.S="spread"}},{s:"Epic",name:"Modified Sprinkler",description:"Damage -4, Fire Rate +60%",D:"Mega Shot",apply:()=>{this.g.h.u-=4;this.g.h.v*=.6;this.g.h.M="pink";this.g.h.S=
"megaspread"}},{s:"Legendary",name:"Glass Cannon",description:"Damage +8 HP -40,",D:"Mega Shot",apply:()=>{this.g.h.u+=8;this.g.h.o-=30;this.g.h.M="orange";this.g.h.S="megaspread"}},{s:"Common",name:"Mithril Plating",description:"HP +10, Regen +3",D:"Evasion +5%",apply:()=>{this.g.h.B+=20;this.g.h.o+=20;this.g.h.R+=5;this.g.h.J+=5;this.g.h.ia="purple"}},{s:"Common",name:"Adamite Panels",description:"HP +15, Regen +2",apply:()=>{this.g.h.B+=20;this.g.h.o+=20;this.g.h.R+=5;this.g.h.ia="green"}},{s:"Rare",
name:"Torx\u2019s Reinforced Shell",description:"HP +20, Regen +4",apply:()=>{this.g.h.B+=20;this.g.h.o+=20;this.g.h.R+=4}},{s:"Rare",name:"Sunlight Medal Reflectors",description:"HP +22, Move Speed +5%",apply:()=>{this.g.h.B+=22;this.g.h.O*=1.05;this.g.h.L*=1.05;this.g.h.ia="gold"}},{s:"Epic",name:"Aether Veil",description:"Evasion +15%",apply:()=>{this.g.h.J+=15;this.g.h.ia="orange"}},{s:"Legendary",name:"Maggie's Cloak",description:"HP -15, Regen +5",D:"Evasion +30%",apply:()=>{this.g.h.B-=15;
this.g.h.o-=20;this.g.h.R+=5;this.g.h.J+=30;this.g.h.ia="blue"}},{s:"Common",name:"Starwing Stabilizers",description:"Move Speed +12%",apply:()=>{this.g.h.O*=1.12;this.g.h.L*=1.12}},{s:"Common",name:"Advanced Wings",description:"Move Speed +10%",D:"Fire Rate +5%",apply:()=>{this.g.h.O*=1.1;this.g.h.L*=1.1;this.g.h.v*=.95}},{s:"Rare",name:"Meteor Thrusters",description:"Move Speed +20%",D:"Evasion +5%",apply:()=>{this.g.h.O*=1.2;this.g.h.L*=1.2;this.g.h.J+=5}},{s:"Epic",name:"Plasma Rocket Fuel",description:"Move Speed +30%",
D:"Evasion -10%",apply:()=>{this.g.h.O*=1.3;this.g.h.L*=1.3;this.g.h.J-=10}},{s:"Legendary",name:"Voidstep Drive",description:"Move Speed +25%",D:"Evasion +10%",apply:()=>{this.g.h.O*=1.3;this.g.h.L*=1.3;this.g.h.J+=10}},{s:"Common",name:"Hunter\u2019s Instinct",description:"Damage +3, Evasion +2%",apply:()=>{this.g.h.u+=3;this.g.h.J+=2}},{s:"Common",name:"Ball of string",description:"Fire Rate +5%",D:"Evasion -3%",apply:()=>{this.g.h.v*=.9;this.g.h.J-=5}},{s:"Rare",name:"Plasma Capacitor",description:"Fire Rate +15%",
D:"Proj Speed +15%",apply:()=>{this.g.h.v*=.85;this.g.h.G*=1.15}},{s:"Rare",name:"Reverse Polarity",description:"Proj Speed +30%",D:"Move Speed -15%",apply:()=>{this.g.h.G*=1.3;this.g.h.O*=.85;this.g.h.L*=.85}},{s:"Epic",name:"Warp Core Fragment",description:"Fire Rate +30%",D:"Proj Speed -40%",apply:()=>{this.g.h.v*=.7;this.g.h.G*=.6}},{s:"Legendary",name:"Jackalbane Core",description:"Damage +5, HP +30",D:"Proj Speed -10%",apply:()=>{this.g.h.u+=5;this.g.h.B+=30;this.g.h.o+=30;this.g.h.G*=.9}},
{s:"Common",name:"Left-over Sushi",description:"Heal +10, Regen +1",apply:()=>{this.g.h.R+=1;Q(this.g.h,15)}},{s:"Common",name:"Tuna Suprise",description:"Heal +15 HP +5",apply:()=>{this.g.h.B+=5;Q(this.g.h,5)}},{s:"Common",name:"Juggernog",description:"Heal +20",apply:()=>{Q(this.g.h,20)}},{s:"Rare",name:"Iron Jackal Bru",description:"Heal +25, Regen +2",D:"Proj Speed +10%",apply:()=>{this.g.h.R+=2;Q(this.g.h,25);this.g.h.G*=1.1}},{s:"Legendary",name:"Stardust",description:"Heal +80, Fire Rate +20%",
apply:()=>{Q(this.g.h,80);this.g.h.v*=.8}}];this.g=a}}function Ya(a,b){b.save();let c=b.canvas.width-20;k=[];a.l.forEach((e,d)=>{d=200+105*d;a.A(b,10,d,c,90,e);a.j&&ba(d,c,()=>{a.T(e)})});b.restore()}
class Za{constructor(a){this.j=this.isActive=!1;this.l=[];this.g=a}start(){this.j=this.isActive=!0;this.l=this.F();var a=this.g.Z;a.l=a.m[Math.floor(Math.random()*a.m.length)];k=[]}I(a){this.isActive&&(a.save(),a.fillStyle="rgba(0, 0, 0, 0.7)",a.fillRect(0,0,a.canvas.width,a.canvas.height),v(this.H(),24,z(),30),this.m(),Ya(this,a),a.restore())}}
class $a extends Za{constructor(a){super(a);this.i=[];this.i=(new Xa(a)).i}H(){return"Zone Cleared!"}m(){var a=this.g.Z;a.l&&ab(a,"Torx",a.l,120,60)}F(){let a=[],b=c=>{let e=this.i.filter(d=>d.s===c&&!a.includes(d));e.length||(e=this.i.filter(d=>"Common"===d.s&&!a.includes(d)));e.length||(e=this.i.filter(d=>!a.includes(d)));return e[Math.floor(Math.random()*e.length)]};for(;3>a.length;){let c=100*Math.random();a.push(b(10>=c?"Legendary":25>=c?"Epic":50>=c?"Rare":"Common"))}return a}A(a,b,c,e,d,f){let g=
"white";"Rare"===f.s?g="#60a5fa":"Epic"===f.s?g="#c084fc":"Legendary"===f.s&&(g="#fb923c");y(a,b,c,e,d,6,"#222",g);c+=18;a.fillStyle=g;a.font="16px Courier New";a.fillText(`[${f.s}]`,b+10,c);c+=18;a.font="bold 16px Courier New";a.fillStyle="white";a.fillText(f.name,b+10,c);a.font="16px Courier New";c+=18;a.fillText(f.description,b+10,c);f.D&&a.fillText(f.D,b+10,c+18)}T(a){a.apply();bb(this.g.Y);this.j=!1;this.i=this.i.filter(b=>"Common"===b.s?!0:b!==a);E(()=>{k=[];this.isActive=!1;var b=this.g.ca;
b.N++;var c=b.g.Z;D.includes(b.N)?(c.isActive=!0,c.g.paused=!0):(c.isActive=!1,c.g.paused=!1);b.g.Z.isActive||T(b)})}}
let cb={[0]:[{P:"Maggie",text:"Benji, the Iron Jackal has stolen the Warp Core."},{P:"Maggie",text:"Who knows what he plans to do with it, but it can't be good."},{P:"Torx",text:"That core could power a thousand fleets\u2026"},{P:"Benji",text:"Then what are we waiting for? After him!"}],[1]:[{P:"Maggie",text:"The closer we get, the more concerning some of these readings are. "},{P:"Torx",text:"It looks like space-time itself is... distorting..."},{P:"Jackal",text:"Hahaha, you should be running rather than chasing me!"},
{P:"Benji",text:"You will regret stealing The Warp Core once we are done with you Jackal!"}],[2]:[{P:"Torx",text:"We're close, but I hope we're ready, this area looks very unstable."},{P:"Jackal",text:"Just in time for us to test our Mega Drive! Hahaha"},{P:"Maggie",text:"Watch out Benji! He's turned the Warp Core into a weapon!"},{P:"Benji",text:"This stops now Jackal! Feel my claws"}],[4]:[{P:"Maggie",text:"It\u2019s done. The Jackal is defeated, and The Core is safe."},{P:"Torx",text:"There's plenty of Iron Jackal's allies left to clean up."},
{P:"Benji",text:"Let's see how far we can get!"}]};function db(a){if(a.j<(cb[a.i]??[]).length-1)a.j++;else switch(a.isActive=!1,a.j=0,a.i){case 0:a.i=1;E(()=>{a.g.pa();a.g.paused=!1});break;case 1:a.i=2;E(()=>{T(a.g.ca);a.g.paused=!1});break;case 2:a.i=4;E(()=>{T(a.g.ca);a.g.paused=!1});break;default:E(()=>{T(a.g.ca);a.g.paused=!1})}}
function ab(a,b,c,e,d){let f=p.g;var g=c.split(" ");let h={x:25,y:e-65,width:32,height:44};f.font="bold 12px Courier New";let m=p.i-20-10;c=[];let l="";for(let n of g)g=l+n+" ",f.measureText(g).width>m?(c.push(l.trim()),l=n+" "):l=g;l.trim()&&c.push(l.trim());y(f,10,e,p.i-20,Math.max(d,16*c.length+20),4,"#1f1722");a=a.g.U;eb(f,b,"Maggie"===b?a.Qa:"Torx"===b?a.ab:"Jackal"===b?a.Oa:a.Ga,h);b=e+5+12;for(let n of c)w(n,12,20,b,"white","left"),b+=16}
function eb(a,b,c,{x:e,y:d,width:f,height:g}){c&&(a.save(),a.drawImage(c,e,d,f,g),a.strokeStyle="white",a.lineWidth=1,a.strokeRect(e+.5,d+.5,f-1,g-1),a.strokeRect(e,d,f,g),w(b,12,e+f/2,d+g+15,"white","center"),a.restore())}
class fb{constructor(a){this.isActive=!0;this.j=this.i=0;this.m="Scrap secured. Upgrade time!;Jackal\u2019s junk is our treasure.;Zone clear. Let\u2019s bolt on something new.;Reactor\u2019s humming\u2014don\u2019t breathe too close.;Enemy tech? More like spare parts.;Cut the green wire\u2026 I think.;Hull patched. Tape counts as armor, right?;Think Maggie prefers chrome or silver?;Big red button\u2026 probably important.;Not easy, but nothing worth doing is.;Shh\u2014don\u2019t tell the Jackal about this mod.;Found a shiny bit for the collection!;This part\u2019s purr-fect for Benji\u2019s claws.;Stay sharp\u2014Jackal\u2019s crew love ambushes.;Fitting this might take a plasma torch\u2026 or luck.".split(";");this.l=
null;this.g=a}start(){p.g.canvas.addEventListener("click",()=>this.isActive&&db(this))}I(){if(this.isActive){var a=cb[this.i]??[],b;0<=this.j&&this.j<a.length&&(b=a[this.j]);b&&ab(this,b.P,b.text,p.j-65,50)}}}
class gb{constructor(a){this.i=[{ua:3,description:"Enemies attack 20% faster",apply:async()=>{this.g.h.u+=4;this.g.h.v*=.9;this.g.h.M="green"}},{ua:6,description:"Jackal attacks 30% slower",apply:async()=>{this.g.h.u+=4;this.g.h.v*=.9;this.g.h.M="green"}},{ua:4,description:"Enemies do 10% increased",D:"damage",apply:async()=>{this.g.h.u+=4;this.g.h.v*=.9;this.g.h.M="green"}}];this.g=a}}
class hb extends Za{constructor(a){super(a);this.i=[];this.i=(new gb(a)).i}update(){if(N(this.g.h)){this.g.paused=!0;this.start();var a=this.g.h;a.o=a.B;a.K=!1;a.A=[];a.C=R(a.F.U)}}H(){return"Life Exchange"}m(){}F(){return this.i}A(a,b,c,e,d,f){y(a,b,c,e,d,6,"#222","white");c+=18;a.fillStyle="white";a.font="16px Courier New";a.fillText(`[${f.ua}]`,b+10,c);c+=18;a.fillText(f.description,b+10,c);f.D&&a.fillText(f.D,b+10,c+18)}T(a){a.apply();bb(this.g.Y);this.j=!1;E(()=>{k=[];this.isActive=!1;this.g.paused=
!1})}}async function ib(a,b){a.Y=b;a.U=await Sa();a.g=new Wa(()=>new Ca(P(a.U)));a.ga=new Wa(()=>new Ca(P(a.U,"red")));a.h=new Aa(a,R(a.U),a.g);a.Z.start();return a}
class jb{constructor(){this.V=[];this.paused=!0;this.background=new I;this.Z=new fb(this);this.da=new $a(this);this.fa=new hb(this)}update(a,b){let {h:c,background:e,ca:d}=this;e.update(a,c.la);this.fa.update();if(!this.fa.isActive&&!this.da.isActive&&!this.paused){c.update(a,b.x,b.y);for(let f of this.V)f.update(a);this.V=this.V.filter(f=>!f.wa()&&!N(f));Ua(this.g,a);Ua(this.ga,a);V(this.g.ja.filter(f=>f.active&&!f.K),this.V.filter(f=>!f.K),(f,g)=>{g.qa(f.u);K(f,6,2)});V([this.h],this.V,(f,g)=>{f.qa(g.Ua)});
V([this.h],this.ga.ja.filter(f=>f.active&&!f.K),(f,g)=>{100*Math.random()<f.J||f.qa(g.u);K(g,6,2)});d&&d.update(a)}}I(a){this.da.isActive?this.da.I(a):this.fa.isActive?this.fa.I(a):(this.background.I(a),this.V.forEach(b=>b.I(a)),this.h.I(a),this.ca&&this.ca.I(),Va(this.g,a),Va(this.ga,a),this.Z.isActive&&this.Z.I())}pa(){this.Z.isActive=!1;this.paused=!0;this.ca=new Ja(this);this.fa.start()}}
class kb{constructor(a){this.g=a}na(){c2d.addEventListener("click",()=>{window.location.reload()})}xa(a){v("Game Over",48,z(),100);v("You made it",32,z(),200);v("to level",32,z(),230);v(this.g.toString(),48,z(),300);x("Back to Menu",a)}}let lb=440*Math.pow(Math.pow(2,1/12),-9),mb=/^[0-9.]+$/,nb=/\s+/,ob=/(\d+)/,pb={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{pb[c]=b})});
function qb(a){return mb.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}class rb{constructor(a){let [b,c]=a.split(nb);a=b.split(ob);this.frequency=lb*Math.pow(Math.pow(2,1/12),pb[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=qb(c)||0}}
function sb(a){let b=a.gain;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let e=a.i.createBiquadFilter();e.type="peaking";e.frequency.value=c;b.connect(e);b=e;a.T.push(e)});b.connect(a.H);b.connect(a.A)}function tb(a,...b){b.forEach(c=>a.j.push(c instanceof rb?c:new rb(c)))}
function ub(a,b,c){b=a.j[b];let e=60/174*b.duration,d=e*(1-(a.l||1E-10));a.gain.gain.cancelScheduledValues(c);a.g.frequency.cancelScheduledValues(c);0<b.frequency?(a.g.frequency.setValueAtTime(b.frequency,c),a.gain.gain.setValueAtTime(1E-4,c),a.gain.gain.exponentialRampToValueAtTime(1,c+.01),a.gain.gain.setValueAtTime(1,c+Math.max(.01,d-.05)),a.gain.gain.exponentialRampToValueAtTime(1E-4,c+d)):(a.gain.gain.cancelScheduledValues(c),a.gain.gain.setValueAtTime(1E-4,c));return c+e}
function Z(a,b=a.i.currentTime){if(0!==a.j.length){a.createOscillator();a.gain.gain.setValueAtTime(0,b);a.g.start(b);var c=b;for(b=0;b<a.j.length;b++)c=ub(a,b,c);b=c+.02;a.gain.gain.setValueAtTime(0,c);a.g.stop(b);a.g.onended=()=>Z(a,c)}}
class vb{constructor(a,b){this.j=[];this.l=this.F=0;this.m="square";this.g=null;this.T=[];this.i=a;this.gain=this.i.createGain();this.A=this.i.createGain();this.H=this.i.createGain();sb(this);b&&tb(this,...b)}connect(a){this.A.connect(a);this.H.connect(a)}createOscillator(){this.stop();this.g=this.i.createOscillator();this.g.type=this.m;this.g.connect(this.gain)}stop(){if(this.g){try{this.g.onended=null;let a=this.i.currentTime;this.gain.gain.cancelScheduledValues(a);this.gain.gain.setValueAtTime(this.gain.gain.value,
a);this.gain.gain.linearRampToValueAtTime(0,a+.01);this.g.frequency.cancelScheduledValues(a);this.g.stop(a+.02)}catch{}this.g=null}}}function wb(a,b=a.g.currentTime,c){let e=a.g.createOscillator(),d=a.g.createGain();e.type="sine";e.frequency.setValueAtTime(120,b);e.frequency.exponentialRampToValueAtTime(40,b+.08);d.gain.setValueAtTime(c??4,b);d.gain.exponentialRampToValueAtTime(.001,b+.09);e.connect(d).connect(a.i);e.start(b);e.stop(b+.09)}
function xb(a,b=a.g.currentTime,c){var e=a.g.createBuffer(1,.2*a.g.sampleRate,a.g.sampleRate),d=e.getChannelData(0);for(let f=0;f<d.length;f++)d[f]=2*Math.random()-1;d=a.g.createBufferSource();d.buffer=e;e=a.g.createGain();e.gain.setValueAtTime(c??4,b);e.gain.exponentialRampToValueAtTime(.001,b+.2);d.connect(e).connect(a.i);d.start(b);d.stop(b+.2)}
function yb(a,b=a.g.currentTime,c){var e=a.g.createBuffer(1,.05*a.g.sampleRate,a.g.sampleRate),d=e.getChannelData(0);for(let f=0;f<d.length;f++)d[f]=2*Math.random()-1;d=a.g.createBufferSource();d.buffer=e;e=a.g.createGain();e.gain.setValueAtTime(c??2.4,b);e.gain.exponentialRampToValueAtTime(.001,b+.05);d.connect(e).connect(a.i);d.start(b);d.stop(b+.05)}class zb{constructor(a,b){this.g=a;this.i=b}}
function Ba(a){let b=a.g,c=b.currentTime;var e=.5*b.sampleRate,d=b.createBuffer(1,e,b.sampleRate),f=d.getChannelData(0);for(let g=0;g<e;g++)f[g]=2*Math.random()-1;e=b.createBufferSource();e.buffer=d;d=b.createBiquadFilter();d.type="highpass";d.frequency.value=400;f=b.createGain();f.gain.setValueAtTime(2,c);f.gain.exponentialRampToValueAtTime(.001,c+.5);e.connect(d).connect(f).connect(a.i);S(b,"sine",80,c,.5,a.i,2)}
function bb(a){[880,1174,1568].forEach((b,c)=>S(a.g,"sine",b,a.g.currentTime+.1*c,.6,a.i,.5))}
function Ab(a){if(!a.$){a.$=!0;var b=a.g.currentTime,c=60/174*4;Z(a.m,b+8*c);Z(a.l,b);var e=a.g.createOscillator();e.type="sine";e.frequency.value=246.94;var d=a.g.createGain();d.gain.value=0;e.connect(d).connect(a.i);e.start();d.gain.setValueAtTime(0,b+64*c);d.gain.linearRampToValueAtTime(.3,b+64*c);a.F.push(e);a.A.push(d);e=a.g.createOscillator();e.type="sine";e.frequency.value=293.66;d=a.g.createGain();d.gain.value=0;e.connect(d).connect(a.i);e.start();d.gain.setValueAtTime(0,b+80*c);d.gain.linearRampToValueAtTime(.3,
b+64*c);a.F.push(e);a.A.push(d);var f=()=>{let g=a.g.currentTime;for(;a.j*a.ea<g+.1;){let h=a.j*a.ea;256<=a.j&&([0,3,6,10,12,15].includes(a.j%16)&&yb(a.T,h),[0,7,11].includes(a.j%16)&&wb(a.T,h),[4,12].includes(a.j%16)&&xb(a.T,h));a.j++}a.aa=window.setTimeout(f,25)};f()}}
function S(a,b,c,e,d,f,g){let h=a.createOscillator();h.type=b;h.frequency.setValueAtTime(c,e);a=a.createGain();a.gain.setValueAtTime(g,e);a.gain.exponentialRampToValueAtTime(.001,e+d);h.connect(a).connect(f);h.start(e);h.stop(e+d)}
class Bb{constructor(){this.volume=.1;this.j=0;this.aa=null;this.F=[];this.A=[];this.$=!1;this.g=new AudioContext;this.H=this.g.createGain();this.i=this.g.createDynamicsCompressor();this.T=new zb(this.g,this.i);this.H.connect(this.g.destination);this.H.gain.value=this.volume;this.i.ratio.value=4;this.i.threshold.value=-12;this.i.connect(this.H);this.m=new vb(this.g,"D4 q;A4 q;B3 q;- q;- q;- q;- q;- q;- f;D4 q;E4 q;B3 q;- q;- q;- q;- q;- q;- f".split(";"));this.m.l=.2;this.m.F=.2;this.m.m="sine";this.m.connect(this.i);
this.l=new vb(this.g,"B1 h;- h;B1 h;- h;D2 h;- h;D2 h;- h".split(";"));this.l.l=0;this.l.F=0;this.l.m="triangle";let a=this.g.createGain();a.gain.value=1.5;this.l.connect(a);a.connect(this.i);this.ea=60/174/4}stop(){this.m.stop();this.l.stop();this.F.forEach((a,b)=>{b=this.A[b];let c=this.g.currentTime;b.gain.cancelScheduledValues(c);b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(0,c+.05);a.stop(c+.06)});this.F=[];this.A=[];this.$=!1;this.aa&&clearTimeout(this.aa);this.j=0}}
function Cb(a){za(a.g.h)&&E(()=>{sa(new kb(a.g.ca.N))})}class Db{constructor(){this.i=p.g}async na(){720>=window.innerWidth&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen());this.Y=new Bb;Ab(this.Y);this.g=await ib(new jb,this.Y);F.start(0,1,1)}xa(a){this.g&&(this.g.update(a,p.m),this.g.I(this.i),Cb(this))}Fa(){this.Y.stop()}}let Eb=new Db;
class ua{constructor(){this.Ga=null}pa(){sa(Eb)}async na(){c2d.addEventListener("click",this.pa)}xa(a){v("Benji",56,z()+15,180);w("Super",36,z()-70,145,"#fff","center","#ee2626",3,Math.PI/-20);let {g:b}=p;b.save();b.font='900 14px "Tahoma"';b.textAlign="center";b.fillStyle="#f01b1bce";b.fillText("JS13K 2025",55,p.j-10);b.restore();w("by hseager",14,p.i-60,p.j-11,"#f0f0f0c7");x("Start Game",a,.6*p.j)}Fa(){c2d.removeEventListener("click",this.pa)}}J=new ta(...[]);let Fb=performance.now(),Gb=new I;
(()=>{function a(b){let c=(b-Fb)/1E3;Fb=b;p.g.clearRect(0,0,p.i,p.j);Gb.update(c);Gb.I(p.g);J.g.xa(c);F.update(c);F.I(p.g);requestAnimationFrame(a)}aa();requestAnimationFrame(a)})();

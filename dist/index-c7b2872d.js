let h=[];function aa(){var a=n.g.canvas;a.addEventListener("click",b=>{let c=a.getBoundingClientRect(),d=a.width/c.width*(b.clientX-c.left);b=a.height/c.height*(b.clientY-c.top);for(let e of h)d>=e.x&&d<=e.x+e.w&&b>=e.y&&b<=e.y+e.aa&&e.oa()})}function ba(a,b,c){h.push({x:5,y:a,w:b,aa:40,oa:c})}function q(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(144/c.width*(a-c.left),256/c.height*(b-c.top))}
function r(a){let b,c;.5625<window.innerWidth/window.innerHeight?(c=window.innerHeight,b=.5625*c):(b=window.innerWidth,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}
function t(a,b,c,d){let e=n.g;e.save();e.font=`bold ${b-1}px "Courier New"`;e.strokeStyle="#0a0601";e.fillStyle="#0a0601";e.textAlign="center";e.strokeText(a,c,d+2);e.fillText(a,c,d+2);e.font=`bold ${b}px "Courier New"`;b=e.createLinearGradient(0,d-9,0,d);b.addColorStop(0,"#fff4c1");b.addColorStop(.25,"#ffd84a");b.addColorStop(.5,"#6a2c00");b.addColorStop(.75,"#b65a00");b.addColorStop(1,"#ff9d00");e.fillStyle=b;e.fillText(a,c,d);e.restore()}
function v(a,b,c,d,e="white",f="center",g,l,m){let k=n.g;k.save();k.font=`${b}px "Courier New", monospace`;k.textAlign=f;k.fillStyle=e;g&&(k.strokeStyle=g);l&&(k.lineWidth=l);m?(k.translate(c,d),k.rotate(m),g&&k.strokeText(a,0,0),k.fillText(a,0,0)):(g&&k.strokeText(a,c,d),k.fillText(a,c,d));k.restore()}
function w(a,b,c=200){var d=n;d.l+=b;.75<=d.l&&(d.l=0,d.s=!d.s);d.s&&(b=d.g,b.save(),b.font='bold 16px "Courier New", serif',b.textAlign="center",b.textBaseline="middle",b.strokeStyle="#161616ff",b.strokeText(a,b.canvas.width/2,c+1),d=b.createLinearGradient(0,c-10,0,c),d.addColorStop(0,"#ffffff"),d.addColorStop(.15,"#dcdcdc"),d.addColorStop(.3,"#a0a0a0"),d.addColorStop(.45,"#f8f8f8"),d.addColorStop(.6,"#7a7a7a"),d.addColorStop(.8,"#c8c8c8"),d.addColorStop(1,"#5a5a5a"),b.fillStyle=d,b.fillText(a,b.canvas.width/
2,c),b.restore())}function x(){return n.g.canvas.width/2}
class ca{constructor(){this.l=0;this.s=!0;this.g=c2d.getContext("2d");this.m=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.m=q(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.m=q(a.clientX,a.clientY)});c2d.addEventListener("mousedown",()=>!0);c2d.addEventListener("mouseup",()=>!1);c2d.addEventListener("touchstart",()=>{});c2d.addEventListener("touchend",()=>!1);window.addEventListener("resize",()=>r(this));window.addEventListener("orientationchange",()=>
r(this));r(this)}get h(){return this.g.canvas.width}get j(){return this.g.canvas.height}}let n=new ca;function y(a,b=.5,c){var d=z;d.l=a;d.m=b;d.j=0;d.g=!0;d.s=c;d.h="fade-in"===a?1:0}
class da{constructor(){this.h=0;this.g=!1;this.l=null;this.m=1;this.j=0}update(a){this.g&&(this.j+=a,a=Math.min(this.j/this.m,1),"fade-in"===this.l?this.h=1-a:"fade-out"===this.l&&(this.h=a),1<=a&&(this.g=!1,this.s?.()))}o(a){if(this.g||0!==this.h)a.save(),a.fillStyle=`rgba(0, 0, 0, ${.8*this.h})`,a.fillRect(0,0,n.h,n.j),a.restore()}}
let z=new da,A=[{F:1,color:"#00FF66"},{F:.75,color:"#00BFFF"},{F:.5,color:"#FFA500"},{F:.25,color:"#FF3333"},{F:0,color:"rgba(255, 0, 0, 0)"}],ea=["#35a3ec","#4480b8a2"],fa="#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" "),ha="#000000 #1b1200 #271701 #3a2200 #241700 #604000 #805800 #A07000 #C08800 #FF7F00".split(" "),ia=["#ff5e49","#881c18"],ja="#200900 #190902 #291403 #311d0c #a05030 #c06440 #e6a67c".split(" "),ka="#201a00 #191502 #291f03 #312e0c #a08230 #c09e40 #e6d37c".split(" "),
la="#200000 #190202 #290303 #310c0c #A03030 #c04040 #e67c7c".split(" ");function B(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,W:a>>8&255,b:a&255,alpha:b}}function C(a,b=1){let {r:c,W:d,b:e}=B(a,b);return`rgba(${c}, ${d}, ${e}, ${b})`}
function ma(){return D.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var d=Math.max(a,c,b),e=Math.min(a,c,b),f=0,g=0;let l=(d+e)/2;if(d!==e){let p=d-e;g=.5<l?p/(2-d-e):p/(d+e);switch(d){case a:f=(c-b)/p+(c<b?6:0);break;case c:f=(b-a)/p+2;break;case b:f=(a-c)/p+4}f*=60}let {aa:m,wa:k,qa:u}={aa:f,wa:100*g,qa:100*l};a=(m+200*(Math.random()-.5)+360)%360;d=Math.min(100,Math.max(0,u+0*(Math.random()-.5)));
d/=100;c=Math.min(100,Math.max(0,k+10*(Math.random()-.5)))/100*(1-Math.abs(2*d-1));b=c*(1-Math.abs(a/60%2-1));d-=c/2;g=f=e=0;0<=a&&60>a?(e=c,f=b,g=0):60<=a&&120>a?(e=b,f=c,g=0):120<=a&&180>a?(e=0,f=c,g=b):180<=a&&240>a?(e=0,f=b,g=c):240<=a&&300>a?(e=b,f=0,g=c):300<=a&&360>a&&(e=c,f=0,g=b);return`#${Math.round(255*(e+d)).toString(16).padStart(2,"0")}${Math.round(255*(f+d)).toString(16).padStart(2,"0")}${Math.round(255*(g+d)).toString(16).padStart(2,"0")}`})}let D="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function E(a,b,c,d,e){b=na(b,a,e);return{ra:a,B:b,offsetX:0,offsetY:0,xa:c,ja:d}}
function na(a=.01,b=D,c){let d=document.createElement("canvas");d.width=128;d.height=128;let e=d.getContext("2d");e.imageSmoothingEnabled=!1;a=Math.floor(16384*a);for(var f=0;f<a;f++){var g=Math.floor(128*Math.random()),l=Math.floor(128*Math.random());e.fillStyle=b[Math.floor(Math.random()*b.length)];e.fillRect(g,l,c,c)}for(let m=0;2>m;m++){c=e;a=128*Math.random();f=128*Math.random();g=64*Math.random()+128/3;l=b;for(let k=-128;128>=k;k+=128)for(let u=-128;128>=u;u+=128){let p=c.createRadialGradient(a+
k,f+u,0,a+k,f+u,g);p.addColorStop(0,C(l[5],.1));p.addColorStop(1,"rgba(0,0,0,0)");c.globalCompositeOperation="screen";c.fillStyle=p;c.beginPath();c.arc(a+k,f+u,g,0,2*Math.PI);c.fill();c.globalCompositeOperation="source-over"}}b=new Image;b.src=d.toDataURL();return b}
class F{constructor(){this.g=[];let a=ma();this.g.push(E(a,.001,12,.2,1));this.g.push(E(a,.002,18,.3,1.2));this.g.push(E(a,.003,30,.4,1.2))}update(a,b={x:0,y:0}){for(let c of this.g)0!==c.B.width&&0!==c.B.height&&(c.offsetY=(c.offsetY+c.xa*a-.5*b.y*c.ja)%c.B.height,0>c.offsetY&&(c.offsetY+=c.B.height),c.offsetX=(c.offsetX-.4*b.x*c.ja)%c.B.width)}o(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var d=this.g[0];a.save();a.fillStyle=d.ra[0];a.fillRect(0,0,b,c);for(let e of this.g)e.B.complete&&
(d=a.createPattern(e.B,"repeat"))&&(a.save(),a.translate(e.offsetX,e.offsetY),a.fillStyle=d,a.fillRect(-e.B.width/4,-e.B.height,b+100,c+e.B.height),a.restore())}}function G(a){var b=H,c=[];b.g.ia?.();b.g=a;b.g.X?.(...c)}class oa{constructor(...a){this.g=pa;this.g.X?.(...a)}}let H;class qa{constructor(){this.g=new Map;document.addEventListener("keydown",a=>{this.g.set(a.code,!0)});document.addEventListener("keyup",a=>{this.g.set(a.code,!1)});c2d.addEventListener("click",()=>!0);new DOMPoint}}new qa;
function I(a,b=8,c=6){if(!a.u){a.u=!0;for(let d=0;d<b;d++){let e=240*(Math.random()-.5),f=Math.random()*Math.PI*2;a.m.push({x:a.x+a.width/2,y:a.y+a.height/2,Aa:Math.cos(f)*e,Ba:Math.sin(f)*e,da:Math.random()*Math.PI*2,va:8*(Math.random()-.5),alpha:1,size:c,ya:Math.floor(Math.random()*(a.g.width-c)),za:Math.floor(Math.random()*(a.g.height-c))})}}}function J(a,b){for(let c of a.m)c.x+=c.Aa*b,c.y+=c.Ba*b,c.da+=c.va*b,c.alpha-=1.5*b;a.m=a.m.filter(c=>0<c.alpha)}
function K(a,b){for(let c of a.m)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.da),b.drawImage(a.g,c.ya,c.za,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function L(a){return a.u&&0===a.m.length}class M{constructor(a,b,c,d=0,e=0){this.m=[];this.u=!1;this.g=a;this.x=b;this.y=c;this.width=d;this.height=e;this.active=!0}ba(){return 0>this.x+this.width||this.x>n.h||0>this.y+this.height||this.y>n.j}}
function N(a,b,c){if(0>=a.h&&a.U){var d=a.U.get();if(d){var e=0>=a.J.y?a.y:a.y+a.height;d.v=b;d.speed=c;b=e;c=a.J.x;e=a.J.y;d.x=a.x+a.width/2+a.ea;d.y=b;d.fa=c;d.ga=e;d.active=!0;a.h=a.C}}}function O(a,b){let c=Math.max(-2,Math.min(2,3*a.$.x)),d=a.width/2;for(let e=0;e<a.width;e++)b.drawImage(a.g,e,0,1,a.height,a.x+e,a.y+Math.floor((e-d)/d*c),1,a.height)}
class P extends M{constructor(a,b,c,d,e,f){super(a,c,d,e,f);this.P={x:0,y:0};this.$={x:0,y:0};this.h=this.ea=0;this.C=.1;this.J={x:0,y:-1};this.g=a;this.U=b}}
class ra extends P{constructor(a,b){super(a,b,72,256-a.height,a.width,a.height);this.ea=-2;this.l="#00bfff7c";this.s=10;this.L=75;this.G=50;this.j=this.I=100;this.C=.6;this.v=10;this.K=100;this.O=this.H=0;this.g=a}update(a,b,c){if(this.u)J(this,a);else{b-=this.x+this.width/2;c-=this.y+this.height/2;var d=Math.hypot(b,c);2<d&&(this.x+=b/d*this.L*a,this.y+=c/d*this.G*a);this.$={x:this.x-this.P.x,y:this.y-this.P.y};this.P={x:this.x,y:this.y};a:{b=this.j/this.I;b=Math.max(0,Math.min(1,b));for(var e=0;e<
A.length-1;e++)if(c=A[e],d=A[e+1],b<=c.F&&b>=d.F){b=(b-d.F)/(c.F-d.F);c=B(c.color);let g=B(d.color);d=c.alpha+(g.alpha-c.alpha)*(1-b);e=Math.round(c.W+(g.W-c.W)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+f.toString(16).padStart(2,"0");b=C(b,d);break a}b=A[A.length-1].color}this.l=b;0<this.h&&(this.h-=a);N(this,this.v,this.K)}}o(a){if(this.u)K(this,a);else{a.save();a.shadowColor=this.l;a.shadowBlur=
this.s;let b=this.x+this.width/2,c=this.y+this.height+-2,d=a.createLinearGradient(b,c,b,c+20);d.addColorStop(0,"rgba(0, 180, 255, 0.9)");d.addColorStop(.4,"rgba(255, 255, 255, 0.8)");d.addColorStop(1,"rgba(255, 140, 0, 0)");let e=6+3*Math.random();a.fillStyle=d;a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+e);a.lineTo(b+1,c);a.closePath();a.fill();O(this,a);a.restore()}}Y(a){this.j-=a;0>=this.j&&I(this,40)}}
class Q extends M{constructor(a){super(a,0,0);this.active=!1;this.speed=this.v=1;this.ga=this.fa=0;this.g=a}o(a){this.u?K(this,a):a.drawImage(this.g,this.x,this.y)}update(a){this.u?(J(this,a),L(this)&&(this.active=this.u=!1)):(this.x+=this.fa*this.speed*a,this.y+=this.ga*this.speed*a)}}
class sa extends P{constructor(a,b,c){super(a,b,c,-15-100*Math.random(),a.width,a.height);this.ka="#ffb3007c";this.l=12;this.G=this.M=this.I=20;this.j=0;this.ua=.5;this.C=3.5;this.J={x:0,y:1};this.s=0;a=document.createElement("canvas");a.width=this.g.width+4*this.l;a.height=this.g.height+4*this.l;b=a.getContext("2d");if(!b)throw Error("Failed to get 2D context");b.shadowColor=this.ka;b.shadowBlur=this.l;b.drawImage(this.g,2*this.l,2*this.l);this.la=a;this.j=60*(Math.random()-.5);this.v=12;this.K=
50;this.C=3.5+.3*(2*Math.random()-1);this.h=Math.random()*this.C}update(a){if(this.u)J(this,a);else{let b=this.x;this.y+=Math.random()*this.G*a;this.x+=this.j*a;this.s-=a;0>=this.s&&(.5>Math.random()&&(this.j*=-1),this.s=1+2*Math.random());0>this.x&&(this.x=0,this.j*=-1);this.x+this.width>n.h&&(this.x=n.h-this.width,this.j*=-1);this.$.x=(this.x-b)/a;0<this.h&&(this.h-=a);N(this,this.v,this.K)}}o(a){this.u?K(this,a):(a.save(),a.drawImage(this.la,this.x-2*this.l,this.y-2*this.l),a.drawImage(this.g,
this.x,this.y),O(this,a),a.restore())}Y(a){this.M-=a;0>=this.M&&I(this)}ba(){return 0>this.x+this.width||this.x>n.h||this.y>n.j}}function R(a,b){a.R=b;a.h=2;a.g.D=[];b=2*(a.R-1);let c=[a.g.T.na,a.g.T.ha,a.g.T.ma];for(let e=0;e<b;e++){var d=new sa(c[Math.floor(Math.random()*c.length)],a.g.V,Math.random()*(n.h-a.g.T.ha.width));a.g.D.push(d)}}
class ta{constructor(a){this.R=1;this.h=0;this.g=a}update(a){0!==this.g.D.length||this.g.Z.isActive||z.g||y("fade-out",.5,()=>{this.g.Z.start();y("fade-in")});0<this.h&&(this.h-=a)}o(){if(0<this.h){let a=Math.min(this.h/.5,1);n.g.save();n.g.globalAlpha=a;t(`Zone ${this.R}`,24,n.h/2,60);n.g.restore()}}}
function S(a,b,c){for(let d=a.length-1;0<=d;d--){let e=a[d];if(e.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&e&&g&&e.x<g.x+(g.width||0)&&e.x+(e.width||0)>g.x&&e.y<g.y+(g.height||0)&&e.y+(e.height||0)>g.y){c(e,g);break}}}}class ua{constructor(a){this.image=a}o(a,b,c,d,e,f,g,l=0){a.save();l&1&&(a.translate(b+f,c),a.scale(-1,1),c=b=0);l&2&&(a.translate(b,c+g),a.scale(1,-1),c=0);a.drawImage(this.image,d,e,f,g,b,c,f,g);a.restore()}}
function T(a,b,c,d,e,f,g,l,m=0){b.o(a.g,c,d,e,f,g,l,m)}class U{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}
async function V(){let a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABYCAMAAAByMgEaAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEtQTFRFAAAAHh4eEhISPj4+KCgoS0tLMjIyc3NzY2NjVlZWCAgIwMDAioqKnZ2d3NzckJCQ9/f3ra2t4uLiCgoKr6+vnp6eHR0dYGBg8PDwLyecuwAAABl0Uk5TAP///////////v/4///9Iu/LelwjgY6lCv7BgooAAARvSURBVHic7VfZcuQgDDRI4jDgOXLs/v+XbguMj8STuDL7mK4kZbusRkitNhkGGQ6Q+POzv/f7teJ+/7t5fI/3z+8GcvbDo8ttKtFUxDLdLisBfSQow0Be3LDN7XLL2Riu8Q6/eUvxAd5qBhEEccnikrKzSmABJbEup0cMEw/sxbMMzGu8bZCSkrdmxOVDhhCC5OCZUYge7xEw1tUl50x6YY0/ZhCJnvJ1YgLGeX1GxDgqB5OIGDuCwBznwIJXQvHROXaV4IbyNQLdPsdIqIUSmHI7SsFZ9jnQVVyrwWXSoiF+rPGG689YuzEdpWDIxIA0mJsWbl4Jag0cdiWaIWRSm5GPUiAzjFidhtYFJKBLsm7frZCmiaMUCGEtfVGCt6Ttp6wbb51ooJpCejtKYXdxC1V9IaJ52FeL1m3WDMLRHsbdXTIrQYhMmoTYwEGr6Ew66sMOU92si9i0ZTBUPWJ5aYM19WTjLirrH9MIqvTZmdGRq+2o49C6sBDkwW/j5xng1Am0fuNoSNtn56buCFLJm/g6xpqSp06gOhp7D8bWjx1B2mRQNPdYNAXRIvLM0BvYr1QfvYgphSWeAtYNU8AoQnhoYyPgSjF2NFn3Nkop4jqBD+xiSUEsSyQIqYmfenAvQNXnLCQf0OaFIIrzBZTsgsh4mbhC4rq8iTxjlnIh7+hlrmAUisGXK2wNo4895PoqHkbb9gAheobYHfdhyuSNmwngQ7CEkFJE0wzKeJngDEadJEbsCoNEhgLMAuizlF20vQZSpyhklAIl1KG8lVpyB68yiFZNqimBoRuKoAaW39uN0SY6nz1UO1QCWJrRgkG91iEDFJC0A7xYmmA0sMTLIkMLXxXSueY/g1pCQQ0CsR01AaHRYE1ZLZGC2RBgTYytkCXqo/06FQ9ECNmhyHYU3JXVTGAvQY161TIPTn1pGe3XVAJihCBi/QVBSa/L6z5GB9vsjXTzNOVFGmC4lQw/pDpIMKjd1xGaCYZhNy/LIzcXYwN8XJMXBLN+XNflGwFqsCM4xOvbbVKk29vOSvEVoGgEBO+7BLqjfAcJ0HFGadHhvunZHA6PHp8A6WaXPboGrfWcWgE8fRnZMxDOVAlsJ9BA1GvXhq8IHL7GwaG/bnZWCiFBd8IHB6WDLQhl8aQE3AmiJF8pzxEIjhQYWGTQfY1jTjCUj+esY8A/kDJG3723Ldg6jCnh0SkC0ff1W8utb39E2+An36bxHAn8yPSCFYtDkM/TVa56nDnViCHA0LojYdCpmio+n+TONQJT/77oFjPLmPcJlg5hsPsysMMMq/Ad3A2FQAnMoMegUwQ5bG4EMdapJ2s+p+Kj346N3y56ogQBzZPdTs9lvS4o2btzzTpGxqnSh+/fe5xBhl/H7997TOApxHPec4xnFq94ZvtbPLOJivz9K1/Cn9PsQ4g/N3WPE6Dnapnhq8/F4wT2RLzXM9ITGeQa/3MCH2v8zwca60fE/zwDFJDwz+jPpYxjm07z00P5i1/84he/+A/4B4ZhJXc0dSfjAAAAAElFTkSuQmCC";let b=
new ua(a);return new Promise(c=>{a.onload=async()=>{c(b)}})}async function va(a){let b=new U(27,30);T(b,a,7,0,0,15,13,30);T(b,a,1,18,0,45,6,9);T(b,a,19,18,0,45,6,9,1);return this.g(b,fa)}async function wa(a){let b=new U(14,14);T(b,a,0,0,16,0,14,14);return this.g(b,ja)}async function xa(a){let b=new U(16,16);T(b,a,0,0,16,15,16,16);return this.g(b,ka)}async function ya(a){let b=new U(16,16);T(b,a,0,0,16,32,16,16);return this.g(b,la)}
async function W(a,b,c=0){let d=new U(3,3);T(d,a,0,0,0,0,3,3,c);return this.g(d,b)}async function za(a){let b=new U(32,32);T(b,a,0,0,32,0,32,32);return this.g(b,ha)}async function Aa(){var a=new Ba;let b=await V();a.ta=await va(b);a.na=await wa(b);a.ha=await xa(b);a.ma=await ya(b);a.sa=await W(b,ea,2);a.pa=await W(b,ia);return a}class Ba{}function X(a,b){for(let c of a.N)c.active&&(c.update(b),c.ba()&&(c.active=!1))}function Y(a,b){for(let c of a.N)c.active&&c.o(b)}
class Z{constructor(a){this.N=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.N.push(c)}}get(){for(let a of this.N)if(!a.active)return a.active=!0,a.u=!1,a;return null}}
class Ca{constructor(a){this.h=[{A:"Common",name:"Pulse Lazer MK-II",description:"(DMG +2, ATK SPD +10%)",apply:()=>{this.g.i.v+=2;this.g.i.C*=.9}},{A:"Rare",name:"Nebula Railcoil",description:"(DMG +5, BLT SPD +20%)",apply:()=>{this.g.i.v+=5;this.g.i.K*=1.2}},{A:"Epic",name:"Iron Fang Torpedo",description:"(DMG +10, BLT SPD +20%, ATK SPD +20%)",apply:()=>{this.g.i.v+=10;this.g.i.K*=1.2;this.g.i.C*=.8}},{A:"Common",name:"Mithril Plating",description:"(HP +10, REGEN +2, EVASION +5%)",apply:()=>{this.g.i.I+=
20;this.g.i.O+=5;this.g.i.H+=5}},{A:"Common",name:"Adamite Panels",description:"(HP +20, REGEN +5)",apply:()=>{this.g.i.I+=20;this.g.i.O+=5}},{A:"Rare",name:"Torx\u2019s Reinforced Shell",description:"(HP +50, REGEN +10)",apply:()=>{this.g.i.I+=50;this.g.i.O+=10}},{A:"Epic",name:"Aether Veil",description:"(EVASION +15%)",apply:()=>{this.g.i.H+=15}},{A:"Common",name:"Starwing Stabilizers",description:"(MOVE SPD +10%)",apply:()=>{this.g.i.L*=1.15;this.g.i.G*=1.15}},{A:"Rare",name:"Meteor Thrusters",
description:"(MOVE SPD +20%, EVASION +5%)",apply:()=>{this.g.i.L*=1.2;this.g.i.G*=1.2;this.g.i.H+=5}},{A:"Legendary",name:"Voidstep Drive",description:"(MOVE SPD +20%, EVASION +5%)",apply:()=>{this.g.i.L*=1.3;this.g.i.G*=1.3;this.g.i.H+=10}}];this.g=a}}function Da(a){a.j=[...a.l].sort(()=>Math.random()-.5).slice(0,3)}
function Ea(a,b,c,d){let e="white";"Rare"===d.A?e="#60a5fa":"Epic"===d.A?e="#c084fc":"Legendary"===d.A&&(e="#fb923c");a.beginPath();a.moveTo(11,b);a.lineTo(5+c-6,b);a.quadraticCurveTo(5+c,b,5+c,b+6);a.lineTo(5+c,b+40-6);a.quadraticCurveTo(5+c,b+40,5+c-6,b+40);a.lineTo(11,b+40);a.quadraticCurveTo(5,b+40,5,b+40-6);a.lineTo(5,b+6);a.quadraticCurveTo(5,b,11,b);a.closePath();a.fillStyle="#333";a.fill();a.strokeStyle=e;a.lineWidth=2;a.stroke();a.fillStyle=e;a.font="bold 9px Arial";a.textAlign="left";a.fillText(`[${d.A}]`,
11,b+10);a.fillStyle="white";a.fillText(d.name,11,b+20);a.fillText(d.description,11,b+30)}
class Fa{constructor(a){this.h=this.isActive=!1;this.j=[];this.l=[];this.g=a;this.l=(new Ca(a)).h}start(){this.h=this.isActive=!0;Da(this);h=[]}o(a){if(this.isActive){a.save();a.fillStyle="rgba(0, 0, 0, 0.7)";a.fillRect(0,0,a.canvas.width,a.canvas.height);t("Zone Cleared!",12,x(),15);v("Choose an upgrade:",9,x(),30);var b=a.canvas.width-10;h=[];this.j.forEach((c,d)=>{d=40+55*d;Ea(a,d,b,c);this.h&&ba(d,b,()=>{c.apply();this.h=!1;y("fade-out",.5,()=>{h=[];this.isActive=!1;var e=this.g.S;R(e,e.R+1);
e.g.background=new F;y("fade-in")})})});a.restore()}}}async function Ga(){var a=new Ha;a.T=await Aa();let {ta:b,pa:c,sa:d}=a.T;a.g=new Z(()=>new Q(d));a.V=new Z(()=>new Q(c));a.i=new ra(b,a.g);a.S=new ta(a);R(a.S,1);return a}
class Ha{constructor(){this.D=[];this.background=new F;this.Z=new Fa(this)}update(a,b){let {i:c,background:d,S:e}=this;d.update(a,c.$);c.update(a,b.x,b.y);for(let f of this.D)f.update(a);this.D=this.D.filter(f=>!f.ba()&&!L(f));X(this.g,a);X(this.V,a);S(this.g.N.filter(f=>f.active&&!f.u),this.D.filter(f=>!f.u),(f,g)=>{g.Y(f.v);I(f,6,1)});S([this.i],this.D,(f,g)=>{f.Y(g.ua)});S([this.i],this.V.N.filter(f=>f.active&&!f.u),(f,g)=>{f.Y(g.v);I(g,6,1)});e.update(a)}o(a){this.Z.isActive?this.Z.o(a):(this.background.o(a),
this.D.forEach(b=>b.o(a)),this.i.o(a),this.S.o(),Y(this.g,a),Y(this.V,a))}}class Ia{constructor(a){this.g=a}X(){c2d.addEventListener("click",()=>{window.location.reload()})}ca(a){t("Game Over",24,x(),50);t("You made it",18,x(),100);t("to level",18,x(),115);t(this.g.toString(),24,x(),150);w("Back to Menu",a)}}let Ja=440*Math.pow(Math.pow(2,1/12),-9),Ka=/^[0-9.]+$/,La=/\s+/,Ma=/(\d+)/,Na={};
"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{Na[c]=b})});function Oa(a){return Ka.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}
class Pa{constructor(a){let [b,c]=a.split(La);a=b.split(Ma);this.frequency=Ja*Math.pow(Math.pow(2,1/12),Na[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=Oa(c)||0}}function Qa(a){let b=a.j;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let d=a.h.createBiquadFilter();d.type="peaking";d.frequency.value=c;b.connect(d);b=d;a.P.push(d)});b.connect(a.M);b.connect(a.l)}function Ra(a,...b){b.forEach(c=>{a.U.push(c instanceof Pa?c:new Pa(c))})}
class Sa{constructor(a,b){this.U=[];this.s=this.m=0;this.J="square";this.g=null;this.P=[];this.h=a;this.j=this.h.createGain();this.l=this.h.createGain();this.M=this.h.createGain();Qa(this);b&&Ra(this,...b)}createOscillator(){this.stop();this.g=this.h.createOscillator();this.g.type=this.J;this.g.connect(this.j)}connect(a){this.l.connect(a);this.M.connect(a)}stop(){this.g&&(this.g.onended=null,this.g.stop(),this.g.frequency.cancelScheduledValues(0),this.g=null)}}
class Ta{constructor(){this.volume=.15;this.g=new AudioContext;this.m=this.g.createGain();this.j=this.g.createDynamicsCompressor();this.m.connect(this.g.destination);this.m.gain.value=this.volume;this.j.ratio.value=4;this.j.threshold.value=-12;this.j.connect(this.m);this.l=new Sa(this.g,"F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;B4 q;F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;F#4 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;- q;C5 q;E5 q;C5 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;A5 q;G5 q;F5 q;D5 q".split(";"));
this.l.s=.3;this.l.m=.02;this.h=new Sa(this.g,"F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h".split(";"));this.h.s=.1;this.h.m=.2;this.h.J="sawtooth";this.l.connect(this.j);this.h.connect(this.j)}stop(){this.l.stop();this.h.stop()}}function Ua(a){L(a.g.i)&&(z.g||y("fade-out",.5,()=>{G(new Ia(a.g.S.R));y("fade-in",.5)}))}
class Va{constructor(){this.h=n.g}async X(){this.j=new Ta;this.g=await Ga();y("fade-in",1)}ca(a){this.g&&(this.g.update(a,n.m),this.g.o(this.h),Ua(this))}ia(){this.j.stop()}}let Wa=new Va;
class Xa{constructor(){this.g=0}j(){y("fade-out",.5,()=>{G(Wa)})}async X(){c2d.addEventListener("click",this.j);let a=await V();this.h=await za(a)}ca(a){t("Benji",28,x()+15,60);v("Super",18,x()-30,44,"#fff","center","#ee2626",3,Math.PI/-20);var {g:b}=n;b.save();b.font='900 10px "Tahoma"';b.textAlign="center";b.fillStyle="#f01b1bce";b.fillText("JS13K 2025",35,n.j-10);b.restore();v("by hseager",9,n.h-35,n.j-11,"#f0f0f0c7");w("Start Game",a,195);this.g+=.6*a;if(this.h){({g:a}=n);b=x();let c=Math.cos(this.g);
a.save();a.translate(b,127);a.scale(c,1);a.beginPath();a.arc(0,0,32,0,2*Math.PI);a.clip();a.drawImage(this.h,-32,-32,64,64);a.restore()}}ia(){c2d.removeEventListener("click",this.j)}}let pa=new Xa;H=new oa(...[]);let Ya=performance.now(),Za=new F;(()=>{function a(b){let c=(b-Ya)/1E3;Ya=b;n.g.clearRect(0,0,n.h,n.j);Za.update(c);Za.o(n.g);H.g.ca(c);z.update(c);z.o(n.g);requestAnimationFrame(a)}aa();requestAnimationFrame(a)})();

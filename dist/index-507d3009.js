function h(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(144/c.width*(a-c.left),256/c.height*(b-c.top))}function p(a){let b,c;.5625<window.innerWidth/window.innerHeight?(c=window.innerHeight,b=.5625*c):(b=window.innerWidth,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}
function r(a,b,c,d){let e=t.g;e.save();e.font=`bold ${b-1}px "Courier New"`;e.strokeStyle="#3f2163";e.textAlign="center";e.strokeText(a,c,d+1);e.font=`bold ${b}px "Courier New"`;e.fillStyle="#ed9436";e.fillText(a,c,d);e.restore()}
function u(a,b,c,d,e="white",f="center",g,l,m){let k=t.g;k.save();k.font=`${b}px "Courier New"`;k.textAlign=f;k.fillStyle=e;g&&(k.strokeStyle=g);l&&(k.lineWidth=l);m?(k.translate(c,d),k.rotate(m),g&&k.strokeText(a,0,0),k.fillText(a,0,0)):(g&&k.strokeText(a,c,d),k.fillText(a,c,d));k.restore()}function v(){return t.g.canvas.width/2}function w(a,b){var c=t;c.i+=b;.75<=c.i&&(c.i=0,c.o=!c.o);c.o&&u(a,16,v(),200,"#fff","center","#333",4)}
class aa{constructor(){this.i=0;this.o=!0;this.g=c2d.getContext("2d");this.l=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.l=h(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.l=h(a.clientX,a.clientY)});c2d.addEventListener("mousedown",()=>!0);c2d.addEventListener("mouseup",()=>!1);c2d.addEventListener("touchstart",()=>{});c2d.addEventListener("touchend",()=>!1);window.addEventListener("resize",()=>p(this));window.addEventListener("orientationchange",()=>
p(this));p(this)}get h(){return this.g.canvas.width}get j(){return this.g.canvas.height}}let t=new aa;function x(a,b=.5,c){var d=y;d.j=a;d.l=b;d.i=0;d.h=!0;d.o=c;d.g="fade-in"===a?1:0}
class ba{constructor(){this.g=0;this.h=!1;this.j=null;this.l=1;this.i=0}update(a){this.h&&(this.i+=a,a=Math.min(this.i/this.l,1),"fade-in"===this.j?this.g=1-a:"fade-out"===this.j&&(this.g=a),1<=a&&(this.h=!1,this.o?.()))}m(a){if(this.h||0!==this.g)a.save(),a.fillStyle=`rgba(0, 0, 0, ${.8*this.g})`,a.fillRect(0,0,t.h,t.j),a.restore()}}
let y=new ba,z=[{C:1,color:"#00FF66"},{C:.75,color:"#00BFFF"},{C:.5,color:"#FFA500"},{C:.25,color:"#FF3333"},{C:0,color:"rgba(255, 0, 0, 0)"}],ca=["#35a3ec","#4480b8a2"],da=["#ff5e49","#881c18"],ea="#200900 #190902 #291403 #311d0c #a05030 #c06440 #e6a67c".split(" "),fa="#201a00 #191502 #291f03 #312e0c #a08230 #c09e40 #e6d37c".split(" "),ha="#200000 #190202 #290303 #310c0c #A03030 #c04040 #e67c7c".split(" ");
function A(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,O:a>>8&255,b:a&255,alpha:b}}function B(a,b=1){let {r:c,O:d,b:e}=A(a,b);return`rgba(${c}, ${d}, ${e}, ${b})`}
function ia(){return C.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var d=Math.max(a,c,b),e=Math.min(a,c,b),f=0,g=0;let l=(d+e)/2;if(d!==e){let n=d-e;g=.5<l?n/(2-d-e):n/(d+e);switch(d){case a:f=(c-b)/n+(c<b?6:0);break;case c:f=(b-a)/n+2;break;case b:f=(a-c)/n+4}f*=60}let {ia:m,pa:k,ja:q}={ia:f,pa:100*g,ja:100*l};a=(m+200*(Math.random()-.5)+360)%360;d=Math.min(100,Math.max(0,q+0*(Math.random()-.5)));
d/=100;c=Math.min(100,Math.max(0,k+10*(Math.random()-.5)))/100*(1-Math.abs(2*d-1));b=c*(1-Math.abs(a/60%2-1));d-=c/2;g=f=e=0;0<=a&&60>a?(e=c,f=b,g=0):60<=a&&120>a?(e=b,f=c,g=0):120<=a&&180>a?(e=0,f=c,g=b):180<=a&&240>a?(e=0,f=b,g=c):240<=a&&300>a?(e=b,f=0,g=c):300<=a&&360>a&&(e=c,f=0,g=b);return`#${Math.round(255*(e+d)).toString(16).padStart(2,"0")}${Math.round(255*(f+d)).toString(16).padStart(2,"0")}${Math.round(255*(g+d)).toString(16).padStart(2,"0")}`})}let C="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function D(a,b,c,d,e){b=ja(b,a,e);return{ka:a,A:b,offsetX:0,offsetY:0,qa:c,ca:d}}
function ja(a=.01,b=C,c){let d=document.createElement("canvas");d.width=128;d.height=128;let e=d.getContext("2d");e.imageSmoothingEnabled=!1;a=Math.floor(16384*a);for(var f=0;f<a;f++){var g=Math.floor(128*Math.random()),l=Math.floor(128*Math.random());e.fillStyle=b[Math.floor(Math.random()*b.length)];e.fillRect(g,l,c,c)}for(let m=0;2>m;m++){c=e;a=128*Math.random();f=128*Math.random();g=64*Math.random()+128/3;l=b;for(let k=-128;128>=k;k+=128)for(let q=-128;128>=q;q+=128){let n=c.createRadialGradient(a+
k,f+q,0,a+k,f+q,g);n.addColorStop(0,B(l[5],.1));n.addColorStop(1,"rgba(0,0,0,0)");c.globalCompositeOperation="screen";c.fillStyle=n;c.beginPath();c.arc(a+k,f+q,g,0,2*Math.PI);c.fill();c.globalCompositeOperation="source-over"}}b=new Image;b.src=d.toDataURL();return b}
class E{constructor(){this.g=[];let a=ia();this.g.push(D(a,.001,12,.2,1));this.g.push(D(a,.002,18,.3,1.2));this.g.push(D(a,.003,30,.4,1.2))}update(a,b={x:0,y:0}){for(let c of this.g)0!==c.A.width&&0!==c.A.height&&(c.offsetY=(c.offsetY+c.qa*a-.5*b.y*c.ca)%c.A.height,0>c.offsetY&&(c.offsetY+=c.A.height),c.offsetX=(c.offsetX-.4*b.x*c.ca)%c.A.width)}m(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var d=this.g[0];a.save();a.fillStyle=d.ka[0];a.fillRect(0,0,b,c);for(let e of this.g)e.A.complete&&
(d=a.createPattern(e.A,"repeat"))&&(a.save(),a.translate(e.offsetX,e.offsetY),a.fillStyle=d,a.fillRect(-e.A.width/4,-e.A.height,b+100,c+e.A.height),a.restore())}}function F(a){var b=G,c=[];b.g.ba?.();b.g=a;b.g.R?.(...c)}class ka{constructor(...a){this.g=la;this.g.R?.(...a)}}let G;class ma{constructor(){this.g=new Map;document.addEventListener("keydown",a=>{this.g.set(a.code,!0)});document.addEventListener("keyup",a=>{this.g.set(a.code,!1)});c2d.addEventListener("click",()=>!0);new DOMPoint}}new ma;
function H(a,b=8,c=6){if(!a.s){a.s=!0;for(let d=0;d<b;d++){let e=240*(Math.random()-.5),f=Math.random()*Math.PI*2;a.l.push({x:a.x+a.width/2,y:a.y+a.height/2,ta:Math.cos(f)*e,ua:Math.sin(f)*e,Y:Math.random()*Math.PI*2,oa:8*(Math.random()-.5),alpha:1,size:c,ra:Math.floor(Math.random()*(a.g.width-c)),sa:Math.floor(Math.random()*(a.g.height-c))})}}}function I(a,b){for(let c of a.l)c.x+=c.ta*b,c.y+=c.ua*b,c.Y+=c.oa*b,c.alpha-=1.5*b;a.l=a.l.filter(c=>0<c.alpha)}
function J(a,b){for(let c of a.l)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.Y),b.drawImage(a.g,c.ra,c.sa,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function K(a){return a.s&&0===a.l.length}class L{constructor(a,b,c,d=0,e=0){this.l=[];this.s=!1;this.g=a;this.x=b;this.y=c;this.width=d;this.height=e;this.active=!0}W(){return 0>this.x+this.width||this.x>t.h||0>this.y+this.height||this.y>t.j}}
function M(a){if(0>=a.h&&a.I){var b=a.I.get();if(b){var c=0>=a.D.y?a.y:a.y+a.height;b.K=a.K;b.speed=a.da;var d=a.D.x,e=a.D.y;b.x=a.x+a.width/2;b.y=c;b.Z=d;b.$=e;b.active=!0;a.h=a.F}}}function N(a,b){let c=Math.max(-2,Math.min(2,3*a.T.x)),d=a.width/2;for(let e=0;e<a.width;e++)b.drawImage(a.g,e,0,1,a.height,a.x+e,a.y+Math.floor((e-d)/d*c),1,a.height)}
class O extends L{constructor(a,b,c,d,e,f,g,l){super(a,e,f,g,l);this.G={x:0,y:0};this.T={x:0,y:0};this.h=0;this.F=.1;this.D={x:0,y:-1};this.g=a;this.I=b;this.K=c;this.da=d}}let na="#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" ");
class oa extends O{constructor(a,b){super(a,b,10,100,72,256-a.height,a.width,a.height);this.V=75;this.L=50;this.i="#00bfff7c";this.j=10;this.v=100;this.F=.6;this.g=a}update(a,b,c){if(this.s)I(this,a);else{b-=this.x+this.width/2;c-=this.y+this.height/2;var d=Math.hypot(b,c);2<d&&(this.x+=b/d*this.V*a,this.y+=c/d*this.L*a);this.T={x:this.x-this.G.x,y:this.y-this.G.y};this.G={x:this.x,y:this.y};a:{b=this.v/100;b=Math.max(0,Math.min(1,b));for(var e=0;e<z.length-1;e++)if(c=z[e],d=z[e+1],b<=c.C&&b>=d.C){b=
(b-d.C)/(c.C-d.C);c=A(c.color);let g=A(d.color);d=c.alpha+(g.alpha-c.alpha)*(1-b);e=Math.round(c.O+(g.O-c.O)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+f.toString(16).padStart(2,"0");b=B(b,d);break a}b=z[z.length-1].color}this.i=b;0<this.h&&(this.h-=a);M(this)}}m(a){if(this.s)J(this,a);else{a.save();a.shadowColor=this.i;a.shadowBlur=this.j;let b=this.x+this.width/2,c=this.y+this.height+-2,d=a.createLinearGradient(b,
c,b,c+20);d.addColorStop(0,"rgba(0, 180, 255, 0.9)");d.addColorStop(.4,"rgba(255, 255, 255, 0.8)");d.addColorStop(1,"rgba(255, 140, 0, 0)");let e=6+3*Math.random();a.fillStyle=d;a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+e);a.lineTo(b+1,c);a.closePath();a.fill();N(this,a);a.restore()}}S(a){this.v-=a;0>=this.v&&H(this,40)}}
class P extends L{constructor(a){super(a,0,0);this.active=!1;this.speed=this.K=1;this.$=this.Z=0;this.g=a}m(a){this.s?J(this,a):a.drawImage(this.g,this.x,this.y)}update(a){this.s?(I(this,a),K(this)&&(this.active=this.s=!1)):(this.x+=this.Z*this.speed*a,this.y+=this.$*this.speed*a)}}
class pa extends O{constructor(a,b,c){super(a,b,12,50,c,-15-100*Math.random(),a.width,a.height);this.U="#ffb3007c";this.j=12;this.L=this.v=20;this.i=0;this.na=.5;this.F=3.5;this.D={x:0,y:1};this.o=0;a=document.createElement("canvas");a.width=this.g.width+4*this.j;a.height=this.g.height+4*this.j;b=a.getContext("2d");if(!b)throw Error("Failed to get 2D context");b.shadowColor=this.U;b.shadowBlur=this.j;b.drawImage(this.g,2*this.j,2*this.j);this.ea=a;this.i=60*(Math.random()-.5);this.F=3.5+.3*(2*Math.random()-
1);this.h=Math.random()*this.F}update(a){if(this.s)I(this,a);else{let b=this.x;this.y+=Math.random()*this.L*a;this.x+=this.i*a;this.o-=a;0>=this.o&&(.5>Math.random()&&(this.i*=-1),this.o=1+2*Math.random());0>this.x&&(this.x=0,this.i*=-1);this.x+this.width>t.h&&(this.x=t.h-this.width,this.i*=-1);this.T.x=(this.x-b)/a;0<this.h&&(this.h-=a);M(this)}}m(a){this.s?J(this,a):(a.save(),a.drawImage(this.ea,this.x-2*this.j,this.y-2*this.j),a.drawImage(this.g,this.x,this.y),N(this,a),a.restore())}S(a){this.v-=
a;0>=this.v&&H(this)}W(){return 0>this.x+this.width||this.x>t.h||this.y>t.j}}function Q(a,b){a.J=b;a.h=2;a.g.B=[];b=4+2*(a.J-1);let c=[a.g.M.ga,a.g.M.aa,a.g.M.fa];for(let e=0;e<b;e++){var d=new pa(c[Math.floor(Math.random()*c.length)],a.g.N,Math.random()*(t.h-a.g.M.aa.width));a.g.B.push(d)}}
class qa{constructor(a){this.J=1;this.h=0;this.g=a}update(a){0===this.g.B.length&&(Q(this,this.J+1),this.g.background=new E);0<this.h&&(this.h-=a)}m(){if(0<this.h){let a=Math.min(this.h/.5,1);t.g.save();t.g.globalAlpha=a;r(`Level ${this.J}`,24,t.h/2,60);t.g.restore()}}}
function R(a,b,c){for(let d=a.length-1;0<=d;d--){let e=a[d];if(e.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&e&&g&&e.x<g.x+(g.width||0)&&e.x+(e.width||0)>g.x&&e.y<g.y+(g.height||0)&&e.y+(e.height||0)>g.y){c(e,g);break}}}}class ra{constructor(a){this.image=a}m(a,b,c,d,e,f,g,l=0){a.save();l&1&&(a.translate(b+f,c),a.scale(-1,1),c=b=0);l&2&&(a.translate(b,c+g),a.scale(1,-1),c=0);a.drawImage(this.image,d,e,f,g,b,c,f,g);a.restore()}}
function S(a,b,c,d,e,f,g,l,m=0){b.m(a.g,c,d,e,f,g,l,m)}class T{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}
async function sa(){let a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABYCAMAAAByMgEaAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGlQTFRFAAAASUlJLCwsQUFBOjo6NDQ0ZGRkFBQUJCQkT09PHR0dXl5eVlZWa2trcnJyeXl5lpaWjo6OhYWFyMjIBwcHpqam3NzcDAwM////HR0dCwsLVFRUCAgIubm51NTU1NTUXl5eISEhZWVlwlG8LgAAACN0Uk5TAP////7///////////////////////9P/44d7nH/X6mw446feByIAAADC0lEQVR4nO1Xa3faMAy1JL/fCYXSbazb/v+PnAKEwUpXNdlH7jkNsU90LV3JsqsUqDs44L3Zu3jNr28nExknJfiuv/8105WiGoxSX8Ve3KDw2pYyE2SxFzfYeYUVKgaFciGukayFwTb0Vpsl9gC50LDfodZETwsIEDQEu63ZGDRLCJRxWIZEezALNYg65gQ6oJfXwg0oqqdgUKulWSA2YwLPei4jUPrNyyexSPq10CrcjMfpET9BMKh2PfTnn42YYLMdrkbHFjPt5UJSgsOhfbkM+uT71+3kwt1udZ8gXd615XXTzvJW1FqYSejbcCmamtDkvrHBIWRhDC2VrOcYagZTeu8BjQ0gK4pOFen57E0Gyqn2fdIZAGQujLpG8+30zg3ZB0qHTdbaRJTJ2DG5uX0FP/3ZsVnPEqJIxdCSdfhyEiFOSTRlLBm5HQgJLFrn/VkEToezKYAm9sX/kBBQ8tZFfxaBZSNgGRzRcSCACT45F92lGFkHw30JhFs7lJyNd16fYzDHMKbciJbnHGxDiegInv/4ND280F71DqwBE3yTWtziZxt1iMFpeLlxQNpRwOpqxgAOjJk1PzeH8K7RNRLhYIbCWfNz3WI9yVhkVQQ46F6ZwM0ElT0pwQnTAGQqjdY4inj2Wae0seSD7GSyQY/Q+E6kI+bTFGU4VDvNyAggJWvQaW/mvoZ52GzBy85W7h9kLWHEF3MMwR034+ZARpbGMH0PnnHq5z/44UvdNT2dsigjKY57z/m9u2GkNmz2sEcCkO2HFPF5Jqg2cF76tqONdDzlBdDqRf2cvQnkn6DtQiZnAGUXtWmZOVjDzUn9Co34phJNlGkw2KtBYBtnMh1viUVkn9v1tmnXiwpqMXEi4SbSz9wLGBV6NUtvQxPGMqZqP/7uXbSh1JxXEJSmbRZfJO4gffzJv7Em/GusCeKIvtK+yWr2XVBbeDG/OEDrtByhrMrmGHJZU4sNqrUrQhgn+7I8Cy3XwgTLNzSvzyeTXh4C/5tKOevlpQwhTLt5TRYeeOCBBx74X/gN1wEaI0xzsV0AAAAASUVORK5CYII=";let b=
new ra(a);return new Promise(c=>{a.onload=async()=>{c(b)}})}async function ta(a){let b=new T(27,30);S(b,a,7,0,0,15,13,30);S(b,a,1,18,0,45,6,9);S(b,a,19,18,0,45,6,9,1);return this.g(b,na)}async function ua(a){let b=new T(14,14);S(b,a,0,0,16,0,14,14);return this.g(b,ea)}async function va(a){let b=new T(16,16);S(b,a,0,0,16,15,16,16);return this.g(b,fa)}async function wa(a){let b=new T(16,16);S(b,a,0,0,16,32,16,16);return this.g(b,ha)}
async function U(a,b,c=0){let d=new T(3,3);S(d,a,0,0,0,0,3,3,c);return this.g(d,b)}async function xa(){var a=new ya;let b=await sa();a.ma=await ta(b);a.ga=await ua(b);a.aa=await va(b);a.fa=await wa(b);a.la=await U(b,ca,2);a.ha=await U(b,da);return a}class ya{}function V(a,b){for(let c of a.H)c.active&&(c.update(b),c.W()&&(c.active=!1))}function W(a,b){for(let c of a.H)c.active&&c.m(b)}
class X{constructor(a){this.H=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.H.push(c)}}get(){for(let a of this.H)if(!a.active)return a.active=!0,a.s=!1,a;return null}}function za(a){a.j=[...a.i].sort(()=>Math.random()-.5).slice(0,3)}
class Aa{constructor(a){this.isActive=!1;this.j=[];this.h=0;this.i=[];this.g=a;this.i=[{name:"Increase Fire Rate",description:"Shoot 20% faster.",apply:()=>{this.g.u.F*=.8}},{name:"Extra Health",description:"Gain +2 health.",apply:()=>{this.g.u.v+=2}},{name:"Speed Boost",description:"Move 15% faster.",apply:()=>{this.g.u.V*=1.15;this.g.u.L*=1.15}}]}start(){this.isActive=!0;this.h=0;za(this)}update(){}m(a){this.isActive&&(a.save(),a.fillStyle="rgba(0, 0, 0, 0.7)",a.fillRect(0,0,a.canvas.width,a.canvas.height),
u("Choose an upgrade!",12,v(),20),this.j.forEach((b,c)=>{let d=40+50*c;a.fillStyle=c===this.h?"#44aaff":"#222";a.fillRect(a.canvas.width/2-50,d,100,30);a.strokeStyle="white";a.lineWidth=2;a.strokeRect(a.canvas.width/2-50,d,100,30);a.fillStyle="white";a.font="9px Arial";a.textAlign="left";a.fillText(b.name,a.canvas.width/2-40,d+10);a.font="9px Arial";a.fillText(b.description,a.canvas.width/2-40,d+20)}),a.restore())}}
async function Ba(){var a=new Ca;a.M=await xa();let {ma:b,ha:c,la:d}=a.M;a.g=new X(()=>new P(d));a.N=new X(()=>new P(c));a.u=new oa(b,a.g);a.P=new qa(a);Q(a.P,1);return a}
class Ca{constructor(){this.B=[];this.background=new E;this.h=new Aa(this)}update(a,b){let {u:c,background:d,P:e}=this;if(!this.h.isActive){d.update(a,c.T);c.update(a,b.x,b.y);for(let f of this.B)f.update(a);this.B=this.B.filter(f=>!f.W()&&!K(f));V(this.g,a);V(this.N,a);R(this.g.H.filter(f=>f.active&&!f.s),this.B.filter(f=>!f.s),(f,g)=>{g.S(f.K);H(f,6,1)});R([this.u],this.B,(f,g)=>{f.S(g.na)});R([this.u],this.N.H.filter(f=>f.active&&!f.s),(f,g)=>{f.S(g.K);H(g,6,1)});e.update(a)}}m(a){this.h.isActive?
this.h.m(a):(this.background.m(a),this.B.forEach(b=>b.m(a)),this.u.m(a),this.P.m(),W(this.g,a),W(this.N,a))}}class Da{constructor(a){this.g=a}R(){c2d.addEventListener("click",()=>{window.location.reload()})}X(a){r("Game Over",24,v(),50);r("You made it",18,v(),100);r("to level",18,v(),115);r(this.g.toString(),24,v(),150);w("Back to Menu",a)}}let Ea=440*Math.pow(Math.pow(2,1/12),-9),Fa=/^[0-9.]+$/,Ga=/\s+/,Ha=/(\d+)/,Y={};
"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{Y[c]=b})});function Ia(a){return Fa.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}
class Ja{constructor(a){let [b,c]=a.split(Ga);a=b.split(Ha);this.frequency=Ea*Math.pow(Math.pow(2,1/12),Y[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=Ia(c)||0}}function Ka(a){let b=a.o;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let d=a.i.createBiquadFilter();d.type="peaking";d.frequency.value=c;b.connect(d);b=d;a.U.push(d)});b.connect(a.I);b.connect(a.D)}function La(a,...b){b.forEach(c=>{a.h.push(c instanceof Ja?c:new Ja(c))})}
function Z(a,b=a.i.currentTime){a.createOscillator();a.g.start(b);a.h.forEach((c,d)=>{c=b;let e=60/220*a.h[d].duration,f=e*(1-(a.l||1E-11));a.g?.frequency.setValueAtTime(a.h[d].frequency,c);if(a.j&&a.h[d].frequency){let g=a.h[d<a.h.length-1?d+1:0];a.g?.frequency.setValueAtTime(a.h[d].frequency,c+(f-Math.min(f,60/220*a.j)));a.g?.frequency.linearRampToValueAtTime(g.frequency,c+f)}a.g?.frequency.setValueAtTime(0,c+f);b=c+e});a.g.stop(b);a.g.onended=()=>Z(a,b)}
class Ma{constructor(a,b){this.h=[];this.l=this.j=0;this.G="square";this.g=null;this.U=[];this.i=a;this.o=this.i.createGain();this.D=this.i.createGain();this.I=this.i.createGain();Ka(this);b&&La(this,...b)}createOscillator(){this.stop();this.g=this.i.createOscillator();this.g.type=this.G;this.g.connect(this.o)}connect(a){this.D.connect(a);this.I.connect(a)}stop(){this.g&&(this.g.onended=null,this.g.stop(),this.g.frequency.cancelScheduledValues(0),this.g=null)}}
function Na(a){if(!a.j){var b=a.g.currentTime;Z(a.l,b);Z(a.h,b);a.j=!0}}
class Oa{constructor(){this.volume=.15;this.j=!1;this.g=new AudioContext;this.o=this.g.createGain();this.i=this.g.createDynamicsCompressor();this.o.connect(this.g.destination);this.o.gain.value=this.volume;this.i.ratio.value=4;this.i.threshold.value=-12;this.i.connect(this.o);this.l=new Ma(this.g,"F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;B4 q;F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;F#4 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;- q;C5 q;E5 q;C5 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;A5 q;G5 q;F5 q;D5 q".split(";"));this.l.l=
.3;this.l.j=.02;this.h=new Ma(this.g,"F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h".split(";"));this.h.l=.1;this.h.j=.2;this.h.G="sawtooth";this.l.connect(this.i);this.h.connect(this.i)}stop(){this.l.stop();this.h.stop();this.j=!1}}
function Pa(a){Na(a.h);a.i.classList.remove("hide");a.i.textContent=a.h.j?"\ud83d\udd08":"\ud83d\udd07";a.i.addEventListener("click",()=>{a.h.j?(a.h.stop(),a.i.textContent="\ud83d\udd07"):(Na(a.h),a.i.textContent="\ud83d\udd08")})}function Qa(a){K(a.g.u)&&(y.h||x("fade-out",.5,()=>{F(new Da(a.g.P.J));x("fade-in",.5)}))}
class Ra{constructor(){this.j=t.g;this.i=document.querySelector(".mute-button");this.h=new Oa}async R(){Pa(this);this.g=await Ba();x("fade-in",1)}X(a){this.g&&(this.g.update(a,t.l),this.g.m(this.j),Qa(this))}ba(){this.i.classList.add("hide");this.h.stop()}}let Sa=new Ra;
class Ta{g(){x("fade-out",.5,()=>{F(Sa)})}R(){c2d.addEventListener("click",this.g)}X(a){r("X-Type",24,v(),60);u("Super",10,v()-40,44,"#fff","center","#ee2626",2,Math.PI/-20);w("Start Game",a)}ba(){c2d.removeEventListener("click",this.g)}}let la=new Ta;G=new ka(...[]);let Ua=performance.now(),Va=new E;(()=>{function a(b){let c=(b-Ua)/1E3;Ua=b;t.g.clearRect(0,0,t.h,t.j);Va.update(c);Va.m(t.g);G.g.X(c);y.update(c);y.m(t.g);requestAnimationFrame(a)}requestAnimationFrame(a)})();

let k=[];function aa(){var a=q.g.canvas;a.addEventListener("click",b=>{let c=a.getBoundingClientRect(),d=a.width/c.width*(b.clientX-c.left);b=a.height/c.height*(b.clientY-c.top);for(let e of k)d>=e.x&&d<=e.x+e.w&&b>=e.y&&b<=e.y+e.ba&&e.ja()})}function ba(a,b,c){k.push({x:5,y:a,w:b,ba:45,ja:c})}function r(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(144/c.width*(a-c.left),256/c.height*(b-c.top))}
function t(a){let b,c;.5625<window.innerWidth/window.innerHeight?(c=window.innerHeight,b=.5625*c):(b=window.innerWidth,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}
function u(a,b,c,d){let e=q.g;e.save();e.font=`bold ${b-1}px "Courier New"`;e.strokeStyle="#0a0601";e.fillStyle="#0a0601";e.textAlign="center";e.strokeText(a,c,d+2);e.fillText(a,c,d+2);e.font=`bold ${b}px "Courier New"`;b=e.createLinearGradient(0,d-9,0,d);b.addColorStop(0,"#fff4c1");b.addColorStop(.25,"#ffd84a");b.addColorStop(.5,"#6a2c00");b.addColorStop(.75,"#b65a00");b.addColorStop(1,"#ff9d00");e.fillStyle=b;e.fillText(a,c,d);e.restore()}
function v(a,b,c,d,e="white",f="center",g,n,p){let h=q.g;h.save();h.font=`${b}px "Courier New", monospace`;h.textAlign=f;h.fillStyle=e;g&&(h.strokeStyle=g);n&&(h.lineWidth=n);p?(h.translate(c,d),h.rotate(p),g&&h.strokeText(a,0,0),h.fillText(a,0,0)):(g&&h.strokeText(a,c,d),h.fillText(a,c,d));h.restore()}
function w(a,b,c=200){var d=q;d.l+=b;.75<=d.l&&(d.l=0,d.B=!d.B);d.B&&(b=d.g,b.save(),b.font='bold 16px "Courier New", serif',b.textAlign="center",b.textBaseline="middle",b.strokeStyle="#161616ff",b.strokeText(a,b.canvas.width/2,c+1),d=b.createLinearGradient(0,c-10,0,c),d.addColorStop(0,"#ffffff"),d.addColorStop(.15,"#dcdcdc"),d.addColorStop(.3,"#a0a0a0"),d.addColorStop(.45,"#f8f8f8"),d.addColorStop(.6,"#7a7a7a"),d.addColorStop(.8,"#c8c8c8"),d.addColorStop(1,"#5a5a5a"),b.fillStyle=d,b.fillText(a,b.canvas.width/
2,c),b.restore())}function x(){return q.g.canvas.width/2}
class ca{constructor(){this.l=0;this.B=!0;this.g=c2d.getContext("2d");this.o=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.o=r(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.o=r(a.clientX,a.clientY)});c2d.addEventListener("mousedown",()=>!0);c2d.addEventListener("mouseup",()=>!1);c2d.addEventListener("touchstart",()=>{});c2d.addEventListener("touchend",()=>!1);window.addEventListener("resize",()=>t(this));window.addEventListener("orientationchange",()=>
t(this));t(this)}get i(){return this.g.canvas.width}get j(){return this.g.canvas.height}}let q=new ca;function y(a,b=.5,c){var d=z;d.l=a;d.o=b;d.j=0;d.i=!0;d.B=c;d.g="fade-in"===a?1:0}
class da{constructor(){this.g=0;this.i=!1;this.l=null;this.o=1;this.j=0}update(a){this.i&&(this.j+=a,a=Math.min(this.j/this.o,1),"fade-in"===this.l?this.g=1-a:"fade-out"===this.l&&(this.g=a),1<=a&&(this.i=!1,this.B?.()))}u(a){if(this.i||0!==this.g)a.save(),a.fillStyle=`rgba(0, 0, 0, ${.8*this.g})`,a.fillRect(0,0,q.i,q.j),a.restore()}}
let z=new da,A=[{I:1,color:"#00FF66"},{I:.75,color:"#00BFFF"},{I:.5,color:"#FFA500"},{I:.25,color:"#FF3333"},{I:0,color:"rgba(255, 0, 0, 0)"}],D={blue:["#35a3ec","#4480b8"],green:["#35ec5d","#44b867"],Ba:["#a935ec","#a144b8"],za:["#ec35be","#b84488"],ya:["#eca335","#b88244"]},ea="#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" "),fa="#000000 #1b1200 #271701 #3a2200 #241700 #6b572f #805800 #8b753f #b19452 #f8ab5e".split(" "),ha=["#ff5e49","#881c18"],ia="#200900 #190902 #291403 #311d0c #a05030 #c06440 #e6a67c".split(" "),
ja="#201a00 #191502 #291f03 #312e0c #a08230 #c09e40 #e6d37c".split(" "),ka="#200000 #190202 #290303 #310c0c #A03030 #c04040 #e67c7c".split(" "),la="#181a17 #17221b #1e331e #5f745f #193d19 #4f7550 #85b385 #7aa37a #a3c4a3 #c0e0c0".split(" ");function E(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,S:a>>8&255,b:a&255,alpha:b}}function F(a,b=1){let {r:c,S:d,b:e}=E(a,b);return`rgba(${c}, ${d}, ${e}, ${b})`}
function ma(){return G.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var d=Math.max(a,c,b),e=Math.min(a,c,b),f=0,g=0;let n=(d+e)/2;if(d!==e){let m=d-e;g=.5<n?m/(2-d-e):m/(d+e);switch(d){case a:f=(c-b)/m+(c<b?6:0);break;case c:f=(b-a)/m+2;break;case b:f=(a-c)/m+4}f*=60}let {ba:p,pa:h,la:l}={ba:f,pa:100*g,la:100*n};a=(p+200*(Math.random()-.5)+360)%360;d=Math.min(100,Math.max(0,l+0*(Math.random()-.5)));
d/=100;c=Math.min(100,Math.max(0,h+10*(Math.random()-.5)))/100*(1-Math.abs(2*d-1));b=c*(1-Math.abs(a/60%2-1));d-=c/2;g=f=e=0;0<=a&&60>a?(e=c,f=b,g=0):60<=a&&120>a?(e=b,f=c,g=0):120<=a&&180>a?(e=0,f=c,g=b):180<=a&&240>a?(e=0,f=b,g=c):240<=a&&300>a?(e=b,f=0,g=c):300<=a&&360>a&&(e=c,f=0,g=b);return`#${Math.round(255*(e+d)).toString(16).padStart(2,"0")}${Math.round(255*(f+d)).toString(16).padStart(2,"0")}${Math.round(255*(g+d)).toString(16).padStart(2,"0")}`})}let G="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function H(a,b,c,d,e){b=na(b,a,e);return{ma:a,G:b,offsetX:0,offsetY:0,qa:c,ia:d}}
function na(a=.01,b=G,c){let d=document.createElement("canvas");d.width=128;d.height=128;let e=d.getContext("2d");e.imageSmoothingEnabled=!1;a=Math.floor(16384*a);for(var f=0;f<a;f++){var g=Math.floor(128*Math.random()),n=Math.floor(128*Math.random());e.fillStyle=b[Math.floor(Math.random()*b.length)];e.fillRect(g,n,c,c)}for(let p=0;2>p;p++){c=e;a=128*Math.random();f=128*Math.random();g=64*Math.random()+128/3;n=b;for(let h=-128;128>=h;h+=128)for(let l=-128;128>=l;l+=128){let m=c.createRadialGradient(a+
h,f+l,0,a+h,f+l,g);m.addColorStop(0,F(n[5],.1));m.addColorStop(1,"rgba(0,0,0,0)");c.globalCompositeOperation="screen";c.fillStyle=m;c.beginPath();c.arc(a+h,f+l,g,0,2*Math.PI);c.fill();c.globalCompositeOperation="source-over"}}b=new Image;b.src=d.toDataURL();return b}
class I{constructor(){this.g=[];let a=ma();this.g.push(H(a,.001,12,.2,1));this.g.push(H(a,.002,18,.3,1.2));this.g.push(H(a,.003,30,.4,1.2))}update(a,b={x:0,y:0}){for(let c of this.g)0!==c.G.width&&0!==c.G.height&&(c.offsetY=(c.offsetY+c.qa*a-.5*b.y*c.ia)%c.G.height,0>c.offsetY&&(c.offsetY+=c.G.height),c.offsetX=(c.offsetX-.4*b.x*c.ia)%c.G.width)}u(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var d=this.g[0];a.save();a.fillStyle=d.ma[0];a.fillRect(0,0,b,c);for(let e of this.g)e.G.complete&&
(d=a.createPattern(e.G,"repeat"))&&(a.save(),a.translate(e.offsetX,e.offsetY),a.fillStyle=d,a.fillRect(-e.G.width/4,-e.G.height,b+100,c+e.G.height),a.restore())}}function J(a){var b=K,c=[];b.g.ha?.();b.g=a;b.g.Z?.(...c)}class oa{constructor(...a){this.g=pa;this.g.Z?.(...a)}}let K;class qa{constructor(){this.g=new Map;document.addEventListener("keydown",a=>{this.g.set(a.code,!0)});document.addEventListener("keyup",a=>{this.g.set(a.code,!1)});c2d.addEventListener("click",()=>!0);new DOMPoint}}new qa;
function L(a,b=8,c=6){if(!a.D){a.D=!0;for(let d=0;d<b;d++){let e=240*(Math.random()-.5),f=Math.random()*Math.PI*2;a.g.push({x:a.x+a.width/2,y:a.y+a.height/2,ua:Math.cos(f)*e,va:Math.sin(f)*e,da:Math.random()*Math.PI*2,oa:8*(Math.random()-.5),alpha:1,size:c,ra:Math.floor(Math.random()*(a.J.width-c)),sa:Math.floor(Math.random()*(a.J.height-c))})}}}function M(a,b){for(let c of a.g)c.x+=c.ua*b,c.y+=c.va*b,c.da+=c.oa*b,c.alpha-=1.5*b;a.g=a.g.filter(c=>0<c.alpha)}
function N(a,b){for(let c of a.g)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.da),b.drawImage(a.J,c.ra,c.sa,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function O(a){return a.D&&0===a.g.length}function P(a){return 0>a.x+a.width||a.x>q.i||0>a.y+a.height||a.y>q.j}class Q{constructor(a,b,c,d=0,e=0){this.g=[];this.D=!1;this.J=a;this.x=b;this.y=c;this.width=d;this.height=e;this.active=!0}}
class ra extends Q{constructor(a,b,c,d,e,f){super(b,d,120,e,f);this.l={x:0,y:0};this.ea={x:0,y:0};this.R=0;this.active=!0;this.i=0;this.K=.1;this.o={x:0,y:-1};this.W=a;this.J=b;this.B=c}}function R(a,b){a.m-=b;0>=a.m&&L(a,40)}
class sa extends ra{constructor(a,b,c){super(a,b,c,x()-b.width/2,b.width,b.height);this.active=!1;this.R=-2;this.X="blue";this.P="#00bfff7c";this.aa=10;this.M=75;this.N=50;this.m=this.v=100;this.K=.6;this.A=10;this.H=100;this.j=this.C=this.F=0;this.J=b}update(a,b,c){if(this.D)M(this,a);else{0<this.C&&this.m<this.v&&(this.j+=a,5<=this.j&&(this.m+=this.C,this.m>this.v&&(this.m=this.v),this.j=0));b-=this.x+this.width/2;c=c-(this.y+this.height/2)-22;var d=Math.hypot(b,c);this.active&&2<d&&(this.x+=b/
d*this.M*a,this.y+=c/d*this.N*a);this.ea={x:this.x-this.l.x,y:this.y-this.l.y};this.l={x:this.x,y:this.y};a:{b=this.m/this.v;b=Math.max(0,Math.min(1,b));for(var e=0;e<A.length-1;e++)if(c=A[e],d=A[e+1],b<=c.I&&b>=d.I){b=(b-d.I)/(c.I-d.I);c=E(c.color);let g=E(d.color);d=c.alpha+(g.alpha-c.alpha)*(1-b);e=Math.round(c.S+(g.S-c.S)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+f.toString(16).padStart(2,"0");
b=F(b,d);break a}b=A[A.length-1].color}this.P=b;0<this.i&&(this.i-=a);b=this.A;c=this.H;d=this.X;this.active&&0>=this.i&&this.B&&(a=this.B.get())&&(d&&(a.J=S(this.W.V,d)),d=0>=this.o.y?this.y:this.y+this.height,a.A=b,a.speed=c,b=d,c=this.o.x,d=this.o.y,a.x=this.x+this.width/2+this.R,a.y=b,a.fa=c,a.ga=d,a.active=!0,this.i=this.K)}}u(a){if(this.D)N(this,a);else{a.save();a.shadowColor=this.P;a.shadowBlur=this.aa;var b=this.x+this.width/2,c=this.y+this.height+-2,d=a.createLinearGradient(b,c,b,c+20);d.addColorStop(0,
"rgba(0, 180, 255, 0.9)");d.addColorStop(.4,"rgba(255, 255, 255, 0.8)");d.addColorStop(1,"rgba(255, 140, 0, 0)");let e=6+3*Math.random();a.fillStyle=d;a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+e);a.lineTo(b+1,c);a.closePath();a.fill();b=Math.max(-3,Math.min(3,3*this.ea.x));c=this.width/2;for(d=0;d<this.width;d++)a.drawImage(this.J,d,0,1,this.height,this.x+d,this.y+Math.floor((d-c)/c*b),1,this.height);a.restore()}}}
class T extends Q{constructor(a){super(a,0,0);this.active=!1;this.speed=this.A=1;this.ga=this.fa=0;this.J=a}u(a){this.D?N(this,a):a.drawImage(this.J,this.x,this.y)}update(a){this.D?(M(this,a),O(this)&&(this.active=this.D=!1)):(this.x+=this.fa*this.speed*a,this.y+=this.ga*this.speed*a)}}
function U(a,b,c){for(let d=a.length-1;0<=d;d--){let e=a[d];if(e.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&e&&g&&e.x<g.x+(g.width||0)&&e.x+(e.width||0)>g.x&&e.y<g.y+(g.height||0)&&e.y+(e.height||0)>g.y){c(e,g);break}}}}class ta{constructor(a){this.image=a}u(a,b,c,d,e,f,g,n=0){a.save();n&1&&(a.translate(b+f,c),a.scale(-1,1),c=b=0);n&2&&(a.translate(b,c+g),a.scale(1,-1),c=0);a.drawImage(this.image,d,e,f,g,b,c,f,g);a.restore()}}
function V(a,b,c,d,e,f,g,n,p=0){b.u(a.g,c,d,e,f,g,n,p)}class W{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}function ua(a,b){return new Promise((c,d)=>{a.complete&&0!==a.naturalWidth?c(X(a,b)):(a.onload=()=>{c(X(a,b))},a.onerror=d)})}
function X(a,b){let c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.width;c.height=a.height;d.drawImage(a,0,0);a=d.getImageData(0,0,a.width,a.height);let e=a.data;for(let f=0;f<e.length;f+=4){if(0===e[f+3])continue;let g=E(b[Math.min(b.length-1,Math.floor(e[f]/(256/b.length)))]||"#000000");e[f]=g.r;e[f+1]=g.S;e[f+2]=g.b}d.putImageData(a,0,0);b=new Image;b.src=c.toDataURL();return b}
async function va(){let a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABYBAMAAAC3wuwbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAB5QTFRFAAAAICAgNjY2Tk5OZmZmhoaGrq6u3t7eDAwMFBQUTJzkDgAAAAp0Uk5TAP////7///T+cjOS5s4AAAPzSURBVHichZbNU9tGFMCfvkDctDIw6k27KyfKzdqVO3CzJZm4NwM2cASSJjlSnBmultSUPdLO9P/trgytijbKm/FK9vv5fex7eiuw4F+5BZ2s717ubOLpgPsXYGHmoaUjXv7v2TS0tDa2sutFKTXDHgvFeIazHoCnwwdC4u8DlKYfWR9g+rNsTXpcGDhlzN/0WPBqEvZlYYYW8aweAJTO7NFDj/sfiflcIgdAXwrH2V6l1rjWATu/NhdpZwRZD3AD1jUMtMDHJpIM3meg3evxB/WrndHPecV1wDJvAB6tzkl+pAHOs2O5cpbOvlLONMDZ9J1cM8xO1gRTHXCkXCSQzJZ+SLp6azlXFhCYsxyDDpjOEahC/p4zDPtdwJTAkwLoABPQpGkmU9QUKZFNpSt6yjFSQYSyW840OcBF6g+OG1PfKfcqmdfHOsWzGCs6qBpAxmdogDQa8pqM5N2i6YmOZMNhVvkSMCcm2GEX4AfPgB3aiaMDovGzheIrZhogH46ZjxTAP2a+Js88LYjvT+QdvfyANEFyUjD/r5HMMLq8xRpgZOYIyYbPYf/9GQEdMsUqtKvV8HJ9T3UtN32ngIJFF7dTorMQPqnYc1xfckw1HSVLqIAI2WPi+bo8ls1qeS6Vz9Wkq7fOm4uz3aOwo5+M2IsnveRLXVztCJZFP7AqeD8wi34AjF59txBCzRhxMELqOZu8jgnU2SGXP+TnZJtau1UdtpFruYHt6NuOL6cFMCMAcNEarpuvd3cvVp/F3FTxBsoIGyNAKIBdV3loPZHmoooRKvHhG5jKaOVZpzxE/wEGVEjJ7SGU6FEI2JE/nhdtACv9IFSAEP6RjM/heRsogy+oFnCoXBDCvykD/7NQHtZIXMGh+1laCoQDTtoGYCGQQEHg7Ow8qCzkFkgD7RG/EVJfIsPYefhNZWFAmhetLMB0hQiCemGfvpUmNnIm8Iy3p6stYxdisIEDXwLqGOR81K6FsS+JUlbRuHq8QUEFr8UwxcWnL8o5U1sZdgDzl+byd6gOa91zZvKNXPcyDw4kY950gerYQJ4dh9uBt77uxBCQgnMqvG0v7b55DbhBeTJmSVkvwBSiZvcdANU/cwkIAD+NCs0byZ9RxveTwAU3IrIKm26Uw3PEE8+V+TzSYnbXAaooQgzFEsAiSuaTDkDfxugbQsrCLOVF1wVlgxz7iQJ4oQN8xjmjGBZu6uMB686GisyzGiOIY5oyXg87gOHPgzrxwD0lPonxogtUKWaxB0Y8IwyddgeTGxBE1Dlp+bIfNC+Ye8FQ8PIJBpQTon3fMOQ+yP+Np35a5D9pABdR7MHe+ExZ0L7TVKrT7E85X81WB94/wFKwFTwzPFUAAAAASUVORK5CYII=";let b=
new ta(a);return new Promise(c=>{a.onload=async()=>{c(b)}})}async function wa(a){let b=new W(27,30);V(b,a,7,0,0,15,13,30);V(b,a,1,18,0,45,6,9);V(b,a,19,18,0,45,6,9,1);return Y(b,ea)}async function Y(a,b){let c=new Image;c.src=a.canvas.toDataURL();a=await ua(c,b);await a.decode();return a}async function xa(a){let b=new W(14,14);V(b,a,0,0,16,0,14,14);return Y(b,ia)}async function ya(a){let b=new W(16,16);V(b,a,0,0,16,15,16,16);return Y(b,ja)}
async function za(a){let b=new W(16,16);V(b,a,0,0,16,32,16,16);return Y(b,ka)}async function Aa(a,b){let c=new W(3,3);V(c,a,0,0,0,0,3,3,0);return Y(c,b)}async function Ba(a){let b=new W(18,21);V(b,a,0,0,29,52,18,16);V(b,a,1,16,47,84,16,5);return Y(b,fa)}async function Ca(a){let b=new W(17,21);V(b,a,0,0,47,68,17,16);V(b,a,1,16,47,84,16,5);return Y(b,la)}function S(a,b="blue"){return a.i[b]??a.i.blue}async function Da(a){let b=Object.keys(D);for(let c of b)a.i[c]=await Aa(a.g,D[c])}
async function Ea(){var a=new Fa;a.g=await va();await Da(a);a.na=await wa(a.g);await xa(a.g);await ya(a.g);await za(a.g);a.ka=await Aa(a.g,ha);a.T=await Ba(a.g);a.ta=await Ca(a.g);return a}class Fa{constructor(){this.i={}}}function Ga(a,b){for(let c of a.O)c.active&&(c.update(b),P(c)&&(c.active=!1))}function Ha(a,b){for(let c of a.O)c.active&&c.u(b)}
class Ia{constructor(a){this.O=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.O.push(c)}}get(){for(let a of this.O)if(!a.active)return a.active=!0,a.D=!1,a;return null}}
class Ja{constructor(a){this.i=[{s:"Common",name:"Pulse Lazer MK-II",description:"DMG +2, ATK SPD +10%",apply:async()=>{this.g.h.A+=2;this.g.h.K*=.9;this.g.h.X="green"}},{s:"Rare",name:"Nebula Railcoil",description:"DMG +5, PROJ SPD +20%",apply:()=>{this.g.h.A+=5;this.g.h.H*=1.2;this.g.h.X="purple"}},{s:"Epic",name:"Iron Fang Torpedo",description:"DMG +10, PROJ SPD +20%",L:"ATK SPD +20%",apply:()=>{this.g.h.A+=10;this.g.h.H*=1.2;this.g.h.K*=.8;this.g.h.X="orange"}},{s:"Common",name:"Mithril Plating",
description:"HP +10, REGEN +2",L:"EVASION +5%",apply:()=>{this.g.h.v+=20;this.g.h.m+=20;this.g.h.C+=5;this.g.h.F+=5}},{s:"Common",name:"Adamite Panels",description:"HP +20, REGEN +5",apply:()=>{this.g.h.v+=20;this.g.h.m+=20;this.g.h.C+=5}},{s:"Rare",name:"Torx\u2019s Reinforced Shell",description:"HP +50, REGEN +10",apply:()=>{this.g.h.v+=50;this.g.h.m+=50;this.g.h.C+=10}},{s:"Epic",name:"Aether Veil",description:"EVASION +15%",apply:()=>{this.g.h.F+=15}},{s:"Common",name:"Starwing Stabilizers",description:"MOVE SPD +10%",
apply:()=>{this.g.h.M*=1.15;this.g.h.N*=1.15}},{s:"Rare",name:"Meteor Thrusters",description:"MOVE SPD +20%",L:"EVASION +5%",apply:()=>{this.g.h.M*=1.2;this.g.h.N*=1.2;this.g.h.F+=5}},{s:"Legendary",name:"Voidstep Drive",description:"MOVE SPD +30%",L:"EVASION +10%",apply:()=>{this.g.h.M*=1.3;this.g.h.N*=1.3;this.g.h.F+=10}},{s:"Common",name:"Hunter\u2019s Instinct",description:"DMG +4, EVASION +2%",apply:()=>{this.g.h.A+=4;this.g.h.F+=2}},{s:"Rare",name:"Plasma Capacitor",description:"ATK SPD +15%",
L:"PROJ SPD +15%",apply:()=>{this.g.h.K*=.85;this.g.h.H*=1.15}},{s:"Legendary",name:"Jackalbane Core",description:"DMG +15, HP +50",apply:()=>{this.g.h.A+=15;this.g.h.v+=50;this.g.h.m+=50}},{s:"Common",name:"Left-over Sushi",description:"HP +10, REGEN +5",apply:()=>{this.g.h.C+=10;this.g.h.v+=10;this.g.h.m+=10}},{s:"Common",name:"Tuna Suprise",description:"HP +5, REGEN +3",apply:()=>{this.g.h.C+=3;this.g.h.v+=5;this.g.h.m+=5}},{s:"Rare",name:"Iron Jackal Bru",description:"HP +10, REGEN +3",L:"PROJ SPD +10%",
apply:()=>{this.g.h.C+=3;this.g.h.v+=10;this.g.h.H*=1.1}}];this.g=a}}
function Ka(a,b,c,d){let e="white";"Rare"===d.s?e="#60a5fa":"Epic"===d.s?e="#c084fc":"Legendary"===d.s&&(e="#fb923c");a.beginPath();a.moveTo(11,b);a.lineTo(5+c-6,b);a.quadraticCurveTo(5+c,b,5+c,b+6);a.lineTo(5+c,b+45-6);a.quadraticCurveTo(5+c,b+45,5+c-6,b+45);a.lineTo(11,b+45);a.quadraticCurveTo(5,b+45,5,b+45-6);a.lineTo(5,b+6);a.quadraticCurveTo(5,b,11,b);a.closePath();a.fillStyle="#333";a.fill();a.strokeStyle=e;a.lineWidth=2;a.stroke();a.fillStyle=e;a.font="bold 10px monospace";a.textAlign="left";
a.fillText(`[${d.s}]`,11,b+10);a.fillStyle="white";a.fillText(d.name,11,b+20);a.fillText(d.description,11,b+30);d.L&&a.fillText(d.L,11,b+40)}function La(a,b){b.save();let c=b.canvas.width-10;k=[];a.l.forEach((d,e)=>{e=90+55*e;Ka(b,e,c,d);a.j&&ba(e,c,()=>{d.apply();a.j=!1;a.i=a.i.filter(f=>f!==d);y("fade-out",.5,()=>{k=[];a.isActive=!1;a.g.Y.xa();y("fade-in")})})})}
class Ma{constructor(a){this.j=this.isActive=!1;this.l=[];this.i=[];this.g=a;this.i=(new Ja(a)).i}start(){this.j=this.isActive=!0;var a=[...this.i];for(let b=a.length-1;0<b;b--){let c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}this.l=a.slice(0,3);a=this.g.$;a.g=a.j[Math.floor(Math.random()*a.j.length)];k=[]}u(a){if(this.isActive){a.save();a.fillStyle="rgba(0, 0, 0, 0.7)";a.fillRect(0,0,a.canvas.width,a.canvas.height);u("Zone Cleared!",12,x(),15);v("Choose an upgrade:",9,x(),80);var b=
this.g.$;b.g&&(Na(a,"Torx",b.i.V.ta,b.g.split(" "),30,30,{x:10,y:30,width:17,height:21}),a.restore());La(this,a);a.restore()}}}
function Na(a,b,c,d,e,f,g){a.save();a.font="8px monospace";let n=q.i-(g.width+5),p=[],h="";for(let l=0;l<d.length;l++){let m=h+d[l]+" ";a.measureText(m).width>n?(p.push(h.trim()),h=d[l]+" "):h=m}p.push(h.trim());d=Math.max(f,10*p.length+5);f=q.i-5;a.fillStyle="#1f1722";a.beginPath();a.moveTo(9,e);a.lineTo(f-4,e);a.quadraticCurveTo(f,e,f,e+4);a.lineTo(f,e+d-4);a.quadraticCurveTo(f,e+d,f-4,e+d);a.lineTo(9,e+d);a.quadraticCurveTo(5,e+d,5,e+d-4);a.lineTo(5,e+4);a.quadraticCurveTo(5,e,9,e);a.fill();if(c){let {x:l,
y:m,width:B,height:C}=g;a.save();a.drawImage(c,l,m,B,C);a.strokeStyle="white";a.lineWidth=1;a.strokeRect(l+.5,m+.5,B-1,C-1);a.strokeRect(l,m,B,C);a.fillStyle="white";a.textAlign="center";a.font="9px monospace";a.fillText(b,l+B/2,m+C+10);a.restore()}a.fillStyle="white";a.textAlign="left";a.font="8px monospace";b=e+5+10;for(let l of p)a.fillText(l,10,b),b+=10;a.restore()}
class Oa{constructor(a){this.isActive=!0;this.j="Zone cleared. Time to upgrade.;Your scrap haul looks promising.;Another zone down. Nice work Benji.;The reactor\u2019s stable\u2026 for now.;Enemy tech is scrap for us.;Should I cut the green or red wire?;I\u2019ve patched the hull, with sticky tape.;Do you think Maggie likes silver?;What does this big red button do?;This isn't as easy as it looks.;Don\u2019t let the Jackal see this upgrade coming.;Look what I found!;This part looks purr-fect!;Keep your claws sharp, Jackal\u2019s crew is close.;Fitting this might take a while.".split(";");this.l=
[{U:"Maggie",text:"Benji\u2026 the Iron Jackal has stolen the Titan Heart."},{U:"Maggie",text:"An ancient crystalline star-core that powers interstellar warp lanes."},{U:"Maggie",text:"Without it, entire colonies risk isolation\u2026 and collapse."},{U:"Benji",text:"Great. So we\u2019re chasing a galaxy-crushing thief again?"},{U:"Torx",text:"You got it! And I\u2019ve got sticky tape, wrenches, and more puns than you can handle."}];this.g=null;this.i=a}u(){let a=this.l[0];Na(q.g,a.U,this.i.V.T,a.text.split(" "),
190,50,{x:15,y:155,width:17,height:21})}}async function Pa(){var a=new Qa;a.V=await Ea();let {na:b,ka:c}=a.V;a.i=new Ia(()=>new T(S(a.V)));a.j=new Ia(()=>new T(c));a.h=new sa(a,b,a.i);return a}
class Qa{constructor(){this.g=[];this.l=new I;this.$=new Oa(this);this.o=new Ma(this)}update(a,b){let {h:c,l:d,Y:e}=this;d.update(a,c.ea);c.update(a,b.x,b.y);for(let f of this.g)f.update(a);this.g=this.g.filter(f=>!P(f)&&!O(f));Ga(this.i,a);Ga(this.j,a);U(this.i.O.filter(f=>f.active&&!f.D),this.g.filter(f=>!f.D),(f,g)=>{R(g,f.A);L(f,6,1)});U([this.h],this.g,(f,g)=>{R(f,g.Aa)});U([this.h],this.j.O.filter(f=>f.active&&!f.D),(f,g)=>{100*Math.random()<f.F||R(f,g.A);L(g,6,1)});e&&e.update(a)}u(a){this.o.isActive?
this.o.u(a):(this.l.u(a),this.g.forEach(b=>b.u(a)),this.h.u(a),this.Y&&this.Y.u(),Ha(this.i,a),Ha(this.j,a),this.$.isActive&&this.$.u())}}class Ra{constructor(a){this.g=a}Z(){c2d.addEventListener("click",()=>{window.location.reload()})}ca(a){u("Game Over",24,x(),50);u("You made it",18,x(),100);u("to level",18,x(),115);u(this.g.toString(),24,x(),150);w("Back to Menu",a)}}let Sa=440*Math.pow(Math.pow(2,1/12),-9),Ta=/^[0-9.]+$/,Ua=/\s+/,Va=/(\d+)/,Wa={};
"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{Wa[c]=b})});function Xa(a){return Ta.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}
class Ya{constructor(a){let [b,c]=a.split(Ua);a=b.split(Va);this.frequency=Sa*Math.pow(Math.pow(2,1/12),Wa[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=Xa(c)||0}}function Za(a){let b=a.B;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let d=a.j.createBiquadFilter();d.type="peaking";d.frequency.value=c;b.connect(d);b=d;a.aa.push(d)});b.connect(a.W);b.connect(a.P)}function $a(a,...b){b.forEach(c=>{a.i.push(c instanceof Ya?c:new Ya(c))})}
function Z(a,b=a.j.currentTime){a.createOscillator();a.g.start(b);a.i.forEach((c,d)=>{c=b;let e=60/220*a.i[d].duration,f=e*(1-(a.o||1E-11));a.g?.frequency.setValueAtTime(a.i[d].frequency,c);if(a.l&&a.i[d].frequency){let g=a.i[d<a.i.length-1?d+1:0];a.g?.frequency.setValueAtTime(a.i[d].frequency,c+(f-Math.min(f,60/220*a.l)));a.g?.frequency.linearRampToValueAtTime(g.frequency,c+f)}a.g?.frequency.setValueAtTime(0,c+f);b=c+e});a.g.stop(b);a.g.onended=()=>Z(a,b)}
class ab{constructor(a,b){this.i=[];this.o=this.l=0;this.R="square";this.g=null;this.aa=[];this.j=a;this.B=this.j.createGain();this.P=this.j.createGain();this.W=this.j.createGain();Za(this);b&&$a(this,...b)}createOscillator(){this.stop();this.g=this.j.createOscillator();this.g.type=this.R;this.g.connect(this.B)}connect(a){this.P.connect(a);this.W.connect(a)}stop(){this.g&&(this.g.onended=null,this.g.stop(),this.g.frequency.cancelScheduledValues(0),this.g=null)}}
class bb{constructor(){this.volume=.15;this.o=!1;this.g=new AudioContext;this.B=this.g.createGain();this.j=this.g.createDynamicsCompressor();this.B.connect(this.g.destination);this.B.gain.value=this.volume;this.j.ratio.value=4;this.j.threshold.value=-12;this.j.connect(this.B);this.l=new ab(this.g,"F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;B4 q;F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;F#4 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;- q;C5 q;E5 q;C5 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;A5 q;G5 q;F5 q;D5 q".split(";"));
this.l.o=.3;this.l.l=.02;this.i=new ab(this.g,"F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h".split(";"));this.i.o=.1;this.i.l=.2;this.i.R="sawtooth";this.l.connect(this.j);this.i.connect(this.j)}stop(){this.l.stop();this.i.stop();this.o=!1}}function cb(a){O(a.g.h)&&(z.i||y("fade-out",.5,()=>{J(new Ra(a.g.Y.wa));y("fade-in",.5)}))}
class db{constructor(){this.j=q.g}async Z(){720>=window.innerWidth&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen());var a=this.i=new bb;if(!a.o){var b=a.g.currentTime;Z(a.l,b);Z(a.i,b);a.o=!0}this.g=await Pa();y("fade-in",1)}ca(a){this.g&&(this.g.update(a,q.o),this.g.u(this.j),cb(this))}ha(){this.i.stop()}}let eb=new db;
class fb{constructor(){this.T=null}g(){y("fade-out",.5,()=>{J(eb)})}async Z(){c2d.addEventListener("click",this.g);let a=await va();this.T=await Ba(a)}ca(a){u("Benji",28,x()+15,60);v("Super",18,x()-30,44,"#fff","center","#ee2626",3,Math.PI/-20);let {g:b}=q;b.save();b.font='900 10px "Tahoma"';b.textAlign="center";b.fillStyle="#f01b1bce";b.fillText("js13k 2025",35,q.j-10);b.restore();v("by hseager",9,q.i-35,q.j-11,"#f0f0f0c7");w("Start Game",a,195);this.T&&({g:a}=q,a.translate(x(),127),a.drawImage(this.T,
-18,-18,36,42),a.restore())}ha(){c2d.removeEventListener("click",this.g)}}let pa=new fb;K=new oa(...[]);let gb=performance.now(),hb=new I;(()=>{function a(b){let c=(b-gb)/1E3;gb=b;q.g.clearRect(0,0,q.i,q.j);hb.update(c);hb.u(q.g);K.g.ca(c);z.update(c);z.u(q.g);requestAnimationFrame(a)}aa();requestAnimationFrame(a)})();

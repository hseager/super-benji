let h=[];function aa(){var a=n.g.canvas;a.addEventListener("click",b=>{let c=a.getBoundingClientRect(),e=a.width/c.width*(b.clientX-c.left);b=a.height/c.height*(b.clientY-c.top);for(let d of h)e>=d.x&&e<=d.x+d.w&&b>=d.y&&b<=d.y+d.ma&&d.Fa()})}function ba(a,b,c){h.push({x:5,y:a,w:b,ma:45,Fa:c})}function p(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(144/c.width*(a-c.left),256/c.height*(b-c.top))}
function t(a){let b,c;.5625<window.innerWidth/window.innerHeight?(c=window.innerHeight,b=.5625*c):(b=window.innerWidth,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}function u(a,b,c,e=9){let d=a.createLinearGradient(0,b-e,0,b);c.forEach(([f,g])=>d.addColorStop(f,g));return d}
function v(a,b,c,e){let d=n.g;d.save();d.font=`bold ${b-1}px "Courier New"`;d.strokeStyle="#0a0601";d.fillStyle="#0a0601";d.textAlign="center";d.strokeText(a,c,e+2);d.fillText(a,c,e+2);d.font=`bold ${b}px "Courier New"`;d.fillStyle=u(d,e,[[0,"#fff4c1"],[.25,"#ffd84a"],[.5,"#6a2c00"],[.75,"#b65a00"],[1,"#ff9d00"]]);d.fillText(a,c,e);d.restore()}
function w(a,b,c=200){var e=n;e.l+=b;.75<=e.l&&(e.l=0,e.D=!e.D);e.D&&(b=e.g,b.save(),b.font='bold 16px "Courier New", serif',b.textAlign="center",b.textBaseline="middle",b.strokeStyle="#161616ff",b.strokeText(a,b.canvas.width/2,c+1),b.fillStyle=u(b,c,[[0,"#ffffff"],[.15,"#dcdcdc"],[.3,"#a0a0a0"],[.45,"#f8f8f8"],[.6,"#7a7a7a"],[.8,"#c8c8c8"],[1,"#5a5a5a"]],10),b.fillText(a,b.canvas.width/2,c),b.restore())}
function x(a,b,c,e,d=6,f,g){a.beginPath();a.moveTo(5+d,b);a.lineTo(5+c-d,b);a.quadraticCurveTo(5+c,b,5+c,b+d);a.lineTo(5+c,b+e-d);a.quadraticCurveTo(5+c,b+e,5+c-d,b+e);a.lineTo(5+d,b+e);a.quadraticCurveTo(5,b+e,5,b+e-d);a.lineTo(5,b+d);a.quadraticCurveTo(5,b,5+d,b);a.closePath();f&&(a.fillStyle=f,a.fill());g&&(a.strokeStyle=g,a.stroke())}function y(){return n.g.canvas.width/2}
class ca{constructor(){this.l=0;this.D=!0;this.g=c2d.getContext("2d");this.u=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.u=p(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.u=p(a.clientX,a.clientY)});window.addEventListener("resize",()=>t(this));window.addEventListener("orientationchange",()=>t(this));t(this)}get i(){return this.g.canvas.width}get j(){return this.g.canvas.height}ba(a,b,c,e,d="white",f="center",g,k,m){let l=this.g;l.save();l.font=`${b}px "Courier New", monospace`;
l.textAlign=f;l.fillStyle=d;g&&(l.strokeStyle=g);k&&(l.lineWidth=k);m?(l.translate(c,e),l.rotate(m),g&&l.strokeText(a,0,0),l.fillText(a,0,0)):(g&&l.strokeText(a,c,e),l.fillText(a,c,e));l.restore()}}let n=new ca;
class da{constructor(){this.e=this.a=0;this.d=1;this.V=this.da=this.f=0}start(a,b,c,e){this.da=a;this.V=b;this.a=a;this.d=c;this.e=0;this.f=1;this.c=e}update(a){this.f&&(this.e+=a,a=Math.min(this.e/this.d,1),this.a=this.da+(this.V-this.da)*a,1<=a&&(this.f=0,this.c?.()))}v(a){!this.f&&0>=this.a||(a.fillStyle=`rgba(0,0,0,${.8*(1-this.a)})`,a.fillRect(0,0,n.i,n.j))}get active(){return 1===this.f}}
let z=new da,A=[{S:1,color:"#00FF66"},{S:.75,color:"#00BFFF"},{S:.5,color:"#FFA500"},{S:.25,color:"#FF3333"},{S:0,color:"rgba(255, 0, 0, 0)"}],B={blue:["#35a3ec","#4480b8"],green:["#35ec5d","#44b867"],Xa:["#a935ec","#a144b8"],Wa:["#ec35be","#b84488"],Va:["#eca335","#b88244"]},ea="#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" "),fa="#0d0d0d #1a1a1a #2c2c2c #3f3f3f #5a2b00 #8c3b00 #9aacac #ff7b1c #ffb84d #ffd9a3".split(" "),ha=["#ff5e49","#881c18"],ia="#200900 #190902 #291403 #311d0c #a05030 #c06440 #e6a67c".split(" "),
ja="#201a00 #191502 #291f03 #312e0c #a08230 #c09e40 #e6d37c".split(" "),ka="#310101 #331515 #380d0d #310c0c #A03030 #c04040 #e67c7c".split(" "),C=["Starfield Frontiers","Verdantia Expanse","Ironfang Megaship","Outer wilds"],la="#181a17 #17221b #1e331e #5f745f #193d19 #4f7550 #85b385 #7aa37a #a3c4a3 #c0e0c0".split(" "),ma="#111821 #152236 #1b2e45 #2d4668 #22354f #3a567a #5a7ba3 #6f92b8 #90afcf #b0cde6".split(" "),na="#1a130f #2a1f18 #3b2c22 #544036 #6a5448 #7f6a5a #8e8e91 #a5a6a9 #c5c6c9 #e0e1e3".split(" ");
function D(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,V:a>>8&255,b:a&255,alpha:b}}function E(a,b=1){let {r:c,V:e,b:d}=D(a,b);return`rgba(${c}, ${e}, ${d}, ${b})`}
function oa(){return F.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var e=Math.max(a,c,b),d=Math.min(a,c,b),f=0,g=0;let k=(e+d)/2;if(e!==d){let r=e-d;g=.5<k?r/(2-e-d):r/(e+d);switch(e){case a:f=(c-b)/r+(c<b?6:0);break;case c:f=(b-a)/r+2;break;case b:f=(a-c)/r+4}f*=60}let {ma:m,da:l,Ia:q}={ma:f,da:100*g,Ia:100*k};a=(m+200*(Math.random()-.5)+360)%360;e=Math.min(100,Math.max(0,q+0*(Math.random()-.5)));
e/=100;c=Math.min(100,Math.max(0,l+10*(Math.random()-.5)))/100*(1-Math.abs(2*e-1));b=c*(1-Math.abs(a/60%2-1));e-=c/2;g=f=d=0;0<=a&&60>a?(d=c,f=b,g=0):60<=a&&120>a?(d=b,f=c,g=0):120<=a&&180>a?(d=0,f=c,g=b):180<=a&&240>a?(d=0,f=b,g=c):240<=a&&300>a?(d=b,f=0,g=c):300<=a&&360>a&&(d=c,f=0,g=b);return`#${Math.round(255*(d+e)).toString(16).padStart(2,"0")}${Math.round(255*(f+e)).toString(16).padStart(2,"0")}${Math.round(255*(g+e)).toString(16).padStart(2,"0")}`})}let F="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function G(a,b,c,e,d){b=pa(b,a,d);return{La:a,O:b,offsetX:0,offsetY:0,Pa:c,wa:e}}
function pa(a=.01,b=F,c){let e=document.createElement("canvas");e.width=128;e.height=128;let d=e.getContext("2d");d.imageSmoothingEnabled=!1;a=Math.floor(16384*a);for(var f=0;f<a;f++){var g=Math.floor(128*Math.random()),k=Math.floor(128*Math.random());d.fillStyle=b[Math.floor(Math.random()*b.length)];d.fillRect(g,k,c,c)}for(let m=0;2>m;m++){c=d;a=128*Math.random();f=128*Math.random();g=64*Math.random()+128/3;k=b;for(let l=-128;128>=l;l+=128)for(let q=-128;128>=q;q+=128){let r=c.createRadialGradient(a+
l,f+q,0,a+l,f+q,g);r.addColorStop(0,E(k[5],.1));r.addColorStop(1,"rgba(0,0,0,0)");c.globalCompositeOperation="screen";c.fillStyle=r;c.beginPath();c.arc(a+l,f+q,g,0,2*Math.PI);c.fill();c.globalCompositeOperation="source-over"}}b=new Image;b.src=e.toDataURL();return b}
class H{constructor(){this.g=[];let a=oa();this.g.push(G(a,.001,12,.2,1));this.g.push(G(a,.002,18,.3,1.2));this.g.push(G(a,.003,30,.4,1.2))}update(a,b={x:0,y:0}){for(let c of this.g)0!==c.O.width&&0!==c.O.height&&(c.offsetY=(c.offsetY+c.Pa*a-.5*b.y*c.wa)%c.O.height,0>c.offsetY&&(c.offsetY+=c.O.height),c.offsetX=(c.offsetX-.4*b.x*c.wa)%c.O.width)}v(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var e=this.g[0];a.save();a.fillStyle=e.La[0];a.fillRect(0,0,b,c);for(let d of this.g)d.O.complete&&
(e=a.createPattern(d.O,"repeat"))&&(a.save(),a.translate(d.offsetX,d.offsetY),a.fillStyle=e,a.fillRect(-d.O.width/4,-d.O.height,b+100,c+d.O.height),a.restore())}}function I(a){var b=J,c=[];b.g.ua?.();b.g=a;b.g.ha?.(...c)}class qa{constructor(...a){this.g=new ra;this.g.ha?.(...a)}}let J;
function K(a,b=8,c=6){if(!a.G){a.G=!0;for(let e=0;e<b;e++){let d=240*(Math.random()-.5),f=Math.random()*Math.PI*2;a.u.push({x:a.x+a.width/2,y:a.y+a.height/2,Ta:Math.cos(f)*d,Ua:Math.sin(f)*d,pa:Math.random()*Math.PI*2,Oa:8*(Math.random()-.5),alpha:1,size:c,Qa:Math.floor(Math.random()*(a.C.width-c)),Ra:Math.floor(Math.random()*(a.C.height-c))})}}}function L(a,b){for(let c of a.u)c.x+=c.Ta*b,c.y+=c.Ua*b,c.pa+=c.Oa*b,c.alpha-=1.5*b;a.u=a.u.filter(c=>0<c.alpha)}
function M(a,b){for(let c of a.u)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.pa),b.drawImage(a.C,c.Qa,c.Ra,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function N(a){return a.G&&0===a.u.length}class O{constructor(a,b,c,e=0,d=0){this.u=[];this.G=!1;this.C=a;this.x=b;this.y=c;this.width=e;this.height=d;this.active=!0}na(){return 0>this.x+this.width||this.x>n.i||0>this.y+this.height||this.y>n.j}}
function P(a,b,c,e=a.g,d){if(a.active&&a.fa){var f=a.fa.get();f&&(d&&(f.C=Q(a.ya.U,d)),d=0>=e.y?a.y:a.y+a.height,f.o=b,f.speed=c,b=d,c=e.x,e=e.y,f.x=a.x+a.width/2+a.qa,f.y=b,f.ra=c,f.sa=e,f.active=!0)}}
function R(a,b,c,e){if(a.active)if("burst"===a.J)0<a.W?(a.D-=b,0>=a.D&&(P(a,c,e,a.g),a.W--,a.D=a.Ba),0>=a.W&&(a.i=a.F)):(a.i-=b,0>=a.i&&(a.W=a.Aa,a.D=0));else if(a.i-=b,0>=a.i){switch(a.J){case "single":P(a,c,e,a.g);break;case "spread":var d=[-.3,0,.3];b=Math.hypot(a.g.x,a.g.y);var f=a.g.x/b;b=a.g.y/b;for(var g of d){d=Math.cos(g);var k=Math.sin(g);P(a,c,e,{x:f*d-b*k,y:f*k+b*d})}break;case "megaspread":d=[-.6,-.3,0,.3,.6];b=Math.hypot(a.g.x,a.g.y);g=a.g.x/b;b=a.g.y/b;for(f of d)d=Math.cos(f),k=Math.sin(f),
P(a,c,e,{x:g*d-b*k,y:g*k+b*d})}a.i=a.F}}function S(a,b){let c=Math.max(-3,Math.min(3,3*a.ka.x)),e=a.width/2;for(let d=0;d<a.width;d++)b.drawImage(a.C,d,0,1,a.height,a.x+d,a.y+Math.floor((d-e)/e*c),1,a.height)}class sa extends O{constructor(a,b,c,e,d,f,g){super(b,e,d,f,g);this.Z={x:0,y:0};this.ka={x:0,y:0};this.qa=0;this.active=!0;this.i=0;this.F=.1;this.g={x:0,y:-1};this.J="single";this.D=this.W=0;this.Ba=.1;this.Aa=3;this.ya=a;this.C=b;this.fa=c}}
class ta extends sa{constructor(a,b,c){super(a,b,c,y()-b.width/2,120,b.width,b.height);this.active=!1;this.qa=-2;this.aa="blue";this.l="#00bfff7c";this.P=10;this.Y=75;this.L=50;this.m=this.A=100;this.F=.6;this.o=10;this.I=100;this.j=this.H=this.K=0;this.J="single";this.C=b}update(a,b,c){if(this.G)L(this,a);else{0<this.H&&this.m<this.A&&(this.j+=a,5<=this.j&&(this.m+=this.H,this.m>this.A&&(this.m=this.A),this.j=0));b-=this.x+this.width/2;c=c-(this.y+this.height/2)-22;var e=Math.hypot(b,c);this.active&&
2<e&&(this.x+=b/e*this.Y*a,this.y+=c/e*this.L*a);this.ka={x:this.x-this.Z.x,y:this.y-this.Z.y};this.Z={x:this.x,y:this.y};a:{b=this.m/this.A;b=Math.max(0,Math.min(1,b));for(var d=0;d<A.length-1;d++)if(c=A[d],e=A[d+1],b<=c.S&&b>=e.S){b=(b-e.S)/(c.S-e.S);c=D(c.color);let g=D(e.color);e=c.alpha+(g.alpha-c.alpha)*(1-b);d=Math.round(c.V+(g.V-c.V)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+d.toString(16).padStart(2,"0")+f.toString(16).padStart(2,
"0");b=E(b,e);break a}b=A[A.length-1].color}this.l=b;R(this,a,this.o,this.I)}}v(a){if(this.G)M(this,a);else{a.save();a.shadowColor=this.l;a.shadowBlur=this.P;let b=this.x+this.width/2,c=this.y+this.height+-2,e=a.createLinearGradient(b,c,b,c+20);e.addColorStop(0,"rgba(0, 180, 255, 0.9)");e.addColorStop(.4,"rgba(255, 255, 255, 0.8)");e.addColorStop(1,"rgba(255, 140, 0, 0)");let d=6+3*Math.random();a.fillStyle=e;a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+d);a.lineTo(b+1,c);a.closePath();a.fill();S(this,
a);a.restore()}}ja(a){this.m-=a;0>=this.m&&K(this,40)}}class ua extends O{constructor(a){super(a,0,0);this.active=!1;this.speed=this.o=1;this.sa=this.ra=0;this.C=a}v(a){this.G?M(this,a):a.drawImage(this.C,this.x,this.y)}update(a){this.G?(L(this,a),N(this)&&(this.active=this.G=!1)):(this.x+=this.ra*this.speed*a,this.y+=this.sa*this.speed*a)}}
class va extends sa{constructor(a,b,c,e,d,f,g,k){super(a,b,c,f,-15-100*Math.random(),b.width,b.height);this.za="#ffb3007c";this.j=12;this.L=this.m=this.A=20;this.l=0;this.Na=.5;this.F=3.5;this.g={x:0,y:1};this.P=0;a=document.createElement("canvas");a.width=this.C.width+4*this.j;a.height=this.C.height+4*this.j;b=a.getContext("2d");if(!b)throw Error("Failed to get 2D context");b.shadowColor=this.za;b.shadowBlur=this.j;b.drawImage(this.C,2*this.j,2*this.j);this.Ca=a;this.l=60*(Math.random()-.5);this.o=
e;this.I=d;this.ca=g;this.J=k;this.F=3.5+.3*(2*Math.random()-1);this.i=Math.random()*this.F}update(a){if(this.G)L(this,a);else{var b=this.x;switch(this.ca){case "straight":this.y+=this.L*a;break;case "sine":this.y+=this.L*a;this.x+=2*Math.sin(this.y/40);break;case "zigzag":this.y+=this.L*a,this.P-=a,0>=this.P&&(this.l=80*(.5>Math.random()?-1:1),this.P=.5),this.x+=this.l*a}0>this.x&&(this.x=0,this.l*=-1);this.x+this.width>n.i&&(this.x=n.i-this.width,this.l*=-1);this.ka.x=(this.x-b)/a;R(this,a,this.o,
this.I)}}v(a){this.G?M(this,a):(a.save(),a.drawImage(this.Ca,this.x-2*this.j,this.y-2*this.j),a.drawImage(this.C,this.x,this.y),S(this,a),a.restore())}ja(a){this.m-=a;0>=this.m&&K(this)}na(){return 0>this.x+this.width||this.x>n.i||this.y>n.j}}function wa(a,b){b=1+2*(a.X-1)+2*b;for(let e=0;e<b;e++){var c=a.l[Math.floor(Math.random()*a.l.length)];c=new va(a.g,c.C,a.g.ga,c.la*(1+.03*a.X),c.I*(1+.05*a.X),Math.random()*(n.i-c.C.width),c.ca,c.J);a.g.R.push(c)}}
function xa(a){2>a.j?(a.j++,wa(a,a.j)):z.start(1,0,.5,()=>{a.g.ea.start();z.start(0,1,.5)})}function T(a){a.j=0;a.g.background=new H;a.i=3;a.g.R=[];xa(a)}function ya(a){a.X++;var b=a.g.M;b.D.includes(a.X)?(b=b.g,b.M.isActive=!0,b.h.active=!1):U(b.g);a.g.M.isActive||T(a)}
class za{constructor(a){this.i=this.j=this.X=0;this.g=a;this.l=[{C:this.g.U.Ea,ca:"straight",J:"single",I:50,la:12},{C:this.g.U.Ka,ca:"sine",J:"burst",I:60,la:12*1.1},{C:this.g.U.Da,ca:"zigzag",J:"spread",I:75,la:12*1.2}]}update(a){let b=!this.g.ea.isActive&&!this.g.M.isActive;0===this.g.R.length&&b&&(2>this.j?xa(this):z.active||z.start(1,0,.5,()=>{this.g.ea.start();z.start(0,1,.5)}));0<this.i&&(this.i-=a)}v(){if(0<this.i){var a=Math.min(this.i/.5,1);n.g.save();n.g.globalAlpha=a;a=this.X;let b=C.length-
1,c=Math.floor((a-1)/5),{ta:e,xa:d}=c<b?{ta:C[c],xa:(a-1)%5+1}:{ta:C[b],xa:a-5*b};v(e,12,n.i/2,40);v(`Zone ${d}`,16,n.i/2,65);n.g.restore()}}}function V(a,b,c){for(let e=a.length-1;0<=e;e--){let d=a[e];if(d.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&d&&g&&d.x<g.x+(g.width||0)&&d.x+(d.width||0)>g.x&&d.y<g.y+(g.height||0)&&d.y+(d.height||0)>g.y){c(d,g);break}}}}
class Aa{constructor(a){this.image=a}v(a,b,c,e,d,f,g,k=0){a.save();k&1&&(a.translate(b+f,c),a.scale(-1,1),c=b=0);k&2&&(a.translate(b,c+g),a.scale(1,-1),c=0);a.drawImage(this.image,e,d,f,g,b,c,f,g);a.restore()}}function W(a,b,c,e,d,f,g,k,m=0){b.v(a.g,c,e,d,f,g,k,m)}class X{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}
function Ba(a,b){return new Promise((c,e)=>{a.complete&&0!==a.naturalWidth?c(Ca(a,b)):(a.onload=()=>{c(Ca(a,b))},a.onerror=e)})}
function Ca(a,b){let c=document.createElement("canvas"),e=c.getContext("2d");c.width=a.width;c.height=a.height;e.drawImage(a,0,0);a=e.getImageData(0,0,a.width,a.height);let d=a.data;for(let f=0;f<d.length;f+=4){if(0===d[f+3])continue;let g=D(b[Math.min(b.length-1,Math.floor(d[f]/(256/b.length)))]||"#000000");d[f]=g.r;d[f+1]=g.V;d[f+2]=g.b}e.putImageData(a,0,0);b=new Image;b.src=c.toDataURL();return b}
async function Da(){let a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABYBAMAAAC3wuwbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAB5QTFRFAAAAICAgNjY2Tk5OZmZmhoaGrq6u3t7eDAwMFBQUTJzkDgAAAAp0Uk5TAP////7///T+cjOS5s4AAAPzSURBVHichZbNU9tGFMCfvkDctDIw6k27KyfKzdqVO3CzJZm4NwM2cASSJjlSnBmultSUPdLO9P/trgytijbKm/FK9vv5fex7eiuw4F+5BZ2s717ubOLpgPsXYGHmoaUjXv7v2TS0tDa2sutFKTXDHgvFeIazHoCnwwdC4u8DlKYfWR9g+rNsTXpcGDhlzN/0WPBqEvZlYYYW8aweAJTO7NFDj/sfiflcIgdAXwrH2V6l1rjWATu/NhdpZwRZD3AD1jUMtMDHJpIM3meg3evxB/WrndHPecV1wDJvAB6tzkl+pAHOs2O5cpbOvlLONMDZ9J1cM8xO1gRTHXCkXCSQzJZ+SLp6azlXFhCYsxyDDpjOEahC/p4zDPtdwJTAkwLoABPQpGkmU9QUKZFNpSt6yjFSQYSyW840OcBF6g+OG1PfKfcqmdfHOsWzGCs6qBpAxmdogDQa8pqM5N2i6YmOZMNhVvkSMCcm2GEX4AfPgB3aiaMDovGzheIrZhogH46ZjxTAP2a+Js88LYjvT+QdvfyANEFyUjD/r5HMMLq8xRpgZOYIyYbPYf/9GQEdMsUqtKvV8HJ9T3UtN32ngIJFF7dTorMQPqnYc1xfckw1HSVLqIAI2WPi+bo8ls1qeS6Vz9Wkq7fOm4uz3aOwo5+M2IsnveRLXVztCJZFP7AqeD8wi34AjF59txBCzRhxMELqOZu8jgnU2SGXP+TnZJtau1UdtpFruYHt6NuOL6cFMCMAcNEarpuvd3cvVp/F3FTxBsoIGyNAKIBdV3loPZHmoooRKvHhG5jKaOVZpzxE/wEGVEjJ7SGU6FEI2JE/nhdtACv9IFSAEP6RjM/heRsogy+oFnCoXBDCvykD/7NQHtZIXMGh+1laCoQDTtoGYCGQQEHg7Ow8qCzkFkgD7RG/EVJfIsPYefhNZWFAmhetLMB0hQiCemGfvpUmNnIm8Iy3p6stYxdisIEDXwLqGOR81K6FsS+JUlbRuHq8QUEFr8UwxcWnL8o5U1sZdgDzl+byd6gOa91zZvKNXPcyDw4kY950gerYQJ4dh9uBt77uxBCQgnMqvG0v7b55DbhBeTJmSVkvwBSiZvcdANU/cwkIAD+NCs0byZ9RxveTwAU3IrIKm26Uw3PEE8+V+TzSYnbXAaooQgzFEsAiSuaTDkDfxugbQsrCLOVF1wVlgxz7iQJ4oQN8xjmjGBZu6uMB686GisyzGiOIY5oyXg87gOHPgzrxwD0lPonxogtUKWaxB0Y8IwyddgeTGxBE1Dlp+bIfNC+Ye8FQ8PIJBpQTon3fMOQ+yP+Np35a5D9pABdR7MHe+ExZ0L7TVKrT7E85X81WB94/wFKwFTwzPFUAAAAASUVORK5CYII=";let b=
new Aa(a);return new Promise(c=>{a.onload=async()=>{c(b)}})}
async function Ea(){let a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAgAQMAAADg7OJmAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAZQTFRFAAAA////pdmf3QAAAAJ0Uk5TAP9bkSK1AAAA/0lEQVR4nG2OMW7DMAxFOWnSAThkzAE8dNBAZMrYQxBF8YdC8GhoEDT0CB079hg9QKfOOU8oWjYCIwQMUw//838ipkQ+42fg+u/LlTfwVXz53cH35MtP28DnUAxAjzfYFVvKAMcRTik2qSLrk5ByPiki4HIQOMaXqhsIBji9h8pyccvJwBRbwITAayuw5jgbwIgUqSmKTCPlSZGzVSi1CkSgbzBdA7KqnYjQZQEJoFAjHLO2ZsVQFaXMjWNxYF9XmOU168fcFX5jAed+1C2WopaSUD3lOJWqWPKfidfpJj4A7UDwYDFw48sASiUwzjcJO8jgRep+QwnCYq2eNPC5Awk8Xb8C28oeAAAAAElFTkSuQmCC";let b=
new Aa(a);return new Promise(c=>{a.onload=async()=>{c(b)}})}async function Fa(a){let b=new X(27,30);W(b,a,7,0,0,15,13,30);W(b,a,1,18,0,45,6,9);W(b,a,19,18,0,45,6,9,1);return Y(b,ea)}async function Y(a,b){let c=new Image;c.src=a.canvas.toDataURL();a=await Ba(c,b);await a.decode();return a}async function Ga(a){let b=new X(14,14);W(b,a,0,0,16,0,14,14);return Y(b,ia)}async function Ha(a){let b=new X(16,16);W(b,a,0,0,16,15,16,16);return Y(b,ja)}
async function Ia(a){let b=new X(16,16);W(b,a,0,0,16,32,16,16);return Y(b,ka)}async function Ja(a,b){let c=new X(3,3);W(c,a,0,0,0,0,3,3,0);return Y(c,b)}async function Ka(a){let b=new X(18,21);W(b,a,0,0,29,52,18,16);W(b,a,1,16,47,84,16,5);return Y(b,fa)}async function La(a){let b=new X(17,21);W(b,a,0,0,47,68,17,16);W(b,a,1,16,47,84,16,5);return Y(b,la)}async function Ma(a){let b=new X(17,21);W(b,a,0,0,47,52,17,16);W(b,a,1,16,47,84,16,5);return Y(b,ma)}
async function Na(a){let b=new X(16,20);W(b,a,0,0,31,68,16,20);return Y(b,na)}function Q(a,b="blue"){return a.i[b]??a.i.blue}async function Oa(a){let b=Object.keys(B);for(let c of b)a.i[c]=await Ja(a.g,B[c])}async function Pa(){var a=new Qa;a.g=await Da();a.font=await Ea();await Oa(a);a.Ma=await Fa(a.g);a.Ea=await Ga(a.g);a.Ka=await Ha(a.g);a.Da=await Ia(a.g);a.Ga=await Ja(a.g,ha);a.va=await Ka(a.g);a.Sa=await La(a.g);a.Ja=await Ma(a.g);a.Ha=await Na(a.g);return a}
class Qa{constructor(){this.i={}}ba(a,b,c,e=-1,d=2){let f=this.font.image.width/16,g=b;for(let k=0;k<a.length;k++){let m=a.charCodeAt(k);10===m?(g=b,c+=f+d):(n.g.drawImage(this.font.image,m%16*f,(Math.floor(m/16)-2)*f,f,f,g-12,c-6,f,f),g+=f+e)}}}function Ra(a,b){for(let c of a.$)c.active&&(c.update(b),c.na()&&(c.active=!1))}function Sa(a,b){for(let c of a.$)c.active&&c.v(b)}
class Ta{constructor(a){this.$=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.$.push(c)}}get(){for(let a of this.$)if(!a.active)return a.active=!0,a.G=!1,a;return null}}
class Ua{constructor(a){this.i=[{s:"Common",name:"Pulse Lazer MK-II",description:"DMG +2, ATK SPD +10%",apply:async()=>{this.g.h.o+=2;this.g.h.F*=.9;this.g.h.aa="green"}},{s:"Rare",name:"Nebula Railcoil",description:"DMG +5, PROJ SPD +20%",N:"Burst Shot",apply:()=>{this.g.h.o+=5;this.g.h.I*=1.2;this.g.h.aa="purple";this.g.h.J="burst"}},{s:"Epic",name:"Iron Fang Torpedo",description:"DMG +10, ATK SPD +20%",N:"Spread Shot",apply:()=>{this.g.h.o+=10;this.g.h.F*=.8;this.g.h.aa="orange";this.g.h.J="spread"}},
{s:"Legendary",name:"Modified Sprinkler",description:"DMG -8, ATK SPD +60%",N:"Mega Shot",apply:()=>{this.g.h.o-=8;this.g.h.F*=.6;this.g.h.aa="pink";this.g.h.J="megaspread"}},{s:"Legendary",name:"Glass Canon",description:"HP -25, DMG +12",N:"Mega Shot",apply:()=>{this.g.h.o+=12;this.g.h.m-=25;this.g.h.aa="orange";this.g.h.J="megaspread"}},{s:"Common",name:"Mithril Plating",description:"HP +10, REGEN +2",N:"EVASION +5%",apply:()=>{this.g.h.A+=20;this.g.h.m+=20;this.g.h.H+=5;this.g.h.K+=5}},{s:"Common",
name:"Adamite Panels",description:"HP +20, REGEN +5",apply:()=>{this.g.h.A+=20;this.g.h.m+=20;this.g.h.H+=5}},{s:"Rare",name:"Torx\u2019s Reinforced Shell",description:"HP +50, REGEN +10",apply:()=>{this.g.h.A+=50;this.g.h.m+=50;this.g.h.H+=10}},{s:"Epic",name:"Aether Veil",description:"EVASION +15%",apply:()=>{this.g.h.K+=15}},{s:"Common",name:"Starwing Stabilizers",description:"MOVE SPD +10%",apply:()=>{this.g.h.Y*=1.15;this.g.h.L*=1.15}},{s:"Rare",name:"Meteor Thrusters",description:"MOVE SPD +20%",
N:"EVASION +5%",apply:()=>{this.g.h.Y*=1.2;this.g.h.L*=1.2;this.g.h.K+=5}},{s:"Legendary",name:"Voidstep Drive",description:"MOVE SPD +30%",N:"EVASION +10%",apply:()=>{this.g.h.Y*=1.3;this.g.h.L*=1.3;this.g.h.K+=10}},{s:"Common",name:"Hunter\u2019s Instinct",description:"DMG +4, EVASION +2%",apply:()=>{this.g.h.o+=4;this.g.h.K+=2}},{s:"Rare",name:"Plasma Capacitor",description:"ATK SPD +15%",N:"PROJ SPD +15%",apply:()=>{this.g.h.F*=.85;this.g.h.I*=1.15}},{s:"Legendary",name:"Jackalbane Core",description:"DMG +15, HP +50",
apply:()=>{this.g.h.o+=15;this.g.h.A+=50;this.g.h.m+=50}},{s:"Common",name:"Left-over Sushi",description:"HP +10, REGEN +1",apply:()=>{this.g.h.H+=1;this.g.h.A+=10;this.g.h.m+=10}},{s:"Common",name:"Tuna Suprise",description:"HP +5, REGEN +3",apply:()=>{this.g.h.H+=3;this.g.h.A+=5;this.g.h.m+=5}},{s:"Rare",name:"Iron Jackal Bru",description:"HP +10, REGEN +3",N:"PROJ SPD +10%",apply:()=>{this.g.h.H+=3;this.g.h.A+=10;this.g.h.I*=1.1}}];this.g=a}}
function Va(a,b,c,e){let d="white";"Rare"===e.s?d="#60a5fa":"Epic"===e.s?d="#c084fc":"Legendary"===e.s&&(d="#fb923c");x(a,b,c,45,6,"#222",d);a.fillStyle=d;a.font="bold 10px monospace";a.textAlign="left";a.fillText(`[${e.s}]`,11,b+10);a.fillStyle="white";a.fillText(e.name,11,b+20);a.fillText(e.description,11,b+30);e.N&&a.fillText(e.N,11,b+40)}
function Wa(a,b){b.save();let c=b.canvas.width-10;h=[];a.l.forEach((e,d)=>{d=90+55*d;Va(b,d,c,e);a.j&&ba(d,c,()=>{e.apply();a.j=!1;a.i=a.i.filter(f=>f!==e);z.start(1,0,.5,()=>{h=[];a.isActive=!1;ya(a.g.T);z.start(0,1,.5)})})})}
class Xa{constructor(a){this.j=this.isActive=!1;this.l=[];this.i=[];this.g=a;this.i=(new Ua(a)).i}start(){this.j=this.isActive=!0;var a=[...this.i];for(let b=a.length-1;0<b;b--){let c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}this.l=a.slice(0,3);a=this.g.M;a.l=a.u[Math.floor(Math.random()*a.u.length)];h=[]}v(a){if(this.isActive){a.save();a.fillStyle="rgba(0, 0, 0, 0.7)";a.fillRect(0,0,a.canvas.width,a.canvas.height);v("Zone Cleared!",12,y(),15);var b=this.g.M;b.l&&Ya(b,"Torx",b.l,55,
30);Wa(this,a);a.restore()}}}
let Za={[0]:[{B:"Maggie",text:"Benji. the Iron\nJackal has taken\nthe Titan Heart."},{B:"Maggie",text:"Without it, warp lanes will collapse. Whole colonies could be stranded."},{B:"Benji",text:"So he wants to choke the galaxy by cutting off its roads. Clever. Evil, but clever."},{B:"Torx",text:"Then we\u2019ll just have to hunt him down before the galaxy gridlocks into chaos."}],[1]:[{B:"Maggie",text:"Jackal\u2019s fleet is on Verdantia. He\u2019s channeling the Titan Heart into a weapon core."},{B:"Benji",
text:"A superweapon, naturally. Why do they always build those instead of, I don\u2019t know, hospitals?"},{B:"Torx",text:"Because hospitals don\u2019t vaporize planets. Stay sharp \u2014 he\u2019s accelerating the build."},{B:"Maggie",text:"If he succeeds, no world will be safe. We have to stop him here."}],[2]:[{B:"Maggie",text:"There it is. The Ironfang Megaship\u2026 the Titan Heart at its core."},{B:"Benji",text:"Looks more like a floating fortress than a ship."},{B:"Jackal",text:"You\u2019ve come far, but this is where your defiance ends. The galaxy belongs to me."},
{B:"Torx",text:"Big words from a man hiding behind a flying mountain."},{B:"Jackal",text:"Your courage is amusing. Your resistance is doomed."},{B:"Benji",text:"We\u2019ll see. If you want the galaxy, you\u2019ll have to take it over our wreckage."},{B:"Jackal",text:"Gladly."}],[3]:[{B:"Maggie",text:"It\u2019s done. The Jackal is defeated, and the Titan Heart is safe."},{B:"Benji",text:"For now. But if he clawed his way back once, he might try again."},{B:"Torx",text:"Then we\u2019ll be ready. Galaxy\u2019s not done needing heroes yet."}]};
function Ya(a,b,c,e,d){let f=n.g;var g=c.split(" ");let k={x:15,y:e-34,width:17,height:21},m=n.i-(k.width+5),l=[],q="";for(let r of g)g=q+r+" ",f.measureText(g).width>m?(l.push(q.trim()),q=r+" "):q=g;l.push(q.trim());x(f,e,n.i-10,Math.max(d,10*l.length+5),4,"#1f1722");d=a.g.U;$a(a,f,b,"Maggie"===b?d.Ja:"Torx"===b?d.Sa:"Jackal"===b?d.Ha:d.va,k);a.g.U.ba(c.toUpperCase(),20,e+12);f.restore()}
function $a(a,b,c,e,{x:d,y:f,width:g,height:k}){e&&(b.save(),b.drawImage(e,d,f,g,k),b.strokeStyle="white",b.lineWidth=1,b.strokeRect(d+.5,f+.5,g-1,k-1),b.strokeRect(d,f,g,k),a.g.U.ba(c.toUpperCase(),d+g/2,f+k+10),b.restore())}
class ab{constructor(a){this.isActive=!0;this.j=this.i=0;this.D=[6,11,16];this.u="Scrap secured. Upgrade time!;Jackal\u2019s junk is our treasure.;Zone clear. Let\u2019s bolt on something new.;Reactor\u2019s humming\u2014don\u2019t breathe too close.;Enemy tech? More like spare parts.;Cut the green wire\u2026 I think.;Hull patched. Tape counts as armor, right?;Think Maggie prefers chrome or silver?;Big red button\u2026 probably important.;Not easy, but nothing worth doing is.;Shh\u2014don\u2019t tell the Jackal about this mod.;Found a shiny bit for the collection!;This part\u2019s purr-fect for Benji\u2019s claws.;Stay sharp\u2014Jackal\u2019s crew love ambushes.;Fitting this might take a plasma torch\u2026 or luck.".split(";");this.l=
null;this.g=a}start(){n.g.canvas.addEventListener("click",()=>{var a;if(a=this.isActive){if(this.j<(Za[this.i]??[]).length-1)this.j++;else switch(this.j=0,this.i){case 0:this.i=1;this.g.ia();U(this.g);break;case 1:this.i=2;T(this.g.T);U(this.g);break;case 2:this.i=3;T(this.g.T);U(this.g);break;default:T(this.g.T),U(this.g)}a=void 0}return a})}v(){if(this.isActive){var a=Za[this.i]??[],b;0<=this.j&&this.j<a.length&&(b=a[this.j]);b&&Ya(this,b.B,b.text,190,50)}}}
function U(a){a.M.isActive=!1;a.h.active=!0}async function bb(){var a=new cb;a.U=await Pa();let {Ma:b,Ga:c}=a.U;a.g=new Ta(()=>new ua(Q(a.U)));a.ga=new Ta(()=>new ua(c));a.h=new ta(a,b,a.g);a.M.start();return a}
class cb{constructor(){this.R=[];this.background=new H;this.M=new ab(this);this.ea=new Xa(this)}update(a,b){let {h:c,background:e,T:d}=this;e.update(a,c.ka);c.update(a,b.x,b.y);for(let f of this.R)f.update(a);this.R=this.R.filter(f=>!f.na()&&!N(f));Ra(this.g,a);Ra(this.ga,a);V(this.g.$.filter(f=>f.active&&!f.G),this.R.filter(f=>!f.G),(f,g)=>{g.ja(f.o);K(f,6,1)});V([this.h],this.R,(f,g)=>{f.ja(g.Na)});V([this.h],this.ga.$.filter(f=>f.active&&!f.G),(f,g)=>{100*Math.random()<f.K||f.ja(g.o);K(g,6,1)});
d&&d.update(a)}v(a){this.ea.isActive?this.ea.v(a):(this.background.v(a),this.R.forEach(b=>b.v(a)),this.h.v(a),this.T&&this.T.v(),Sa(this.g,a),Sa(this.ga,a),this.M.isActive&&this.M.v())}ia(){this.M.isActive=!1;this.h.active=!0;this.T=new za(this);ya(this.T)}}class db{constructor(a){this.g=a}ha(){c2d.addEventListener("click",()=>{window.location.reload()})}oa(a){v("Game Over",24,y(),50);v("You made it",18,y(),100);v("to level",18,y(),115);v(this.g.toString(),24,y(),150);w("Back to Menu",a)}}
let eb=440*Math.pow(Math.pow(2,1/12),-9),fb=/^[0-9.]+$/,gb=/\s+/,hb=/(\d+)/,ib={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{ib[c]=b})});function jb(a){return fb.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}
class kb{constructor(a){let [b,c]=a.split(gb);a=b.split(hb);this.frequency=eb*Math.pow(Math.pow(2,1/12),ib[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=jb(c)||0}}function lb(a){let b=a.D;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let e=a.j.createBiquadFilter();e.type="peaking";e.frequency.value=c;b.connect(e);b=e;a.fa.push(e)});b.connect(a.Z);b.connect(a.W)}function mb(a,...b){b.forEach(c=>{a.i.push(c instanceof kb?c:new kb(c))})}
function Z(a,b=a.j.currentTime){a.createOscillator();a.g.start(b);a.i.forEach((c,e)=>{c=b;let d=60/220*a.i[e].duration,f=d*(1-(a.u||1E-11));a.g?.frequency.setValueAtTime(a.i[e].frequency,c);if(a.l&&a.i[e].frequency){let g=a.i[e<a.i.length-1?e+1:0];a.g?.frequency.setValueAtTime(a.i[e].frequency,c+(f-Math.min(f,60/220*a.l)));a.g?.frequency.linearRampToValueAtTime(g.frequency,c+f)}a.g?.frequency.setValueAtTime(0,c+f);b=c+d});a.g.stop(b);a.g.onended=()=>Z(a,b)}
class nb{constructor(a,b){this.i=[];this.u=this.l=0;this.P="square";this.g=null;this.fa=[];this.j=a;this.D=this.j.createGain();this.W=this.j.createGain();this.Z=this.j.createGain();lb(this);b&&mb(this,...b)}createOscillator(){this.stop();this.g=this.j.createOscillator();this.g.type=this.P;this.g.connect(this.D)}connect(a){this.W.connect(a);this.Z.connect(a)}stop(){this.g&&(this.g.onended=null,this.g.stop(),this.g.frequency.cancelScheduledValues(0),this.g=null)}}
class ob{constructor(){this.volume=.15;this.u=!1;this.g=new AudioContext;this.D=this.g.createGain();this.j=this.g.createDynamicsCompressor();this.D.connect(this.g.destination);this.D.gain.value=this.volume;this.j.ratio.value=4;this.j.threshold.value=-12;this.j.connect(this.D);this.l=new nb(this.g,"F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;B4 q;F#4 q;C#5 q;F#4 q;E5 q;- q;E5 q;C#5 q;F#5 q;F#4 q;C#5 q;F#4 q;E5 q;- q;G#4 q;A4 q;F#4 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;- q;C5 q;E5 q;C5 q;A4 q;E5 q;A4 q;G5 q;- q;E5 q;G5 q;A5 q;A4 q;E5 q;A4 q;G5 q;A5 q;G5 q;F5 q;D5 q".split(";"));
this.l.u=.3;this.l.l=.02;this.i=new nb(this.g,"F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;F#2 h;F#2 h;F#2 h;F#2 h;B1 h;B1 h;C#2 h;C#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h;A2 h;A2 h;A2 h;A2 h;E2 h;E2 h;F#2 h;F#2 h".split(";"));this.i.u=.1;this.i.l=.2;this.i.P="sawtooth";this.l.connect(this.j);this.i.connect(this.j)}stop(){this.l.stop();this.i.stop();this.u=!1}}function pb(a){N(a.g.h)&&(z.active||z.start(1,0,.5,()=>{I(new db(a.g.T.X));z.start(0,1,.5)}))}
class qb{constructor(){this.j=n.g}async ha(){720>=window.innerWidth&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen());var a=this.i=new ob;if(!a.u){var b=a.g.currentTime;Z(a.l,b);Z(a.i,b);a.u=!0}this.g=await bb();z.start(0,1,1)}oa(a){this.g&&(this.g.update(a,n.u),this.g.v(this.j),pb(this))}ua(){this.i.stop()}}let rb=new qb;
class ra{constructor(){this.va=null}ia(){z.start(1,0,.5,()=>{I(rb)})}async ha(){c2d.addEventListener("click",this.ia)}oa(a){v("Benji",28,y()+15,110);n.ba("Super",18,y()-30,94,"#fff","center","#ee2626",3,Math.PI/-20);let {g:b}=n;b.save();b.font='900 10px "Tahoma"';b.textAlign="center";b.fillStyle="#f01b1bce";b.fillText("js13k 2025",35,n.j-10);b.restore();n.ba("by hseager",9,n.i-35,n.j-11,"#f0f0f0c7");w("Start Game",a,180)}ua(){c2d.removeEventListener("click",this.ia)}}J=new qa(...[]);
let sb=performance.now(),tb=new H;(()=>{function a(b){let c=(b-sb)/1E3;sb=b;n.g.clearRect(0,0,n.i,n.j);tb.update(c);tb.v(n.g);J.g.oa(c);z.update(c);z.v(n.g);requestAnimationFrame(a)}aa();requestAnimationFrame(a)})();

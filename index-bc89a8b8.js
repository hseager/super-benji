let h=[];function aa(){var a=p.g.canvas;a.addEventListener("click",b=>{let c=a.getBoundingClientRect(),d=a.width/c.width*(b.clientX-c.left);b=a.height/c.height*(b.clientY-c.top);for(let e of h)d>=e.x&&d<=e.x+e.w&&b>=e.y&&b<=e.y+e.za&&e.Ra()})}function ba(a,b,c){h.push({x:10,y:a,w:b,za:90,Ra:c})}
let q=[{aa:1,color:"#00FF66"},{aa:.75,color:"#00BFFF"},{aa:.5,color:"#FFA500"},{aa:.25,color:"#FF3333"},{aa:0,color:"rgba(255, 0, 0, 0)"}],ca=[["blue",["#35a3ec","#4480b8"]],["green",["#7dff99","#44b867"]],["purple",["#ce7bfd","#a144b8"]],["pink",["#ff80df","#b84488"]],["orange",["#eca335","#b88244"]],["red",["#ff5e49","#881c18"]]],r=[["grey","#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" ")],["gold","#201400 #402800 #604000 #805800 #A07000 #d1960d #FF7F00".split(" ")],["green",
"#0D1A0D #163322 #1F4D31 #2A6B44 #3C8C5A #56B27D #7FE6AF".split(" ")],["purple","#1A1026 #2C1E4A #3C2F6B #4E3F8C #6757B0 #8A7ED6 #B5A6FF".split(" ")],["blue","#0A1A33 #122B57 #1B3C7A #25509E #3166C7 #4C82E6 #7FAFFF".split(" ")]],da="#0d0d0d #1a1a1a #2c2c2c #3f3f3f #5a2b00 #8c3b00 #9aacac #ff7b1c #ffb84d #ffd9a3".split(" "),ea="#1A0D00 #331A00 #663311 #994422 #CC6633 #FF9966 #FFD9B3".split(" "),fa="#1A1A00 #2B2B1A #555533 #777755 #999966 #BBBB88 #E0E0C0".split(" "),ha="#1A0000 #330000 #661111 #992222 #CC3333 #FF6666 #FFD9D9".split(" "),
ia=[25,50,0],u=["Starfield Frontiers","Factured Expanse","Rift Horizon","Outer wilds"],v=[6,15,16],ja="#0a0f0a #121a12 #1b261a #253424 #3d583e #4a5c46 #63755f #7f8f7c #a4b1a1 #d0d8ce".split(" "),ka="#111821 #152236 #1b2e45 #2d4668 #22354f #3a567a #5a7ba3 #6f92b8 #90afcf #b0cde6".split(" "),w="#1a130f #2a1f18 #3b2c22 #544036 #6a5448 #7f6a5a #8e8e91 #a5a6a9 #c5c6c9 #e0e1e3".split(" ");
function x(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(288/c.width*(a-c.left),512/c.height*(b-c.top))}function y(a){var b=window.visualViewport?.height||window.innerHeight,c=window.visualViewport?.width||window.innerWidth;.5625<c/b?(c=b,b=.5625*c):(b=c,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}function la(a,b,c,d=18){let e=a.createLinearGradient(0,b-d,0,b);c.forEach(([f,g])=>e.addColorStop(f,g));return e}
function z(a,b,c,d,e){a=a.g;a.save();a.font=`bold ${c-2}px "Courier New"`;a.strokeStyle="#0a0601";a.fillStyle="#0a0601";a.textAlign="center";a.strokeText(b,d,e+1);a.fillText(b,d,e+2);a.font=`bold ${c}px "Courier New"`;a.fillStyle=la(a,e,[[0,"#fff4c1"],[.25,"#ffd84a"],[.5,"#6a2c00"],[.75,"#b65a00"],[1,"#ff9d00"]]);a.fillText(b,d,e);a.restore()}
function A(a,b,c,d,e="white",f="center",g,k,m){let l=p.g;l.save();l.font=`${b}px "Courier New", monospace`;l.textAlign=f;l.fillStyle=e;g&&(l.strokeStyle=g);k&&(l.lineWidth=k);m?(l.translate(c,d),l.rotate(m),g&&l.strokeText(a,0,0),l.fillText(a,0,0)):(g&&l.strokeText(a,c,d),l.fillText(a,c,d));l.restore()}
function ma(a,b,c=400){var d=p;d.l+=b;.75<=d.l&&(d.l=0,d.u=!d.u);d.u&&(b=d.g,b.save(),b.font='bold 24px "Courier New", serif',b.textAlign="center",b.textBaseline="middle",b.strokeStyle="#161616ff",b.strokeText(a,b.canvas.width/2,c+1),b.fillStyle=la(b,c,[[0,"#ffffff"],[.15,"#dcdcdc"],[.3,"#a0a0a0"],[.45,"#f8f8f8"],[.6,"#7a7a7a"],[.8,"#c8c8c8"],[1,"#5a5a5a"]],20),b.fillText(a,b.canvas.width/2,c),b.restore())}
function B(a,b,c,d,e,f=6,g,k){a.beginPath();a.moveTo(b+f,c);a.lineTo(b+d-f,c);a.quadraticCurveTo(b+d,c,b+d,c+f);a.lineTo(b+d,c+e-f);a.quadraticCurveTo(b+d,c+e,b+d-f,c+e);a.lineTo(b+f,c+e);a.quadraticCurveTo(b,c+e,b,c+e-f);a.lineTo(b,c+f);a.quadraticCurveTo(b,c,b+f,c);a.closePath();g&&(a.fillStyle=g,a.fill());k&&(a.strokeStyle=k,a.stroke())}
function na(a,b=25){var c=p;let d=c.g,e=r.find(([g])=>"gold"===g)[1];d.save();let f=d.createRadialGradient(a.x-.3*b,a.y-.3*b,.3*b,a.x,a.y,b);f.addColorStop(0,e[5]);f.addColorStop(.5,e[4]);f.addColorStop(1,e[2]);d.beginPath();d.arc(a.x,a.y,b,0,2*Math.PI);d.fillStyle=f;d.fill();d.lineWidth=4;d.strokeStyle=e[5];d.stroke();d.closePath();d.clip();z(c,"B",b,a.x,a.y+.2*b);d.restore()}function C(){return p.g.canvas.width/2}
class oa{constructor(){this.l=0;this.u=!0;this.g=c2d.getContext("2d");this.m=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.m=x(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.m=x(a.clientX,a.clientY)});window.addEventListener("resize",()=>y(this));y(this)}get i(){return this.g.canvas.width}get j(){return this.g.canvas.height}}let p=new oa;function D(a){var b=E;E.active||b.start(1,0,.5,()=>{a();E.start(0,1,.5)})}
class pa{constructor(){this.e=this.a=0;this.d=1;this.ea=this.oa=this.f=0}start(a,b,c,d){this.oa=a;this.ea=b;this.a=a;this.d=c;this.e=0;this.f=1;this.c=d}update(a){this.f&&(this.e+=a,a=Math.min(this.e/this.d,1),this.a=this.oa+(this.ea-this.oa)*a,1<=a&&(this.f=0,this.c?.()))}H(a){!this.f&&0>=this.a||(a.fillStyle=`rgba(0,0,0,${.8*(1-this.a)})`,a.fillRect(0,0,p.i,p.j))}get active(){return 1===this.f}}let E=new pa;
function F(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,ea:a>>8&255,b:a&255,alpha:b}}function qa(a,b=1){let {r:c,ea:d,b:e}=F(a,b);return`rgba(${c}, ${d}, ${e}, ${b})`}
function ra(){return sa.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var d=Math.max(a,c,b),e=Math.min(a,c,b),f=0,g=0;let k=(d+e)/2;if(d!==e){let t=d-e;g=.5<k?t/(2-d-e):t/(d+e);switch(d){case a:f=(c-b)/t+(c<b?6:0);break;case c:f=(b-a)/t+2;break;case b:f=(a-c)/t+4}f*=60}let {za:m,oa:l,Ta:n}={za:f,oa:100*g,Ta:100*k};a=(m+200*(Math.random()-.5)+360)%360;d=Math.min(100,Math.max(0,n+0*(Math.random()-.5)));
d/=100;c=Math.min(100,Math.max(0,l+10*(Math.random()-.5)))/100*(1-Math.abs(2*d-1));b=c*(1-Math.abs(a/60%2-1));d-=c/2;g=f=e=0;0<=a&&60>a?(e=c,f=b,g=0):60<=a&&120>a?(e=b,f=c,g=0):120<=a&&180>a?(e=0,f=c,g=b):180<=a&&240>a?(e=0,f=b,g=c):240<=a&&300>a?(e=b,f=0,g=c):300<=a&&360>a&&(e=c,f=0,g=b);return`#${Math.round(255*(e+d)).toString(16).padStart(2,"0")}${Math.round(255*(f+d)).toString(16).padStart(2,"0")}${Math.round(255*(g+d)).toString(16).padStart(2,"0")}`})}let sa="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function G(a,b,c,d){b=ta(b,a);return{Wa:a,Z:b,offsetX:0,offsetY:0,$a:c,ta:d}}
function ta(a=.01,b=sa){let c=document.createElement("canvas");c.width=256;c.height=256;let d=c.getContext("2d");d.imageSmoothingEnabled=!1;a=Math.floor(65536*a);for(var e=0;e<a;e++){var f=Math.floor(256*Math.random()),g=Math.floor(256*Math.random());d.fillStyle=b[Math.floor(Math.random()*b.length)];d.fillRect(f,g,1,1)}for(let m=0;2>m;m++){a=d;e=256*Math.random();f=256*Math.random();g=128*Math.random()+256/3;var k=b;for(let l=-256;256>=l;l+=256)for(let n=-256;256>=n;n+=256){let t=a.createRadialGradient(e+
l,f+n,0,e+l,f+n,g);t.addColorStop(0,qa(k[5],.1));t.addColorStop(1,"rgba(0,0,0,0)");a.globalCompositeOperation="screen";a.fillStyle=t;a.beginPath();a.arc(e+l,f+n,g,0,2*Math.PI);a.fill();a.globalCompositeOperation="source-over"}}b=new Image;b.src=c.toDataURL();return b}
class H{constructor(a=75,b=1){this.g=[];this.time=0;let c=ra();this.qa=Math.min(a,350);this.J=b;this.g.push(G(c,.001,.4*this.qa,.2));this.g.push(G(c,.002,.6*this.qa,.3));this.g.push(G(c,.003,this.qa,.4))}update(a,b={x:0,y:0}){this.time+=.1*a;for(let c of this.g)0!==c.Z.width&&0!==c.Z.height&&(c.offsetY=(c.offsetY+c.$a*a-.5*b.y*c.ta)%c.Z.height,0>c.offsetY&&(c.offsetY+=c.Z.height),c.offsetX=(c.offsetX-.4*b.x*c.ta)%c.Z.width)}H(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var d=this.g[0];
a.save();a.fillStyle=d.Wa[0];a.fillRect(0,0,b,c);for(let f of this.g)if(f.Z.complete&&(d=a.createPattern(f.Z,"repeat"))){a.save();var e;a:{for(e=v.length-1;0<=e;e--)if(this.J>=v[e]){e=ia[e];break a}e=0}a.translate(f.offsetX+20*Math.sin(this.time*e+2*f.ta)*f.ta,f.offsetY);a.fillStyle=d;a.fillRect(-f.Z.width/4,-f.Z.height,b+100,c+f.Z.height);a.restore()}a.restore()}}function ua(a){var b=I,c=[];b.g.Ja?.();b.g=a;b.g.ra?.(...c)}class va{constructor(...a){this.g=new wa;this.g.ra?.(...a)}}let I;
function J(a,b=8,c=12){if(!a.L){a.pa={x:0,y:0};a.L=!0;for(let d=0;d<b;d++){let e=400*(Math.random()-.5),f=Math.random()*Math.PI*2;a.m.push({x:a.x+a.width/2,y:a.y+a.height/2,eb:Math.cos(f)*e,fb:Math.sin(f)*e,Da:Math.random()*Math.PI*2,Ya:8*(Math.random()-.5),alpha:1,size:c,ab:Math.floor(Math.random()*(a.F.width-c)),bb:Math.floor(Math.random()*(a.F.height-c))})}}}function K(a,b){for(let c of a.m)c.x+=c.eb*b,c.y+=c.fb*b,c.Da+=c.Ya*b,c.alpha-=1.5*b;a.m=a.m.filter(c=>0<c.alpha)}
function L(a,b){for(let c of a.m)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.Da),b.drawImage(a.F,c.ab,c.bb,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function M(a){return a.L&&0===a.m.length}class xa{constructor(a,b,c,d=0,e=0){this.m=[];this.L=!1;this.pa={x:0,y:0};this.F=a;this.x=b;this.y=c;this.width=d;this.height=e;this.active=!0}Aa(){return 0>this.x+this.width||this.x>p.i||0>this.y+this.height||this.y>p.j}}
function N(a,b,c,d=a.g,e){if(a.active&&a.Ea){var f=a.Ea.get();f&&(e&&(f.F=O(a.D.V,e)),e=0>=d.y?a.y:a.y+a.height,f.v=b,f.speed=c,b=e,c=d.x,d=d.y,f.x=a.x+a.width/2+a.Fa,f.y=b,f.wa=c,f.xa=d,f.active=!0)}}
function ya(a,b,c,d){if(a.active)if("burst"===a.O)0<a.S?(a.M-=b,0>=a.M&&(N(a,c,d,a.g,a.T),a.S--,a.M=a.Na),0>=a.S&&(a.i=Math.max(.05,a.A))):(a.i-=b,0>=a.i&&(a.S=a.Ma,a.M=0));else if(a.i-=b,0>=a.i){switch(a.O){case "single":N(a,c,d,a.g,a.T);break;case "spread":b=[-.3,0,.3];var e=Math.hypot(a.g.x,a.g.y),f=a.g.x/e;e=a.g.y/e;for(var g of b){b=Math.cos(g);var k=Math.sin(g);N(a,c,d,{x:f*b-e*k,y:f*k+e*b},a.T)}break;case "megaspread":b=[-.6,-.3,0,.3,.6];g=Math.hypot(a.g.x,a.g.y);f=a.g.x/g;g=a.g.y/g;for(e of b)b=
Math.cos(e),k=Math.sin(e),N(a,c,d,{x:f*b-g*k,y:f*k+g*b},a.T);break;case "boss":b=[-.5,-.4,-.2,0,.2,.4,.5];e=Math.hypot(a.g.x,a.g.y);g=a.g.x/e;e=a.g.y/e;for(f of b)b=Math.cos(f),k=Math.sin(f),b={x:g*b-e*k,y:g*k+e*b},b.x+=.5*(Math.random()-.5),k=Math.hypot(b.x,b.y),b.x/=k,b.y/=k,N(a,c,d,b,a.T)}a.i=Math.max(.05,a.A)}}function za(a,b){let c=Math.max(-5,Math.min(5,4*a.pa.x)),d=a.width/2;for(let e=0;e<a.width;e++)b.drawImage(a.F,e,0,1,a.height,a.x+e,a.y+Math.floor((e-d)/d*c),1,a.height)}
class Aa extends xa{constructor(a,b,c,d,e,f,g){super(b,d,e,f,g);this.fa={x:0,y:0};this.Fa=0;this.active=!0;this.i=0;this.A=.1;this.g={x:0,y:-1};this.O="single";this.M=this.S=0;this.Na=.1;this.Ma=3;this.T="red";this.D=a;this.F=b;this.Ea=c}}function P(a,b){a.s+b>a.C?a.s=a.C:a.s+=b}function Ba(a){return 0>=a.ia&&a.L&&0===a.m.length}
class Ca extends Aa{constructor(a,b,c){super(a,b,c,C()-b.width/2,.5*p.j,b.width,b.height);this.ia=9;this.Fa=-2;this.l="#00bfff";this.U=150;this.s=this.C=this.N=100;this.A=.6;this.v=10;this.G=200;this.j=this.R=this.K=0;this.O="single";this.T="blue";this.sa="grey";this.F=b}update(a,b,c){if(this.L)K(this,a);else{0<this.R&&this.s<this.C&&(this.j+=a,5<=this.j&&(this.s+=Math.min(this.R,40),this.s>this.C&&(this.s=this.C),this.j=0));b-=this.x+this.width/2;c=c-(this.y+this.height/2)-28;var d=Math.hypot(b,
c);4<d&&(this.x+=b/d*Math.min(400,this.U)*a,this.y+=c/d*Math.min(400,this.N)*a);this.pa={x:this.x-this.fa.x,y:this.y-this.fa.y};this.fa={x:this.x,y:this.y};a:{b=this.s/this.C;b=Math.max(0,Math.min(1,b));for(var e=0;e<q.length-1;e++)if(c=q[e],d=q[e+1],b<=c.aa&&b>=d.aa){b=(b-d.aa)/(c.aa-d.aa);c=F(c.color);let g=F(d.color);d=c.alpha+(g.alpha-c.alpha)*(1-b);e=Math.round(c.ea+(g.ea-c.ea)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+e.toString(16).padStart(2,
"0")+f.toString(16).padStart(2,"0");b=qa(b,d);break a}b=q[q.length-1].color}this.l=b;ya(this,a,this.v,this.G);this.F=Q(this.D.V,this.sa)}}H(a){if(this.L)L(this,a);else{a.save();if(this.F){var b=document.createElement("canvas");b.width=this.width;b.height=this.height;var c=b.getContext("2d");c.drawImage(this.F,0,0,this.width,this.height);c.globalCompositeOperation="source-in";c.fillStyle=this.l;c.fillRect(0,0,this.width,this.height);a.save();a.globalAlpha=.8;a.filter="blur(20px)";a.drawImage(b,this.x,
this.y,this.width,this.height);a.restore()}b=this.x+this.width/2;c=this.y+this.height+-2;var d=a.createLinearGradient(b,c,b,c+20);d.addColorStop(0,"rgba(0, 180, 255, 0.9)");d.addColorStop(.4,"rgba(255, 255, 255, 0.8)");d.addColorStop(1,"rgba(255, 140, 0, 0)");a.fillStyle=d;d=20+15*Math.random();a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+d);a.lineTo(b+1,c);a.closePath();a.fill();za(this,a);a.restore()}}va(a){this.s-=a;0>=this.s&&!this.L&&(this.ia--,J(this,40),Da(this.D.ba));a=this.D.ba;R(a.g,"square",
600,a.g.currentTime,.15,a.i,.6)}}class Ea extends xa{constructor(a){super(a,0,0);this.active=!1;this.speed=this.v=1;this.xa=this.wa=0;this.F=a}H(a){this.L?L(this,a):a.drawImage(this.F,this.x,this.y)}update(a){this.L?(K(this,a),M(this)&&(this.active=this.L=!1)):(this.x+=this.wa*this.speed*a,this.y+=this.xa*this.speed*a)}}
class Fa extends Aa{constructor(a,b,c,d,e,f,g,k,m,l,n){super(a,b,c,k,m,b.width,b.height);this.La="#ffb3007c";this.u=12;this.N=10;this.j=this.ca=this.Ga=this.da=0;this.Xa=.5;this.A=3.5;this.g={x:0,y:1};this.l=0;this.T="red";this.s=this.C=d;a=document.createElement("canvas");a.width=this.F.width+4*this.u;a.height=this.F.height+4*this.u;b=a.getContext("2d");if(!b)throw Error("Failed to get 2D context");b.shadowColor=this.La;b.shadowBlur=this.u;b.drawImage(this.F,2*this.u,2*this.u);this.Oa=a;this.j=60*
(Math.random()-.5);this.v=e;this.G=g;this.ja=l;this.O=n;this.A=f+.3*(2*Math.random()-1);this.i=Math.random()*this.A}update(a){if(this.L)K(this,a);else{var b=this.x;"none"!==this.ja&&(this.ca-=a,0>=this.ca&&(this.ca=.5+1.5*Math.random(),this.Ga=100*(Math.random()-.5)),this.da+=(this.Ga-this.da)*a*2,this.y+=Math.max(10,this.N+this.da)*a);switch(this.ja){case "straight":this.l-=a;0>=this.l&&(this.j=30*(.5>Math.random()?-1:1),this.l=.5);this.x+=this.j*a;break;case "sine":this.x+=1.5*Math.sin(this.y/20);
break;case "zigzag":this.l-=a,0>=this.l&&(this.j=50*(.5>Math.random()?-1:1),this.l=.5),this.x+=this.j*a}0>this.x&&(this.x=0,this.j*=-1);this.x+this.width>p.i&&(this.x=p.i-this.width,this.j*=-1);this.pa.x=(this.x-b)/a;ya(this,a,this.v,this.G)}}H(a){this.L?L(this,a):(a.save(),a.drawImage(this.Oa,this.x-2*this.u,this.y-2*this.u),a.drawImage(this.F,this.x,this.y),za(this,a),a.restore())}va(a){this.s-=a;0>=this.s&&(J(this),Da(this.D.ba))}Aa(){return 0>this.x+this.width||this.x>p.i||this.y>p.j}}
class Ga extends Fa{constructor(a,b,c,d,e,f,g){super(a,b,c,d,e,1.4,f,g,20,"none","boss");this.g={x:0,y:1}}}function Ha(a,b){b=a.ya+1.75*(a.J-1)+1.75*b;for(let d=0;d<b;d++){var c=void 0;c=a.J;c=5>c?[.7,.25,.05]:10>c?[.5,.4,.1]:15>c?[.3,.5,.2]:[.2,.5,.3];let e=Math.random();c=e<c[0]?a.$[0]:e<c[0]+c[1]?a.$[1]:a.$[2];c=new Fa(a.g,c.F,a.g.ha,c.na*(1+.3*a.J),c.ma*(1+.08*a.J),3.5,c.G*(1+.1*a.J),Math.random()*(p.i-c.F.width),-40-100*Math.random(),c.ja,c.O);a.g.W.push(c)}}
function S(a){a.j=0;a.g.background=new H(1.1*a.g.background.qa,a.J);a.l=4;a.g.W=[];if(15<=a.J&&0===(a.J-15)%5){var b=Math.floor((a.J-15)/5)+1;let e=1400*Math.pow(1.75,b);var c=10*Math.pow(1.75,b),d=80*Math.pow(1.75,b);console.log(1.4*Math.pow(1.75,b));b=e;a.m=!0;d=new Ga(a.g,a.g.V.Ia,a.g.ha,b,c,d,p.i/2-a.g.V.Ia.width/2);a.g.W.push(d)}else 0===a.J%6&&a.D++,a.j++,Ha(a,a.j)}
function Ia(a){a.J++;var b=a.g.Y;v.includes(a.J)?(b.isActive=!0,b.g.paused=!0):(b.isActive=!1,b.g.paused=!1);a.g.Y.isActive||S(a)}function T(a){a.i.push({x:Math.random()*p.i,y:Math.random()*p.j*.4,Za:a.u})}
function Ja(a){var b=a.g.W[0];if(b){b.s<=.75*b.C&&0>=a.i.length&&T(a);b.s<=.5*b.C&&1>=a.i.length&&T(a);b.s<=.25*b.C&&2>=a.i.length&&T(a);for(let g of a.i)if(.02>Math.random()){b=a;var c=g;let k=b.g.ha.get();if(k){k.v=10;k.speed=108;var d=k,e=c.y,f=Math.cos(Math.random()*Math.PI*2);d.x=c.x;d.y=e;d.wa=f;d.xa=1;d.active=!0;k.F=O(b.g.V,"purple")}}}}function Ka(a){a.m=!1;a.i=[];D(()=>a.g.la.start())}
class La{constructor(a){this.j=this.J=0;this.D=1;this.ya=2;this.l=0;this.m=!1;this.i=[];this.u=0;this.g=a;this.$=[{F:this.g.V.Qa,ja:"straight",O:"single",G:90,ma:10,na:12},{F:this.g.V.Va,ja:"sine",O:"burst",G:108,ma:11,na:11},{F:this.g.V.Pa,ja:"zigzag",O:"spread",G:135,ma:10,na:10}]}update(a){this.u+=a;let b=0===this.g.W.length,c=!this.g.la.isActive&&!this.g.ga.isActive&&!this.g.Y.isActive;this.m&&Ja(this);this.m&&b&&Ka(this);b&&c&&(this.j<this.D?(this.j++,Ha(this,this.j)):D(()=>{this.g.la.start()}));
0<this.l&&(this.l-=a)}H(){if(this.m){var a=this.g.W[0];if(a){var b=p.g,c=p.i,d=(b.canvas.width-c)/2;a=a.s/a.C*c;b.fillStyle="#444";b.fillRect(d,5,c,10);b.fillStyle="#e33";b.fillRect(d,5,a,10);b.strokeStyle="#fff";b.lineWidth=2;b.strokeRect(d,5,c,10)}}for(var e of this.i){d=e.x;a=e.y;b=this.u-e.Za;c=p.g;c.save();c.translate(d,a);for(d=0;5>d;d++){a=d/5*Math.PI*2;for(let g=0;15>g;g++){let k=g/15;var f=30*k;let m=a+2.5*k+.75*b,l=Math.cos(m)*f;f*=Math.sin(m);c.fillStyle=`rgba(150, 100, 255, ${1-k})`;c.beginPath();
c.arc(l,f,1.5,0,2*Math.PI);c.fill()}}c.restore()}if(0<this.l){e=Math.min(this.l/.5,1);p.g.save();p.g.globalAlpha=e;e=this.J;b=u.length-1;c=Math.floor((e-1)/5);let {Ha:g,Ka:k}=c<b?{Ha:u[c],Ka:(e-1)%5+1}:{Ha:u[b],Ka:e-5*b};z(p,g,24,p.i/2,.2*p.j);z(p,`Zone ${k}`,32,p.i/2,.275*p.j);p.g.restore()}}}
function U(a,b,c){for(let d=a.length-1;0<=d;d--){let e=a[d];if(e.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&e&&g&&e.x<g.x+(g.width||0)&&e.x+(e.width||0)>g.x&&e.y<g.y+(g.height||0)&&e.y+(e.height||0)>g.y){c(e,g);break}}}}function Ma(a,b){for(let c of a.ka)c.active&&(c.update(b),c.Aa()&&(c.active=!1))}function Na(a,b){for(let c of a.ka)c.active&&c.H(b)}
class Oa{constructor(a){this.ka=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.ka.push(c)}}get(){for(let a of this.ka)if(!a.active)return a.active=!0,a.L=!1,a;return null}}
class Pa{constructor(a){this.i=[{o:"Common",name:"Pulse Lazer MK-II",description:"Damage +4, Fire Rate +10%",apply:async()=>{this.g.h.v+=4;this.g.h.A*=.9;this.g.h.T="green"}},{o:"Common",name:"A.F.K Simulator",description:"Damage +3, Proj Speed 5%",B:"Spread Shot",apply:async()=>{this.g.h.v+=3;this.g.h.G*=1.05;this.g.h.T="orange";this.g.h.O="spread"}},{o:"Common",name:"Starburst",description:"Damage +3, Fire Rate 5%",B:"Burst Shot",apply:async()=>{this.g.h.v+=3;this.g.h.A*=.95;this.g.h.O="burst"}},
{o:"Rare",name:"Nebula Railcoil",description:"Damage +5, Proj Speed +20%",B:"Burst Shot",apply:()=>{this.g.h.v+=5;this.g.h.G*=1.2;this.g.h.T="purple";this.g.h.O="burst"}},{o:"Epic",name:"Iron Fang Torpedo",description:"Damage +6, Fire Rate +20%",B:"Spread Shot",apply:()=>{this.g.h.v+=6;this.g.h.A*=.8;this.g.h.T="orange";this.g.h.O="spread"}},{o:"Epic",name:"Modified Sprinkler",description:"Damage -4, Fire Rate +60%",B:"Mega Shot",apply:()=>{this.g.h.v-=4;this.g.h.A*=.6;this.g.h.T="pink";this.g.h.O=
"megaspread"}},{o:"Legendary",name:"Glass Cannon",description:"Damage +8 HP -40,",B:"Mega Shot",apply:()=>{this.g.h.v+=8;this.g.h.s-=30;this.g.h.T="orange";this.g.h.O="megaspread"}},{o:"Common",name:"Mithril Plating",description:"HP +10, Regen +3",B:"Evasion +5%",apply:()=>{this.g.h.C+=20;this.g.h.s+=20;this.g.h.R+=5;this.g.h.K+=5;this.g.h.sa="purple"}},{o:"Common",name:"Adamite Panels",description:"HP +15, Regen +2",apply:()=>{this.g.h.C+=20;this.g.h.s+=20;this.g.h.R+=5;this.g.h.sa="green"}},{o:"Rare",
name:"Torx\u2019s Reinforced Shell",description:"HP +20, Regen +4",apply:()=>{this.g.h.C+=20;this.g.h.s+=20;this.g.h.R+=4}},{o:"Epic",name:"Aether Veil",description:"Evasion +15%",apply:()=>{this.g.h.K+=15}},{o:"Legendary",name:"Maggie's Cloak",description:"HP +15, Regen +6",B:"Evasion +30%",apply:()=>{this.g.h.C=15;this.g.h.R+=6;this.g.h.K+=30;this.g.h.sa="blue"}},{o:"Common",name:"Starwing Stabilizers",description:"Move Speed +12%",apply:()=>{this.g.h.U*=1.12;this.g.h.N*=1.12}},{o:"Common",name:"Advanced Wings",
description:"Move Speed +10%",B:"Fire Rate +5%",apply:()=>{this.g.h.U*=1.1;this.g.h.N*=1.1;this.g.h.A*=.95}},{o:"Rare",name:"Meteor Thrusters",description:"Move Speed +20%",B:"Evasion +5%",apply:()=>{this.g.h.U*=1.2;this.g.h.N*=1.2;this.g.h.K+=5}},{o:"Epic",name:"Plasma Rocket Fuel",description:"Move Speed +30%",B:"Evasion 10%",apply:()=>{this.g.h.U*=1.3;this.g.h.N*=1.3;this.g.h.K+=10}},{o:"Legendary",name:"Voidstep Drive",description:"Move Speed +25%",B:"Evasion +10%",apply:()=>{this.g.h.U*=1.3;
this.g.h.N*=1.3;this.g.h.K+=10}},{o:"Common",name:"Hunter\u2019s Instinct",description:"Damage +4, Evasion +2%",apply:()=>{this.g.h.v+=4;this.g.h.K+=2}},{o:"Common",name:"Lazer pointer attachment",description:"Fire Rate +8%",B:"Evasion 3%",apply:()=>{this.g.h.A*=.92;this.g.h.K+=3}},{o:"Rare",name:"Plasma Capacitor",description:"Fire Rate +15%",B:"Proj Speed +20%",apply:()=>{this.g.h.A*=.85;this.g.h.G*=1.2}},{o:"Rare",name:"Reverse Polarity",description:"Proj Speed +30%",B:"Move Speed -15%",apply:()=>
{this.g.h.G*=1.3;this.g.h.U*=.85;this.g.h.N*=.85}},{o:"Epic",name:"Warp Core Fragment",description:"Fire Rate +30%",B:"Proj Speed -40%",apply:()=>{this.g.h.A*=.7;this.g.h.G*=.6}},{o:"Legendary",name:"Jackalbane Core",description:"Damage +7, HP +30",B:"Proj Speed 10%",apply:()=>{this.g.h.v+=7;this.g.h.C+=30;this.g.h.s+=30;this.g.h.G*=1.1}},{o:"Common",name:"Left-over Sushi",description:"Heal +10, Regen +1",apply:()=>{this.g.h.R+=1;P(this.g.h,15)}},{o:"Common",name:"Tuna Suprise",description:"Heal +15 HP +5",
apply:()=>{this.g.h.C+=5;P(this.g.h,5)}},{o:"Rare",name:"Iron Jackal Bru",description:"Heal +25, Regen +3",B:"Fire Rate +10%",apply:()=>{this.g.h.R+=3;P(this.g.h,25);this.g.h.A*=.9}},{o:"Legendary",name:"Stardust",description:"Heal +80, Fire Rate +20%",apply:()=>{P(this.g.h,80);this.g.h.A*=.8}}];this.g=a}}function Qa(a,b){b.save();let c=b.canvas.width-20;h=[];a.l.forEach((d,e)=>{e=200+105*e;a.u(b,10,e,c,90,d);a.j&&ba(e,c,()=>{a.S(d)})});b.restore()}
class Ra{constructor(a){this.j=this.isActive=!1;this.l=[];this.g=a}start(){this.j=this.isActive=!0;this.l=this.D();var a=this.g.Y;a.m=a.D[Math.floor(Math.random()*a.D.length)];a.l=a.u[Math.floor(Math.random()*a.u.length)];h=[]}H(a){this.isActive&&(a.save(),a.fillStyle="rgba(0, 0, 0, 0.7)",a.fillRect(0,0,a.canvas.width,a.canvas.height),z(p,this.M(),24,C(),30),this.m(),Qa(this,a),a.restore())}}
class Sa extends Ra{constructor(a){super(a);this.i=[];this.i=(new Pa(a)).i}M(){return"Zone Cleared!"}m(){Ta(this.g.Y,"Torx")}D(){let a=[],b=c=>{let d=this.i.filter(e=>e.o===c&&!a.includes(e));d.length||(d=this.i.filter(e=>"Common"===e.o&&!a.includes(e)));d.length||(d=this.i.filter(e=>!a.includes(e)));return d[Math.floor(Math.random()*d.length)]};for(;3>a.length;){let c=100*Math.random();a.push(b(12>=c?"Legendary":30>=c?"Epic":55>=c?"Rare":"Common"))}return a}u(a,b,c,d,e,f){let g="white";"Rare"===
f.o?g="#60a5fa":"Epic"===f.o?g="#c084fc":"Legendary"===f.o&&(g="#fb923c");B(a,b,c,d,e,6,"#222",g);c+=18;a.fillStyle=g;a.font="16px Courier New";a.fillText(`[${f.o}]`,b+10,c);c+=18;a.font="bold 16px Courier New";a.fillStyle="white";a.fillText(f.name,b+10,c);a.font="16px Courier New";c+=18;a.fillText(f.description,b+10,c);f.B&&a.fillText(f.B,b+10,c+18)}S(a){a.apply();Ua(this.g.ba);this.j=!1;this.i=this.i.filter(b=>"Common"===b.o?!0:b!==a);D(()=>{h=[];this.isActive=!1;Ia(this.g.I)})}}
let Va={[0]:[{P:"Maggie",text:"Benji, the Iron Jackal has stolen the Warp Core."},{P:"Maggie",text:"Who knows what he plans to do with it, but it can't be good."},{P:"Torx",text:"That core could power a thousand fleets\u2026"},{P:"Benji",text:"Then what are we waiting for? After him!"}],[1]:[{P:"Maggie",text:"The closer we get, the more concerning some of these readings are. "},{P:"Torx",text:"It looks like space-time itself is... distorting..."},{P:"Jackal",text:"Hahaha, you should be running rather than chasing me!"},
{P:"Benji",text:"You will regret stealing The Warp Core once we are done with you Jackal!"}],[2]:[{P:"Torx",text:"We're close, but I hope we're ready, this area looks very unstable."},{P:"Jackal",text:"Just in time for us to test the Mega Drive! Hahaha"},{P:"Maggie",text:"Watch out Benji! He's turned the Warp Core into a weapon!"},{P:"Benji",text:"This stops now Jackal! Feel my claws"}],[4]:[{P:"Maggie",text:"It\u2019s done. The Jackal is defeated, and The Core is safe."},{P:"Torx",text:"There's plenty of Iron Jackal's allies left to clean up."},
{P:"Benji",text:"Let's see how far we can get!"}]};function Ta(a,b){a.l&&a.m&&("Maggie"===b?a.l&&V(a,"Maggie",a.l,120,65):V(a,"Torx",a.m,120,65))}function Wa(a){if(a.j<(Va[a.i]??[]).length-1)a.j++;else switch(a.isActive=!1,a.j=0,a.i){case 0:a.i=1;D(()=>{a.g.ua();a.g.paused=!1});break;case 1:a.i=2;D(()=>{S(a.g.I);a.g.paused=!1});break;case 2:a.i=4;D(()=>{S(a.g.I);a.g.paused=!1});break;default:D(()=>{S(a.g.I);a.g.paused=!1})}}
function V(a,b,c,d,e){let f=p.g;var g=c.split(" ");let k={x:25,y:d-75,width:40,height:52.5};f.font="bold 12px Courier New";let m=p.i-20-10;c=[];let l="";for(let n of g)g=l+n+" ",f.measureText(g).width>m?(c.push(l.trim()),l=n+" "):l=g;l.trim()&&c.push(l.trim());B(f,10,d,p.i-20,Math.max(e,16*c.length+20),4,"#1f1722");a=a.g.V;Xa(f,b,"Maggie"===b?a.Ua:"Torx"===b?a.cb:"Jackal"===b?a.Sa:a.Ca,k);b=d+5+12;for(let n of c)A(n,12,20,b,"white","left"),b+=16}
function Xa(a,b,c,{x:d,y:e,width:f,height:g}){c&&(a.save(),a.drawImage(c,d,e,f,g),a.strokeStyle="white",a.lineWidth=1,a.strokeRect(d+.5,e+.5,f-1,g-1),a.strokeRect(d,e,f,g),A(b,12,d+f/2,e+g+15,"white","center"),a.restore())}
class Ya{constructor(a){this.isActive=!0;this.j=this.i=0;this.D="Scrap secured. Upgrade time!;Jackal\u2019s junk is our treasure.;Zone clear. Let\u2019s bolt on something new.;Bolted on. Hope it stays put.;Hull patched. Tape counts as armor, right?;Think Maggie prefers chrome or silver?;System update: paws-itively improved.".split(";");this.u=["You\u2019re betting with lives, Benji - and you don\u2019t have many left.","Nine lives sound plenty\u2026 until you spend them like pocket change.","Each choice shaves another chance off your nine lives.",
"Benji, you\u2019re not rolling dice \u2014 you\u2019re rolling your life away.","You're lucky that cats get 9 lives to gamble with."];this.l=this.m=null;this.g=a}start(){p.g.canvas.addEventListener("click",()=>this.isActive&&Wa(this))}H(){if(this.isActive){var a=Va[this.i]??[],b;0<=this.j&&this.j<a.length&&(b=a[this.j]);b&&V(this,b.P,b.text,p.j-65,50)}}}
class Za{constructor(a){this.i=[{X:3,description:"Enemies have increased",B:"projectile speed",apply:async()=>{this.g.I.$=this.g.I.$.map(b=>{b.G*=1.5;return b})}},{X:8,description:"Warp to Rift Horizon",B:"(Danger!)",apply:async()=>{this.g.I.J=15;S(this.g.I)}},{X:2,description:"Enemies deal more damage",apply:async()=>{this.g.I.$=this.g.I.$.map(b=>{b.ma*=1.5;return b})}},{X:2,description:"Enemies have more health",apply:async()=>{this.g.I.$=this.g.I.$.map(b=>{b.na*=1.5;return b})}},{X:1,description:"Increased enemy count",
apply:async()=>{this.g.I.ya*=1.5}},{X:6,description:"Benji deals more damage",B:"Benji has less max health",apply:async()=>{this.g.h.C/=1.5;this.g.h.v*=1.5}},{X:0,description:"Last Chance",B:"Megashot",apply:async()=>{this.g.h.O="megaspread"}}];this.g=a}}
class $a extends Ra{constructor(a){super(a);this.i=[];this.i=(new Za(a)).i}update(){if(M(this.g.h)){this.g.paused=!0;this.start();var a=this.g.h;a.s=a.C;a.L=!1;a.m=[];a.F=Q(a.D.V)}}M(){return"Life Exchange"}m(){Ta(this.g.Y,"Maggie");z(p,this.g.h.ia.toString(),38,C(),92);na({x:C()+45,y:80})}D(){let a=this.g.h.ia,b=this.i.filter(d=>0===d.X),c=this.i.filter(d=>0<d.X&&d.X<a);for(let d=c.length-1;0<d;d--){let e=Math.floor(Math.random()*(d+1));[c[d],c[e]]=[c[e],c[d]]}return 1===a&&0<b.length?[b[0]]:c}u(a,
b,c,d,e,f){B(a,b,c,d,e,6,"#222","white");c+=18;z(p,f.X.toString(),24,C()-13,c+10);na({x:C()+13,y:c+3},10);a.fillStyle="white";a.font="16px Courier New";c+=36;a.fillText(f.description,b+10,c);f.B&&a.fillText(f.B,b+10,c+18)}S(a){a.apply();this.g.h.ia-=a.X;Ua(this.g.ba);this.j=!1;D(()=>{h=[];this.isActive=!1;this.g.paused=!1})}}async function ab(a,b){a.ba=b;a.g=new Oa(()=>new Ea(O(a.V)));a.ha=new Oa(()=>new Ea(O(a.V,"red")));a.h=new Ca(a,Q(a.V),a.g);a.Y.start();return a}
class bb{constructor(a){this.W=[];this.paused=!0;this.V=a;this.background=new H;this.Y=new Ya(this);this.la=new Sa(this);this.ga=new $a(this)}update(a,b){let {h:c,background:d,I:e}=this;d.update(a,c.pa);this.ga.update();if(!this.ga.isActive&&!this.la.isActive&&(Ma(this.g,a),Ma(this.ha,a),!this.paused)){c.update(a,b.x,b.y);for(let f of this.W)f.update(a);this.W=this.W.filter(f=>!f.Aa()&&!M(f));U(this.g.ka.filter(f=>f.active&&!f.L),this.W.filter(f=>!f.L),(f,g)=>{g.va(f.v);J(f,6,2)});U([this.h],this.W,
(f,g)=>{f.va(g.Xa)});U([this.h],this.ha.ka.filter(f=>f.active&&!f.L),(f,g)=>{J(g,6,2);100*Math.random()>Math.min(f.K,50)&&f.va(g.v)});e&&e.update(a)}}H(a){this.la.isActive?this.la.H(a):this.ga.isActive?this.ga.H(a):(this.background.H(a),this.W.forEach(b=>b.H(a)),this.h.H(a),this.I&&this.I.H(),Na(this.g,a),Na(this.ha,a),this.Y.isActive&&this.Y.H())}ua(){this.Y.isActive=!1;this.paused=!0;this.I=new La(this);"true"==localStorage.getItem("SUPER_BENJI_hasDied")&&this.ga.start();Ia(this.I)}}
class cb{constructor(a){this.g=a}ra(){localStorage.setItem("SUPER_BENJI_hasDied","true");c2d.addEventListener("click",()=>{window.location.reload()})}Ba(a){z(p,"Game Over",48,C(),100);z(p,"You made it",32,C(),200);z(p,"to level",32,C(),230);z(p,this.g.toString(),48,C(),300);ma("Back to Menu",a)}}let db=440*Math.pow(Math.pow(2,1/12),-9),eb=/^[0-9.]+$/,fb=/\s+/,gb=/(\d+)/,hb={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{hb[c]=b})});
function ib(a){return eb.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}class jb{constructor(a){let [b,c]=a.split(fb);a=b.split(gb);this.frequency=db*Math.pow(Math.pow(2,1/12),hb[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=ib(c)||0}}
function kb(a){let b=a.gain;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let d=a.i.createBiquadFilter();d.type="peaking";d.frequency.value=c;b.connect(d);b=d;a.S.push(d)});b.connect(a.M);b.connect(a.u)}function lb(a,...b){b.forEach(c=>a.j.push(c instanceof jb?c:new jb(c)))}
function mb(a,b,c){b=a.j[b];let d=60/174*b.duration,e=d*(1-(a.l||1E-10));a.gain.gain.cancelScheduledValues(c);a.g.frequency.cancelScheduledValues(c);0<b.frequency?(a.g.frequency.setValueAtTime(b.frequency,c),a.gain.gain.setValueAtTime(1E-4,c),a.gain.gain.exponentialRampToValueAtTime(1,c+.01),a.gain.gain.setValueAtTime(1,c+Math.max(.01,e-.05)),a.gain.gain.exponentialRampToValueAtTime(1E-4,c+e)):(a.gain.gain.cancelScheduledValues(c),a.gain.gain.setValueAtTime(1E-4,c));return c+d}
function W(a,b=a.i.currentTime){if(0!==a.j.length){a.createOscillator();a.gain.gain.setValueAtTime(0,b);a.g.start(b);var c=b;for(b=0;b<a.j.length;b++)c=mb(a,b,c);b=c+.02;a.gain.gain.setValueAtTime(0,c);a.g.stop(b);a.g.onended=()=>W(a,c)}}
class nb{constructor(a,b){this.j=[];this.l=this.D=0;this.m="square";this.g=null;this.S=[];this.i=a;this.gain=this.i.createGain();this.u=this.i.createGain();this.M=this.i.createGain();kb(this);b&&lb(this,...b)}connect(a){this.u.connect(a);this.M.connect(a)}createOscillator(){this.stop();this.g=this.i.createOscillator();this.g.type=this.m;this.g.connect(this.gain)}stop(){if(this.g){try{this.g.onended=null;let a=this.i.currentTime;this.gain.gain.cancelScheduledValues(a);this.gain.gain.setValueAtTime(this.gain.gain.value,
a);this.gain.gain.linearRampToValueAtTime(0,a+.01);this.g.frequency.cancelScheduledValues(a);this.g.stop(a+.02)}catch{}this.g=null}}}function ob(a,b=a.g.currentTime,c){let d=a.g.createOscillator(),e=a.g.createGain();d.type="sine";d.frequency.setValueAtTime(120,b);d.frequency.exponentialRampToValueAtTime(40,b+.08);e.gain.setValueAtTime(c??4,b);e.gain.exponentialRampToValueAtTime(.001,b+.09);d.connect(e).connect(a.i);d.start(b);d.stop(b+.09)}
function pb(a,b=a.g.currentTime,c){var d=a.g.createBuffer(1,.2*a.g.sampleRate,a.g.sampleRate),e=d.getChannelData(0);for(let f=0;f<e.length;f++)e[f]=2*Math.random()-1;e=a.g.createBufferSource();e.buffer=d;d=a.g.createGain();d.gain.setValueAtTime(c??4,b);d.gain.exponentialRampToValueAtTime(.001,b+.2);e.connect(d).connect(a.i);e.start(b);e.stop(b+.2)}
function qb(a,b=a.g.currentTime,c){var d=a.g.createBuffer(1,.05*a.g.sampleRate,a.g.sampleRate),e=d.getChannelData(0);for(let f=0;f<e.length;f++)e[f]=2*Math.random()-1;e=a.g.createBufferSource();e.buffer=d;d=a.g.createGain();d.gain.setValueAtTime(c??2.4,b);d.gain.exponentialRampToValueAtTime(.001,b+.05);e.connect(d).connect(a.i);e.start(b);e.stop(b+.05)}class rb{constructor(a,b){this.g=a;this.i=b}}
function Da(a){let b=a.g,c=b.currentTime;var d=b.createBuffer(1,.3*b.sampleRate,b.sampleRate),e=d.getChannelData(0);for(var f=0;f<e.length;f++)e[f]=2*Math.random()-1;e=b.createBufferSource();e.buffer=d;d=b.createBiquadFilter();d.type="bandpass";d.frequency.value=800;f=b.createGain();f.gain.setValueAtTime(3,c);f.gain.exponentialRampToValueAtTime(.001,c+.3);e.connect(d).connect(f).connect(a.i);e.start(c);e.stop(c+.3);R(b,"sine",100,c,.5,a.i,4);R(b,"sawtooth",55,c,.3,a.i,2)}
function Ua(a){[880,1174,1568].forEach((b,c)=>R(a.g,"sine",b,a.g.currentTime+.1*c,.6,a.i,.5))}
function sb(a){if(!a.ca){a.ca=!0;var b=a.g.currentTime,c=60/174*4;W(a.m,b+8*c);W(a.l,b);var d=a.g.createOscillator();d.type="sine";d.frequency.value=246.94;var e=a.g.createGain();e.gain.value=0;d.connect(e).connect(a.i);d.start();e.gain.setValueAtTime(0,b+64*c);e.gain.linearRampToValueAtTime(.3,b+64*c);a.D.push(d);a.u.push(e);d=a.g.createOscillator();d.type="sine";d.frequency.value=293.66;e=a.g.createGain();e.gain.value=0;d.connect(e).connect(a.i);d.start();e.gain.setValueAtTime(0,b+80*c);e.gain.linearRampToValueAtTime(.3,
b+64*c);a.D.push(d);a.u.push(e);var f=()=>{let g=a.g.currentTime;for(;a.j*a.fa<g+.1;){let k=a.j*a.fa;256<=a.j&&([0,3,6,10,12,15].includes(a.j%16)&&qb(a.S,k),[0,7].includes(a.j%16)&&ob(a.S,k),[4,12].includes(a.j%16)&&pb(a.S,k));a.j++}a.da=window.setTimeout(f,25)};f()}}function R(a,b,c,d,e,f,g){let k=a.createOscillator();k.type=b;k.frequency.setValueAtTime(c,d);a=a.createGain();a.gain.setValueAtTime(g,d);a.gain.exponentialRampToValueAtTime(.001,d+e);k.connect(a).connect(f);k.start(d);k.stop(d+e)}
class tb{constructor(){this.volume=.1;this.j=0;this.da=null;this.D=[];this.u=[];this.ca=!1;this.g=new AudioContext;this.M=this.g.createGain();this.i=this.g.createDynamicsCompressor();this.S=new rb(this.g,this.i);this.M.connect(this.g.destination);this.M.gain.value=this.volume;this.i.ratio.value=4;this.i.threshold.value=-12;this.i.connect(this.M);this.m=new nb(this.g,"D4 q;A4 q;B3 q;- q;- q;- q;- q;- q;- f;D4 q;E4 q;B3 q;- q;- q;- q;- q;- q;- f".split(";"));this.m.l=.2;this.m.D=.2;this.m.m="sine";
this.m.connect(this.i);this.l=new nb(this.g,"B1 h;- h;B1 h;- h;D2 h;- h;D2 h;- h".split(";"));this.l.l=0;this.l.D=0;this.l.m="triangle";let a=this.g.createGain();a.gain.value=1.5;this.l.connect(a);a.connect(this.i);this.fa=60/174/4}stop(){this.m.stop();this.l.stop();this.D.forEach((a,b)=>{b=this.u[b];let c=this.g.currentTime;b.gain.cancelScheduledValues(c);b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(0,c+.05);a.stop(c+.06)});this.D=[];this.u=[];this.ca=!1;this.da&&clearTimeout(this.da);
this.j=0}}function X(a,b,c,d,e,f,g,k){a.g.save();a.g.imageSmoothingEnabled=!1;a.g.drawImage(b,e,f,g,k,c,d,2*g,2*k);a.g.restore()}class ub{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}function vb(a,b){return new Promise((c,d)=>{a.complete&&0!==a.naturalWidth?c(wb(a,b)):(a.onload=()=>{c(wb(a,b))},a.onerror=d)})}
function wb(a,b){let c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.width;c.height=a.height;d.drawImage(a,0,0);a=d.getImageData(0,0,a.width,a.height);let e=a.data;for(let f=0;f<e.length;f+=4){if(0===e[f+3])continue;let g=F(b[Math.min(b.length-1,Math.floor(e[f]/(256/b.length)))]||"#000000");e[f]=g.r;e[f+1]=g.ea;e[f+2]=g.b}d.putImageData(a,0,0);b=new Image;b.src=c.toDataURL();return b}
async function xb(a,b){let c=new Image;c.src=a.canvas.toDataURL();a=await vb(c,b);await a.decode();return a}
async function yb(a){let b=new Image;b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABEBAMAAADD1i77AAAAHlBMVEUAAABcXFza2toUFBMzMzIhISFHR0cODg53d3eenp6oiQ8+AAAABHRSTlMA/vZm6v66FgAABMZJREFUSMedlM9z0kAUx79oSOBGNCx4U8cfV53RGY9BdxN6C2OWtDeim4XeqJMf9gbaMnirHW3Lf+tukkKtevEBk328T96+H7sP/xCfznfKj1tG6qI59QsYvNIbooJdoFku5ARTSjMYrFTPzJVrlgvAvAaoCEMYidZa80bsNpQPY2Gg5dZALkIOUW5xJxjOPMNV5KQ1rQFq0mkaBR4rI7AP+8xRBsN+lIgS8KgYJ5xTykq8f/iYelPAJFdOGkCJI6SUCafepMS9+MqhvloNzi8ilGHFiUdEFHqlZqTfyDOVuYXhlwuGUpyEqiAzt1SazBYinINg/8uJQImYST4UfloBZpBTV2VxeTU7f/ZEijJw4qU2C2vANWlguljK4eZHVzDAmptEekmSAUVdYRjAKsm/xFOPTtBlUFnQMEDD0Za6a4OsMZNByMXc66IxOn6aBcjSguqsgEDHYg2Ei4X0P3eL3N97mvH0WKQeSmvzIVpB1VIyHbEsD/u9LMqOolSUHexgpblSPH/I5GAURYzneRQy4CcaZxjjWozkA4+9UcEZD/MTVSCD4J4D6m6JjAjraLAcsSiXQnfZGZyTNJ5gK860MYtXgob0SOocyHBzQcn0xhF1G4IRLwrdz5lSY2l/ezSQcgd8n6AXj7osDI5XSiVMPnhEmXcD6MAioe8HaGkPCZL+MnTpDrhyAdJ3qCp1olQOY730cRMIFLAmTMXHyj4dEZFg9LuHeLkFTMjxVOJGmpuOPhGSAm0HWhIjyDHfAS39WmzrtztlewzgBLekMbN3tVVAgNviqs9/iqmvlAudAuf7fwGW2tYHcKx+D/7cu10Oi2yOVlWTPwDZjAAr9HBWqg8f3rIb89SfI6PM6oDzCHes28BZ6nOeMW8PXc45cGdrMaubipRrkQfI+Kei2AHtVg1MtX08UQArinTavgbubGogiy75cYEDnOqCyOOth6tr4OCIF5c4sM45T6OivQW+V89FwQseRa12+7HOAlvg8KJqzrxQ9ow3m+3HTzTQ3Fa4bq9pFUVU5IvG6VvlYo6za+Di5GN1EHihZDzHAVWAniy1nJy+q6IcKSIbqcXlp588SnfXqVexllFsNs8zBRCVJ986MJe9yoP5tXy8mSiEUh9bwOnxF2XJY93uu46LfVdpT7dAtwbM9H6Tv3/pu1V+zx5ux0Yvm5dBRqJvE68IgqoDH2pgZrOsDMKKsgd9kmT5GcyiyOWzGtjEYf6xBPjRoe0kWQGkdmxvo9wkvQrA6xlRw8G3YA2kbTv1jWuuvXFaAcZwyeOua8GQn2K7XwX5PR4OZU7lAsrxYBA53FdAUsTd3qKs/4rs7a3yUBA9kt/6/HPEFRCvbdvWW3QmQh4oIE1cdwLPGRMWJhqwa2B1ReVw5uRhd3TSQUgkER7DworH/siRClgvl2Q4EyknZLlASnurI8bh+15fynyogbVNYpuOQxL3O6pFvSJPAlinNKRTdqaBASHSFuErIUcKSG0mpwGa/ppKfhpUc2ZirDjHBOprRZRTrv43Pc55owaAU+ZWg+VutFfI7AXGA0nLQWHehZbuuxJQSnPKjwNgdhqqPN8Dj6piui+0s6pdHgtwt38iqaCj7ZEIdoMsp3qGbpbx+sF6P/gFd29b4XeVJzIAAAAASUVORK5CYII=";return new Promise(c=>
{b.onload=async()=>{a.sheet=b;c(a)}})}async function Y(a,b,c,d,e,f){let g=new ub(2*c,2*d);X(g,a.sheet,0,0,e,f,c,d);return xb(g,b)}async function Z(a,b,c,d,e){let f=new ub(2*c,42);X(f,a.sheet,0,0,d,e,c,16);X(f,a.sheet,1,32,47,64,16,5);return xb(f,b)}class zb{}function O(a,b="blue"){return a.g[b]??a.g.blue}function Q(a,b="grey"){return a.i[b]??a.i.grey}async function Ab(a){for(let [b,c]of r)a.i[b]=await Y(a.j,c,25,30,4,38)}async function Bb(a){for(let [b,c]of ca)a.g[b]=await Y(a.j,c,3,3,0,65)}
async function Cb(){var a=new Db;let b=new zb;a.j=await yb(b);await Promise.all([Ab(a),Bb(a),(async()=>a.Qa=await Y(b,ea,14,14,0,1))(),(async()=>a.Va=await Y(b,fa,16,16,0,15))(),(async()=>a.Pa=await Y(b,ha,16,16,16,2))(),(async()=>a.Ca=await Z(b,da,18,29,32))(),(async()=>a.cb=await Z(b,ja,17,47,49))(),(async()=>a.Ua=await Z(b,ka,17,47,32))(),(async()=>a.Sa=await Y(b,w,16,20,31,48))(),(async()=>a.Ia=await Y(b,w,32,31,32,0))()]);let c=r.find(([d])=>"gold"===d)[1].slice(1);await vb(a.Ca,c);return a}
class Db{constructor(){this.i={};this.g={}}}function Eb(a){Ba(a.g.h)&&D(()=>{ua(new cb(a.g.I.J))})}class Fb{constructor(){this.i=p.g}async ra(){720>=window.innerWidth&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen());let a=await Cb();this.ba=new tb;sb(this.ba);this.g=await ab(new bb(a),this.ba);E.start(0,1,1)}Ba(a){this.g&&(this.g.update(a,p.m),this.g.H(this.i),Eb(this))}Ja(){this.ba.stop()}}let Gb=new Fb;
class wa{constructor(){this.Ca=null}ua(){ua(Gb)}async ra(){c2d.addEventListener("click",this.ua)}Ba(a){z(p,"Benji",56,C()+15,180);A("Super",36,C()-70,145,"#fff","center","#ee2626",3,Math.PI/-20);let {g:b}=p;b.save();b.font='900 14px "Tahoma"';b.textAlign="center";b.fillStyle="#f01b1bce";b.fillText("JS13K 2025",55,p.j-10);b.restore();A("by hseager",14,p.i-60,p.j-11,"#f0f0f0c7");ma("Start Game",a,.6*p.j)}Ja(){c2d.removeEventListener("click",this.ua)}}I=new va(...[]);let Hb=performance.now(),Ib=new H;
(()=>{function a(b){let c=(b-Hb)/1E3;Hb=b;p.g.clearRect(0,0,p.i,p.j);Ib.update(c);Ib.H(p.g);I.g.Ba(c);E.update(c);E.H(p.g);requestAnimationFrame(a)}aa();requestAnimationFrame(a)})();

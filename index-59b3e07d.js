let h=[];function aa(){var a=m.g.canvas;a.addEventListener("click",b=>{let c=a.getBoundingClientRect(),d=a.width/c.width*(b.clientX-c.left);b=a.height/c.height*(b.clientY-c.top);for(let e of h)d>=e.x&&d<=e.x+e.w&&b>=e.y&&b<=e.y+e.sa&&e.Ha()})}function ba(a,b,c){h.push({x:10,y:a,w:b,sa:90,Ha:c})}function p(a,b){let c=c2d.getBoundingClientRect();return new DOMPoint(288/c.width*(a-c.left),512/c.height*(b-c.top))}
function r(a){let b,c;.5625<window.innerWidth/window.innerHeight?(c=window.innerHeight,b=.5625*c):(b=window.innerWidth,c=b/.5625);a.g.canvas.style.width=`${b}px`;a.g.canvas.style.height=`${c}px`;a.g.imageSmoothingEnabled=!1}function t(a,b,c,d=18){let e=a.createLinearGradient(0,b-d,0,b);c.forEach(([f,g])=>e.addColorStop(f,g));return e}
function v(a,b,c,d){let e=m.g;e.save();e.font=`bold ${b-2}px "Courier New"`;e.strokeStyle="#0a0601";e.fillStyle="#0a0601";e.textAlign="center";e.strokeText(a,c,d+2);e.fillText(a,c,d+2);e.font=`bold ${b}px "Courier New"`;e.fillStyle=t(e,d,[[0,"#fff4c1"],[.25,"#ffd84a"],[.5,"#6a2c00"],[.75,"#b65a00"],[1,"#ff9d00"]]);e.fillText(a,c,d);e.restore()}
function w(a,b,c,d,e="white",f="center",g,k,n){let l=m.g;l.save();l.font=`${b}px "Courier New", monospace`;l.textAlign=f;l.fillStyle=e;g&&(l.strokeStyle=g);k&&(l.lineWidth=k);n?(l.translate(c,d),l.rotate(n),g&&l.strokeText(a,0,0),l.fillText(a,0,0)):(g&&l.strokeText(a,c,d),l.fillText(a,c,d));l.restore()}
function x(a,b,c=400){var d=m;d.l+=b;.75<=d.l&&(d.l=0,d.B=!d.B);d.B&&(b=d.g,b.save(),b.font='bold 24px "Courier New", serif',b.textAlign="center",b.textBaseline="middle",b.strokeStyle="#161616ff",b.strokeText(a,b.canvas.width/2,c+1),b.fillStyle=t(b,c,[[0,"#ffffff"],[.15,"#dcdcdc"],[.3,"#a0a0a0"],[.45,"#f8f8f8"],[.6,"#7a7a7a"],[.8,"#c8c8c8"],[1,"#5a5a5a"]],20),b.fillText(a,b.canvas.width/2,c),b.restore())}
function y(a,b,c,d,e=6,f,g){a.beginPath();a.moveTo(10+e,b);a.lineTo(10+c-e,b);a.quadraticCurveTo(10+c,b,10+c,b+e);a.lineTo(10+c,b+d-e);a.quadraticCurveTo(10+c,b+d,10+c-e,b+d);a.lineTo(10+e,b+d);a.quadraticCurveTo(10,b+d,10,b+d-e);a.lineTo(10,b+e);a.quadraticCurveTo(10,b,10+e,b);a.closePath();f&&(a.fillStyle=f,a.fill());g&&(a.strokeStyle=g,a.stroke())}function z(){return m.g.canvas.width/2}
class ca{constructor(){this.l=0;this.B=!0;this.g=c2d.getContext("2d");this.o=new DOMPoint(0,0);c2d.addEventListener("mousemove",a=>{this.o=p(a.clientX,a.clientY)});c2d.addEventListener("touchmove",a=>{a=a.touches[0];this.o=p(a.clientX,a.clientY)});window.addEventListener("resize",()=>r(this));window.addEventListener("orientationchange",()=>r(this));r(this)}get i(){return this.g.canvas.width}get j(){return this.g.canvas.height}}let m=new ca;
class da{constructor(){this.e=this.a=0;this.d=1;this.$=this.ia=this.f=0}start(a,b,c,d){this.ia=a;this.$=b;this.a=a;this.d=c;this.e=0;this.f=1;this.c=d}update(a){this.f&&(this.e+=a,a=Math.min(this.e/this.d,1),this.a=this.ia+(this.$-this.ia)*a,1<=a&&(this.f=0,this.c?.()))}D(a){!this.f&&0>=this.a||(a.fillStyle=`rgba(0,0,0,${.8*(1-this.a)})`,a.fillRect(0,0,m.i,m.j))}get active(){return 1===this.f}}
let A=new da,B=[{Y:1,color:"#00FF66"},{Y:.75,color:"#00BFFF"},{Y:.5,color:"#FFA500"},{Y:.25,color:"#FF3333"},{Y:0,color:"rgba(255, 0, 0, 0)"}],C={blue:["#35a3ec","#4480b8"],green:["#7dff99","#44b867"],$a:["#ce7bfd","#a144b8"],Za:["#ff80df","#b84488"],Ya:["#eca335","#b88244"],red:["#ff5e49","#881c18"]},ea="#202020 #404040 #606060 #808080 #A0A0A0 #C0C0C0 #00BFFF".split(" "),fa="#0d0d0d #1a1a1a #2c2c2c #3f3f3f #5a2b00 #8c3b00 #9aacac #ff7b1c #ffb84d #ffd9a3".split(" "),ha="#200900 #190902 #291403 #311d0c #a05030 #c06440 #e6a67c".split(" "),
ia="#201a00 #191502 #291f03 #312e0c #a08230 #c09e40 #e6d37c".split(" "),ja="#310101 #331515 #380d0d #310c0c #A03030 #c04040 #e67c7c".split(" "),ka=[25,50,0],D=["Starfield Frontiers","Factured Expanse","Rift Horizon","Outer wilds"],E=[6,15,16],la="#0a0f0a #121a12 #1b261a #253424 #3d583e #4a5c46 #63755f #7f8f7c #a4b1a1 #d0d8ce".split(" "),ma="#111821 #152236 #1b2e45 #2d4668 #22354f #3a567a #5a7ba3 #6f92b8 #90afcf #b0cde6".split(" "),F="#1a130f #2a1f18 #3b2c22 #544036 #6a5448 #7f6a5a #8e8e91 #a5a6a9 #c5c6c9 #e0e1e3".split(" ");
function G(a,b=1){a=parseInt(a.replace("#",""),16);return{r:a>>16&255,$:a>>8&255,b:a&255,alpha:b}}function H(a,b=1){let {r:c,$:d,b:e}=G(a,b);return`rgba(${c}, ${d}, ${e}, ${b})`}
function na(){return I.map(a=>{var b=a.replace("#","");a=parseInt(b.substring(0,2),16)/255;var c=parseInt(b.substring(2,4),16)/255;b=parseInt(b.substring(4,6),16)/255;var d=Math.max(a,c,b),e=Math.min(a,c,b),f=0,g=0;let k=(d+e)/2;if(d!==e){let u=d-e;g=.5<k?u/(2-d-e):u/(d+e);switch(d){case a:f=(c-b)/u+(c<b?6:0);break;case c:f=(b-a)/u+2;break;case b:f=(a-c)/u+4}f*=60}let {sa:n,ia:l,Ja:q}={sa:f,ia:100*g,Ja:100*k};a=(n+200*(Math.random()-.5)+360)%360;d=Math.min(100,Math.max(0,q+0*(Math.random()-.5)));
d/=100;c=Math.min(100,Math.max(0,l+10*(Math.random()-.5)))/100*(1-Math.abs(2*d-1));b=c*(1-Math.abs(a/60%2-1));d-=c/2;g=f=e=0;0<=a&&60>a?(e=c,f=b,g=0):60<=a&&120>a?(e=b,f=c,g=0):120<=a&&180>a?(e=0,f=c,g=b):180<=a&&240>a?(e=0,f=b,g=c):240<=a&&300>a?(e=b,f=0,g=c):300<=a&&360>a&&(e=c,f=0,g=b);return`#${Math.round(255*(e+d)).toString(16).padStart(2,"0")}${Math.round(255*(f+d)).toString(16).padStart(2,"0")}${Math.round(255*(g+d)).toString(16).padStart(2,"0")}`})}let I="#06040f #4d592a #231952 #354652 #353550 #363692 #69416e".split(" ");
function J(a,b,c,d){b=oa(b,a);return{Ma:a,W:b,offsetX:0,offsetY:0,Ra:c,la:d}}
function oa(a=.01,b=I){let c=document.createElement("canvas");c.width=256;c.height=256;let d=c.getContext("2d");d.imageSmoothingEnabled=!1;a=Math.floor(65536*a);for(var e=0;e<a;e++){var f=Math.floor(256*Math.random()),g=Math.floor(256*Math.random());d.fillStyle=b[Math.floor(Math.random()*b.length)];d.fillRect(f,g,1,1)}for(let n=0;2>n;n++){a=d;e=256*Math.random();f=256*Math.random();g=128*Math.random()+256/3;var k=b;for(let l=-256;256>=l;l+=256)for(let q=-256;256>=q;q+=256){let u=a.createRadialGradient(e+
l,f+q,0,e+l,f+q,g);u.addColorStop(0,H(k[5],.1));u.addColorStop(1,"rgba(0,0,0,0)");a.globalCompositeOperation="screen";a.fillStyle=u;a.beginPath();a.arc(e+l,f+q,g,0,2*Math.PI);a.fill();a.globalCompositeOperation="source-over"}}b=new Image;b.src=c.toDataURL();return b}
class K{constructor(a=75,b=1){this.g=[];this.time=0;let c=na();this.ja=a;this.O=b;this.g.push(J(c,.001,.4*this.ja,.2));this.g.push(J(c,.002,.6*this.ja,.3));this.g.push(J(c,.003,1*this.ja,.4))}update(a,b={x:0,y:0}){this.time+=.1*a;for(let c of this.g)0!==c.W.width&&0!==c.W.height&&(c.offsetY=(c.offsetY+c.Ra*a-.5*b.y*c.la)%c.W.height,0>c.offsetY&&(c.offsetY+=c.W.height),c.offsetX=(c.offsetX-.4*b.x*c.la)%c.W.width)}D(a){let {width:b,height:c}=a.canvas;a.imageSmoothingEnabled=!1;var d=this.g[0];a.save();
a.fillStyle=d.Ma[0];a.fillRect(0,0,b,c);for(let f of this.g)if(f.W.complete&&(d=a.createPattern(f.W,"repeat"))){a.save();var e;a:{for(e=E.length-1;0<=e;e--)if(this.O>=E[e]){e=ka[e];break a}e=0}a.translate(f.offsetX+20*Math.sin(this.time*e+2*f.la)*f.la,f.offsetY);a.fillStyle=d;a.fillRect(-f.W.width/4,-f.W.height,b+100,c+f.W.height);a.restore()}}}function pa(a){var b=L,c=[];b.g.za?.();b.g=a;b.g.ka?.(...c)}class qa{constructor(...a){this.g=new ra;this.g.ka?.(...a)}}let L;
function M(a,b=8,c=12){if(!a.L){a.L=!0;for(let d=0;d<b;d++){let e=400*(Math.random()-.5),f=Math.random()*Math.PI*2;a.B.push({x:a.x+a.width/2,y:a.y+a.height/2,Va:Math.cos(f)*e,Wa:Math.sin(f)*e,va:Math.random()*Math.PI*2,Pa:8*(Math.random()-.5),alpha:1,size:c,Sa:Math.floor(Math.random()*(a.C.width-c)),Ta:Math.floor(Math.random()*(a.C.height-c))})}}}function N(a,b){for(let c of a.B)c.x+=c.Va*b,c.y+=c.Wa*b,c.va+=c.Pa*b,c.alpha-=1.5*b;a.B=a.B.filter(c=>0<c.alpha)}
function O(a,b){for(let c of a.B)b.save(),b.globalAlpha=c.alpha,b.translate(c.x,c.y),b.rotate(c.va),b.drawImage(a.C,c.Sa,c.Ta,c.size,c.size,-c.size/2,-c.size/2,c.size,c.size),b.restore()}function P(a){return a.L&&0===a.B.length}class sa{constructor(a,b,c,d=0,e=0){this.B=[];this.L=!1;this.C=a;this.x=b;this.y=c;this.width=d;this.height=e;this.active=!0}ta(){return 0>this.x+this.width||this.x>m.i||0>this.y+this.height||this.y>m.j}}
function Q(a,b,c,d=a.g,e){if(a.active&&a.fa){var f=a.fa.get();f&&(e&&(f.C=R(a.aa.U,e)),e=0>=d.y?a.y:a.y+a.height,f.u=b,f.speed=c,b=e,c=d.x,d=d.y,f.x=a.x+a.width/2+a.wa,f.y=b,f.pa=c,f.qa=d,f.active=!0)}}
function ta(a,b,c,d){if(a.active)if("burst"===a.S)0<a.K?(a.G-=b,0>=a.G&&(Q(a,c,d,a.g,a.N),a.K--,a.G=a.Da),0>=a.K&&(a.i=a.v)):(a.i-=b,0>=a.i&&(a.K=a.Ca,a.G=0));else if(a.i-=b,0>=a.i){switch(a.S){case "single":Q(a,c,d,a.g,a.N);break;case "spread":b=[-.3,0,.3];var e=Math.hypot(a.g.x,a.g.y),f=a.g.x/e;e=a.g.y/e;for(var g of b){b=Math.cos(g);var k=Math.sin(g);Q(a,c,d,{x:f*b-e*k,y:f*k+e*b},a.N)}break;case "megaspread":b=[-.6,-.3,0,.3,.6];g=Math.hypot(a.g.x,a.g.y);f=a.g.x/g;g=a.g.y/g;for(e of b)b=Math.cos(e),
k=Math.sin(e),Q(a,c,d,{x:f*b-g*k,y:f*k+g*b},a.N);break;case "boss":b=[-.5,-.4,-.2,0,.2,.4,.5];e=Math.hypot(a.g.x,a.g.y);g=a.g.x/e;e=a.g.y/e;for(f of b)b=Math.cos(f),k=Math.sin(f),b={x:g*b-e*k,y:g*k+e*b},b.x+=.5*(Math.random()-.5),k=Math.hypot(b.x,b.y),b.x/=k,b.y/=k,Q(a,c,d,b,a.N)}a.i=a.v}}function ua(a,b){let c=Math.max(-5,Math.min(5,4*a.oa.x)),d=a.width/2;for(let e=0;e<a.width;e++)b.drawImage(a.C,e,0,1,a.height,a.x+e,a.y+Math.floor((e-d)/d*c),1,a.height)}
class va extends sa{constructor(a,b,c,d,e,f,g){super(b,d,e,f,g);this.X={x:0,y:0};this.oa={x:0,y:0};this.wa=0;this.active=!0;this.i=0;this.v=.1;this.g={x:0,y:-1};this.S="single";this.G=this.K=0;this.Da=.1;this.Ca=3;this.N="red";this.aa=a;this.C=b;this.fa=c}}function S(a,b){a.m+b>a.A?a.m=a.A:a.m+=b}
class wa extends va{constructor(a,b,c){super(a,b,c,z()-b.width/2,.5*m.j,b.width,b.height);this.active=!1;this.wa=-2;this.l="#00bfff";this.T=150;this.m=this.A=this.I=100;this.v=.6;this.u=10;this.F=200;this.j=this.M=this.H=0;this.S="single";this.N="blue";this.C=b}update(a,b,c){if(this.L)N(this,a);else{0<this.M&&this.m<this.A&&(this.j+=a,5<=this.j&&(this.m+=this.M,this.m>this.A&&(this.m=this.A),this.j=0));b-=this.x+this.width/2;c=c-(this.y+this.height/2)-28;var d=Math.hypot(b,c);this.active&&2<d&&(this.x+=
b/d*this.T*a,this.y+=c/d*this.I*a);this.oa={x:this.x-this.X.x,y:this.y-this.X.y};this.X={x:this.x,y:this.y};a:{b=this.m/this.A;b=Math.max(0,Math.min(1,b));for(var e=0;e<B.length-1;e++)if(c=B[e],d=B[e+1],b<=c.Y&&b>=d.Y){b=(b-d.Y)/(c.Y-d.Y);c=G(c.color);let g=G(d.color);d=c.alpha+(g.alpha-c.alpha)*(1-b);e=Math.round(c.$+(g.$-c.$)*(1-b));var f=Math.round(c.b+(g.b-c.b)*(1-b));b="#"+Math.round(c.r+(g.r-c.r)*(1-b)).toString(16).padStart(2,"0")+e.toString(16).padStart(2,"0")+f.toString(16).padStart(2,"0");
b=H(b,d);break a}b=B[B.length-1].color}this.l=b;ta(this,a,this.u,this.F)}}D(a){if(this.L)O(this,a);else{a.save();if(this.C){var b=document.createElement("canvas");b.width=this.width;b.height=this.height;var c=b.getContext("2d");c.drawImage(this.C,0,0,this.width,this.height);c.globalCompositeOperation="source-in";c.fillStyle=this.l;c.fillRect(0,0,this.width,this.height);a.save();a.globalAlpha=.8;a.filter="blur(20px)";a.drawImage(b,this.x,this.y,this.width,this.height);a.restore()}b=this.x+this.width/
2;c=this.y+this.height+-2;var d=a.createLinearGradient(b,c,b,c+20);d.addColorStop(0,"rgba(0, 180, 255, 0.9)");d.addColorStop(.4,"rgba(255, 255, 255, 0.8)");d.addColorStop(1,"rgba(255, 140, 0, 0)");a.fillStyle=d;d=20+15*Math.random();a.beginPath();a.moveTo(b-1,c);a.lineTo(b,c+d);a.lineTo(b+1,c);a.closePath();a.fill();ua(this,a);a.restore()}}na(a){this.m-=a;0>=this.m&&M(this,40)}}
class xa extends sa{constructor(a){super(a,0,0);this.active=!1;this.speed=this.u=1;this.qa=this.pa=0;this.C=a}D(a){this.L?O(this,a):a.drawImage(this.C,this.x,this.y)}update(a){this.L?(N(this,a),P(this)&&(this.active=this.L=!1)):(this.x+=this.pa*this.speed*a,this.y+=this.qa*this.speed*a)}}
class ya extends va{constructor(a,b,c,d,e,f,g,k,n,l){super(a,b,c,g,k,b.width,b.height);this.ba="#ffb3007c";this.l=12;this.I=20;this.j=0;this.Oa=.5;this.v=3.5;this.g={x:0,y:1};this.o=0;this.N="red";this.m=this.A=d;a=document.createElement("canvas");a.width=this.C.width+4*this.l;a.height=this.C.height+4*this.l;b=a.getContext("2d");if(!b)throw Error("Failed to get 2D context");b.shadowColor=this.ba;b.shadowBlur=this.l;b.drawImage(this.C,2*this.l,2*this.l);this.Ea=a;this.j=60*(Math.random()-.5);this.u=
e;this.F=f;this.ga=n;this.S=l;this.v=3.5+.3*(2*Math.random()-1);this.i=Math.random()*this.v}update(a){if(this.L)N(this,a);else{var b=this.x;switch(this.ga){case "straight":this.y+=this.I*a;this.o-=a;0>=this.o&&(this.j=30*(.5>Math.random()?-1:1),this.o=.5);this.x+=this.j*a;break;case "sine":this.y+=this.I*a;this.x+=1.5*Math.sin(this.y/20);break;case "zigzag":this.y+=this.I*a,this.o-=a,0>=this.o&&(this.j=50*(.5>Math.random()?-1:1),this.o=.5),this.x+=this.j*a}0>this.x&&(this.x=0,this.j*=-1);this.x+this.width>
m.i&&(this.x=m.i-this.width,this.j*=-1);this.oa.x=(this.x-b)/a;ta(this,a,this.u,this.F)}}D(a){this.L?O(this,a):(a.save(),a.drawImage(this.Ea,this.x-2*this.l,this.y-2*this.l),a.drawImage(this.C,this.x,this.y),ua(this,a),a.restore())}na(a){this.m-=a;if(0>=this.m){M(this);a=this.aa.ha;var b=a.g;let f=b.currentTime;var c=.5*b.sampleRate,d=b.createBuffer(1,c,b.sampleRate),e=d.getChannelData(0);for(let g=0;g<c;g++)e[g]=2*Math.random()-1;c=b.createBufferSource();c.buffer=d;d=b.createBiquadFilter();d.type=
"highpass";d.frequency.value=400;e=b.createGain();e.gain.setValueAtTime(2,f);e.gain.exponentialRampToValueAtTime(.001,f+.5);c.connect(d).connect(e).connect(a.i);d=b.createOscillator();d.type="sine";d.frequency.setValueAtTime(80,f);d.frequency.exponentialRampToValueAtTime(30,f+.5);b=b.createGain();b.gain.setValueAtTime(2,f);b.gain.exponentialRampToValueAtTime(.001,f+.5);d.connect(b).connect(a.i);c.start(f);c.stop(f+.5);d.start(f);d.stop(f+.5)}}ta(){return 0>this.x+this.width||this.x>m.i||this.y>m.j}}
class za extends ya{constructor(){super(...arguments);this.ba="#ff1e007c";this.l=12;this.m=this.A=1E3;this.v=1.4;this.g={x:0,y:1}}}function Aa(a,b){b=1+2*(a.O-1)+2*b;for(let d=0;d<b;d++){var c=a.K[Math.floor(Math.random()*a.K.length)];c=new ya(a.g,c.C,a.g.ca,16*(1+.03*a.O),c.ra*(1+.02*a.O),c.F*(1+.03*a.O),Math.random()*(m.i-c.C.width),-20-100*Math.random(),c.ga,c.S);a.g.R.push(c)}}function Ba(a){a.o<a.G?(a.o++,Aa(a,a.o)):A.start(1,0,.5,()=>{a.g.ea.start();A.start(0,1,.5)})}
function T(a){a.o=0;a.g.background=new K(1.1*a.g.background.ja,a.O);a.j=4;a.g.R=[];0===a.O%6&&a.G++;if(15===a.O){a.l=!0;var b=new za(a.g,a.g.U.ya,a.g.ca,1E3,10,150,m.i/2-a.g.U.ya.width/2,20,"none","boss");a.g.R.push(b)}else Ba(a)}function Ca(a){a.O++;var b=a.g.V;E.includes(a.O)?(b=b.g,b.V.isActive=!0,b.h.active=!1):U(b.g);a.g.V.isActive||T(a)}function Da(a){a.i.push({x:Math.random()*m.i,y:Math.random()*m.j*.4,Qa:a.B})}
function Ea(a){var b=a.g.R[0];if(b){b.m<=.75*b.A&&0>=a.i.length&&Da(a);b.m<=.35*b.A&&1>=a.i.length&&Da(a);for(let g of a.i)if(.02>Math.random()){b=a;var c=g;let k=b.g.ca.get();if(k){var d=Math.cos(Math.random()*Math.PI*2);k.u=10;k.speed=90;var e=k,f=c.y;e.x=c.x;e.y=f;e.pa=d;e.qa=1;e.active=!0;k.C=R(b.g.U,"purple")}}}}function Fa(a){a.l=!1;a.i=[];A.active||A.start(1,0,.5,()=>{a.g.ea.start();A.start(0,1,.5)})}
class Ga{constructor(a){this.o=this.O=0;this.G=1;this.j=0;this.l=!1;this.i=[];this.B=0;this.g=a;this.K=[{C:this.g.U.Ga,ga:"straight",S:"single",F:75,ra:10},{C:this.g.U.La,ga:"sine",S:"burst",F:90,ra:11},{C:this.g.U.Fa,ga:"zigzag",S:"spread",F:112.5,ra:10}]}update(a){this.B+=a;let b=0===this.g.R.length,c=!this.g.ea.isActive&&!this.g.V.isActive;this.l&&Ea(this);this.l&&b&&Fa(this);b&&c&&(this.o<this.G?Ba(this):A.active||A.start(1,0,.5,()=>{this.g.ea.start();A.start(0,1,.5)}));0<this.j&&(this.j-=a)}D(){if(this.l){var a=
this.g.R[0];if(a){var b=m.g,c=m.i,d=(b.canvas.width-c)/2;a=a.m/a.A*c;b.fillStyle="#444";b.fillRect(d,5,c,10);b.fillStyle="#e33";b.fillRect(d,5,a,10);b.strokeStyle="#fff";b.lineWidth=2;b.strokeRect(d,5,c,10)}}for(var e of this.i){d=e.x;a=e.y;b=this.B-e.Qa;c=m.g;c.save();c.translate(d,a);for(d=0;5>d;d++){a=d/5*Math.PI*2;for(let g=0;15>g;g++){let k=g/15;var f=30*k;let n=a+2.5*k+.75*b,l=Math.cos(n)*f;f*=Math.sin(n);c.fillStyle=`rgba(150, 100, 255, ${1-k})`;c.beginPath();c.arc(l,f,1.5,0,2*Math.PI);c.fill()}}c.restore()}if(0<
this.j){e=Math.min(this.j/.5,1);m.g.save();m.g.globalAlpha=e;e=this.O;b=D.length-1;c=Math.floor((e-1)/5);let {xa:g,Ba:k}=c<b?{xa:D[c],Ba:(e-1)%5+1}:{xa:D[b],Ba:e-5*b};v(g,24,m.i/2,.2*m.j);v(`Zone ${k}`,32,m.i/2,.275*m.j);m.g.restore()}}}function V(a,b,c){for(let d=a.length-1;0<=d;d--){let e=a[d];if(e.active)for(let f=b.length-1;0<=f;f--){let g=b[f];if(g.active&&e&&g&&e.x<g.x+(g.width||0)&&e.x+(e.width||0)>g.x&&e.y<g.y+(g.height||0)&&e.y+(e.height||0)>g.y){c(e,g);break}}}}
class Ha{constructor(a){this.image=a}D(a,b,c,d,e,f,g,k=0){a.save();k&1&&(a.translate(b+f,c),a.scale(-1,1),c=b=0);k&2&&(a.translate(b,c+g),a.scale(1,-1),c=0);a.imageSmoothingEnabled=!1;a.drawImage(this.image,d,e,f,g,b,c,2*f,2*g);a.restore()}}function W(a,b,c,d,e,f,g,k,n=0){b.D(a.g,c,d,e,f,g,k,n)}class X{constructor(a,b){this.canvas=document.createElement("canvas");this.canvas.width=a;this.canvas.height=b;this.g=this.canvas.getContext("2d")}}
function Ia(a,b){return new Promise((c,d)=>{a.complete&&0!==a.naturalWidth?c(Ja(a,b)):(a.onload=()=>{c(Ja(a,b))},a.onerror=d)})}
function Ja(a,b){let c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.width;c.height=a.height;d.drawImage(a,0,0);a=d.getImageData(0,0,a.width,a.height);let e=a.data;for(let f=0;f<e.length;f+=4){if(0===e[f+3])continue;let g=G(b[Math.min(b.length-1,Math.floor(e[f]/(256/b.length)))]||"#000000");e[f]=g.r;e[f+1]=g.$;e[f+2]=g.b}d.putImageData(a,0,0);b=new Image;b.src=c.toDataURL();return b}
async function Ka(){let a=new Image;a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABYBAMAAAC3wuwbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAB5QTFRFAAAAMzMzISEhR0dHXl5eDQ0NfX19o6Oj2traFBQUrFYuaAAAAAp0Uk5TAP////7+///2csp+qpcAAAUMSURBVHicfZbNd9M4EMDHny03yx8BbrYSk7e32HIC3OJICcsttuuWY9Jksz0WCg3HQrvvcWT3sH/vjuyWOtjLvBdHsn6aGc2MJYEGP+T9YxM8srxv3d08vNOj+3fEAnXslaBQ2bt9AC61jVWrYyMYE5KDYjdUgr7UE0tf3gMkCgJQ4iZw7PcmjmLdA0UUUIjogQYxWdhpDRCNjLPQdw5MMDH5RpyxbDok6seUEnIAOE5ynRJPNtOIMRZT4oyagJIt+C2pTJhJ7PAoDJzmOKi2iKKgjkQa4ypobh0Aml8Qq14FaHG/F3nZT4ClEV+r3+mpk3E7OARAdhXZMJZaypw4zgHKJnCfiBHMbMBVkMBHTfWUA4mWzgz0/vBr7kOelUTqvc+4CeBjwLzTGS28p19zmp1FmVyqadYAjqo3wMcDOy+CxTwP85Mwi3DgeF8vA2AKHByvZzN3EIY2LYowkNE+uq6AD6BfQh9z/IoyZ1BSmwbFuorc0ccq1Bx+T2Ux5TwyCnc7sMOCRVUoXl7JPzN1P/MswfykYz1JNhEJyAmrdG9FBXB3f0U45ntt6ZHNnTCwTvMKuFq/xmfCxJ93LsM5W4yVO5jZgX+2qYD1+XN8cpu9uSM2rvvjFAwe2J4PZq3h/VyaiCFebAMLI3eNXS5SgqGuqlbbzqUGCspCeIDADiPGtxwjYFY1p6VzWiXyhEcxDGoNSROYzel3GUjWHzNMJuynWBGcEbn0KkLxLK9SHSt+IZMuU6MlQs6eyvfYzKUTFqZ+/ZB0fSJ+1NM+CYrXUJeT36ivRyCe18D/iLpz+tnrehKoHUDS67GCyG9oVdVES3ivx4sAAWWlgG61ATZ8uqkAc6SPzS6gN0lrDeIujjoA3pvgdzhF+/w6zfwOIBEkCBAA9+Iq7HKSiSj4ewSGBOwOYKRwSjFHHAYX6wi6kJktXfu0m1zcfmFRF/BcAlvW27+fRV0arO/Sdx4XF8nYIR2AXyXRzfUJ8wPaAWyrp+YbLsZp2h7X6+I3/dpea3w6ih4sdcvmusuvpgfb7a+B3U78Gli4/NfA9Ke+Jrf5aj+wKX3RAUiP9AU+zvD3xq8nNcbN6mTDT63e+urt66gBMBWLxsCT4LLq3tw8aL0XZZl5S8iJrU6B0hCODWlh3QAuM4/S3HaewoxiIcGxNJs8AipkVAobQk7flWUFbEQTiOV4f4SAXZbB+EgqOADy8BM9K2EoTRDCcLGb7SEwLGj5CYbGZ0qDsDTBnIhmMlYlLWkYmkdH3+QqMBzbrUgbwLLE8Zyq6tG3LxJQARW4DUAzyjIMi5V+/gxVLHFPYFw0D1Cdlij9JQwJAvIYZMlIbwDqAIkcd0v1j3cfaJjBz2Io5X7/F4ZQ5ecYkHYNa2+rv39xw1BJfdYfipLIdD/Bi8QLnK18bWvI3qrU1z2r3vB+3HAenQyjheBO6ftV9/hVy8kwf7PgcV6sQCvLgt22AHryUqRxjsd6JhLR4eU/CU8GM88Aw2VCpMsWoPS2NJlZBijsXSIWLSchc90wpahBictkNl+1APeZR08pRSDZCSHaJpy0j7eTWAKiEwg44xHewVZG0vcGKWv7QOabE5uC5zmCsaLXAlQyL4vYB+McT/exfdkGMmGzsQ+qtyOMnvstwAgJJRTfaw7Wg94GnoS9kuXfoe8yUm8ULRtjeorzJrMA1/lbB2BQx/bhyWItNQw6ACjkRdPci2S32L3w/wPaW+WymzimnwAAAABJRU5ErkJggg==";let b=
new Ha(a);return new Promise(c=>{a.onload=async()=>{c(b)}})}async function La(a){let b=new X(54,60);W(b,a,14,0,0,15,13,30);W(b,a,2,37,0,45,6,9);W(b,a,46,37,0,45,6,9,1);return Y(b,ea)}async function Y(a,b){let c=new Image;c.src=a.canvas.toDataURL();a=await Ia(c,b);await a.decode();return a}async function Ma(a){let b=new X(28,28);W(b,a,0,0,16,0,14,14);return Y(b,ha)}async function Na(a){let b=new X(32,32);W(b,a,0,0,16,15,16,16);return Y(b,ia)}
async function Oa(a){let b=new X(32,32);W(b,a,0,0,16,32,16,16);return Y(b,ja)}async function Pa(a,b){let c=new X(6,6);W(c,a,0,0,0,0,3,3,0);return Y(c,b)}async function Qa(a){let b=new X(36,42);W(b,a,0,0,29,52,18,16);W(b,a,1,32,47,84,16,5);return Y(b,fa)}async function Ra(a){let b=new X(34,42);W(b,a,0,0,47,68,17,16);W(b,a,1,32,47,84,16,5);return Y(b,la)}async function Sa(a){let b=new X(34,42);W(b,a,0,0,47,52,17,16);W(b,a,1,32,47,84,16,5);return Y(b,ma)}
async function Ta(a){let b=new X(32,40);W(b,a,0,0,31,68,16,20);return Y(b,F)}async function Ua(a){let b=new X(64,62);W(b,a,0,0,32,0,32,31);return Y(b,F)}function R(a,b="blue"){return a.i[b]??a.i.blue}async function Va(a){let b=Object.keys(C);for(let c of b)a.i[c]=await Pa(a.g,C[c])}
async function Wa(){var a=new Xa;a.g=await Ka();await Va(a);a.Na=await La(a.g);a.Ga=await Ma(a.g);a.La=await Na(a.g);a.Fa=await Oa(a.g);a.Aa=await Qa(a.g);a.Ua=await Ra(a.g);a.Ka=await Sa(a.g);a.Ia=await Ta(a.g);a.ya=await Ua(a.g);return a}class Xa{constructor(){this.i={}}}function Ya(a,b){for(let c of a.da)c.active&&(c.update(b),c.ta()&&(c.active=!1))}function Za(a,b){for(let c of a.da)c.active&&c.D(b)}
class $a{constructor(a){this.da=[];for(let b=0;100>b;b++){let c=a();c.active=!1;this.da.push(c)}}get(){for(let a of this.da)if(!a.active)return a.active=!0,a.L=!1,a;return null}}let ab={};
class bb{constructor(a){this.i=[{s:"Common",name:"Pulse Lazer MK-II",description:"Damage +2, Fire Rate +10%",apply:async()=>{this.g.h.u+=2;this.g.h.v*=.9;this.g.h.N="green"}},{s:"Common",name:"Ion Cannon",description:"Damage +3, Proj Speed +10%",apply:async()=>{this.g.h.u+=3;this.g.h.F*=1.1;this.g.h.N="blue"}},{s:"Rare",name:"Nebula Railcoil",description:"Damage +5, Proj Speed +20%",P:"Burst Shot",apply:()=>{this.g.h.u+=5;this.g.h.F*=1.2;this.g.h.N="purple";this.g.h.S="burst"}},{s:"Epic",name:"Iron Fang Torpedo",
description:"Damage +6, Fire Rate +20%",P:"Spread Shot",apply:()=>{this.g.h.u+=6;this.g.h.v*=.8;this.g.h.N="orange";this.g.h.S="spread"}},{s:"Epic",name:"Modified Sprinkler",description:"Damage -8, Fire Rate +60%",P:"Mega Shot",apply:()=>{this.g.h.u-=8;this.g.h.v*=.6;this.g.h.N="pink";this.g.h.S="megaspread"}},{s:"Legendary",name:"Glass Canon",description:"Damage +8 HP -40,",P:"Mega Shot",apply:()=>{this.g.h.u+=8;this.g.h.m-=30;this.g.h.N="orange";this.g.h.S="megaspread"}},{s:"Common",name:"Mithril Plating",
description:"HP +10, Regen +3",P:"Evasion +5%",apply:()=>{this.g.h.A+=20;this.g.h.m+=20;this.g.h.M+=5;this.g.h.H+=5}},{s:"Common",name:"Adamite Panels",description:"HP +15, Regen +2",apply:()=>{this.g.h.A+=20;this.g.h.m+=20;this.g.h.M+=5}},{s:"Rare",name:"Torx\u2019s Reinforced Shell",description:"HP +20, Regen +4",apply:()=>{this.g.h.A+=20;this.g.h.m+=20;this.g.h.M+=4}},{s:"Epic",name:"Aether Veil",description:"Evasion +15%",apply:()=>{this.g.h.H+=15}},{s:"Legendary",name:"Maggie's Cloak",description:"HP -20, Regen +5",
P:`${ab.Xa} +30%`,apply:()=>{this.g.h.A-=20;this.g.h.m-=20;this.g.h.M+=5;this.g.h.H+=30}},{s:"Common",name:"Starwing Stabilizers",description:"Move Speed +12%",apply:()=>{this.g.h.T*=1.12;this.g.h.I*=1.12}},{s:"Common",name:"Advanced Wings",description:"Move Speed +10%, Fire Rate +10%",apply:()=>{this.g.h.T*=1.1;this.g.h.I*=1.1;this.g.h.v*=.9}},{s:"Rare",name:"Meteor Thrusters",description:"Move Speed +20%",P:"Evasion +5%",apply:()=>{this.g.h.T*=1.2;this.g.h.I*=1.2;this.g.h.H+=5}},{s:"Epic",name:"Plasma Rocket Fuel",
description:"Move Speed +30%",P:"Evasion -10%",apply:()=>{this.g.h.T*=1.3;this.g.h.I*=1.3;this.g.h.H-=10}},{s:"Legendary",name:"Voidstep Drive",description:"Move Speed +25%",P:"Evasion +10%",apply:()=>{this.g.h.T*=1.3;this.g.h.I*=1.3;this.g.h.H+=10}},{s:"Common",name:"Hunter\u2019s Instinct",description:"Damage +3, Evasion +2%",apply:()=>{this.g.h.u+=3;this.g.h.H+=2}},{s:"Common",name:"Ball of string",description:"Fire Rate +10%, Evasion -5%",apply:()=>{this.g.h.v*=.9;this.g.h.H-=5}},{s:"Rare",name:"Plasma Capacitor",
description:"Fire Rate +15%",P:"Proj Speed +15%",apply:()=>{this.g.h.v*=.85;this.g.h.F*=1.15}},{s:"Epic",name:"Warp Core Fragment",description:"Fire Rate +30, Proj Speed -50%",apply:()=>{this.g.h.v*=.7;this.g.h.F*=.5}},{s:"Legendary",name:"Jackalbane Core",description:"Damage +5, HP +30",P:"Proj Speed -10%",apply:()=>{this.g.h.u+=5;this.g.h.A+=30;this.g.h.m+=30;this.g.h.F*=.9}},{s:"Common",name:"Left-over Sushi",description:"Heal +10, Regen +1",apply:()=>{this.g.h.M+=1;S(this.g.h,15)}},{s:"Common",
name:"Tuna Suprise",description:"Heal +15 HP +5",apply:()=>{this.g.h.A+=5;S(this.g.h,5)}},{s:"Common",name:"Juggernog",description:"Heal +20",apply:()=>{S(this.g.h,20)}},{s:"Rare",name:"Iron Jackal Bru",description:"Heal +25, Regen +2",P:"Proj Speed +10%",apply:()=>{this.g.h.M+=2;S(this.g.h,25);this.g.h.F*=1.1}},{s:"Legendary",name:"Stardust",description:"Heal +80, Fire Rate +20%",apply:()=>{S(this.g.h,80);this.g.h.v*=.8}}];this.g=a}}
function cb(a,b,c,d){let e="white";"Rare"===d.s?e="#60a5fa":"Epic"===d.s?e="#c084fc":"Legendary"===d.s&&(e="#fb923c");y(a,b,c,90,6,"#222",e);b+=18;a.fillStyle=e;a.font="16px Courier New";a.fillText(`[${d.s}]`,20,b);b+=18;a.font="bold 16px Courier New";a.fillStyle="white";a.fillText(d.name,20,b);a.font="16px Courier New";b+=18;a.fillText(d.description,20,b);d.P&&a.fillText(d.P,20,b+18)}
function db(a,b){b.save();let c=b.canvas.width-20;h=[];a.l.forEach((d,e)=>{e=200+105*e;cb(b,e,c,d);a.j&&ba(e,c,()=>{d.apply();a.j=!1;a.i=a.i.filter(f=>"Common"===f.s?!0:f!==d);A.start(1,0,.5,()=>{h=[];a.isActive=!1;Ca(a.g.Z);A.start(0,1,.5)})})})}
class eb{constructor(a){this.j=this.isActive=!1;this.l=[];this.i=[];this.g=a;this.i=(new bb(a)).i}start(){this.j=this.isActive=!0;var a=[...this.i];for(let b=a.length-1;0<b;b--){let c=Math.floor(Math.random()*(b+1));[a[b],a[c]]=[a[c],a[b]]}this.l=a.slice(0,3);a=this.g.V;a.l=a.o[Math.floor(Math.random()*a.o.length)];h=[]}D(a){if(this.isActive){a.save();a.fillStyle="rgba(0, 0, 0, 0.7)";a.fillRect(0,0,a.canvas.width,a.canvas.height);v("Zone Cleared!",24,z(),30);var b=this.g.V;b.l&&fb(b,"Torx",b.l,120,
60);db(this,a);a.restore()}}}
let gb={[0]:[{J:"Maggie",text:"Benji, the Iron Jackal has stolen the Warp Core."},{J:"Maggie",text:"Who knows what he plans to do with it, but it can't be good."},{J:"Torx",text:"That core could power a thousand fleets\u2026"},{J:"Benji",text:"Then what are we waiting for? After him!"}],[1]:[{J:"Maggie",text:"The closer we get, the more concerning some of these readings are. "},{J:"Torx",text:"It looks like space-time itself is... distorting..."},{J:"Jackal",text:"Hahaha, you should be running rather than chasing me!"},{J:"Benji",
text:"You will regret stealing The Warp Core once we are done with you Jackal!"}],[2]:[{J:"Torx",text:"We're close, but I hope we're ready, this area looks very unstable."},{J:"Jackal",text:"Just in time for us to test our Mega Drive! Hahaha"},{J:"Maggie",text:"Watch out Benji! He's turned the Warp Core into a weapon!"},{J:"Benji",text:"This stops now Jackal! Feel my claws"}],[4]:[{J:"Maggie",text:"It\u2019s done. The Jackal is defeated, and The Core is safe."},{J:"Torx",text:"There's plenty of Iron Jackal's allies left to clean up."},
{J:"Benji",text:"Let's see how far we can get!"}]};function hb(a){if(a.j<(gb[a.i]??[]).length-1)a.j++;else switch(a.isActive=!1,a.j=0,a.i){case 0:a.i=1;A.active||A.start(1,0,.5,()=>{a.g.ma();U(a.g);A.start(0,1,.5)});break;case 1:a.i=2;A.active||A.start(1,0,.5,()=>{T(a.g.Z);U(a.g);A.start(0,1,.5)});break;case 2:a.i=4;A.active||A.start(1,0,.5,()=>{T(a.g.Z);U(a.g);A.start(0,1,.5)});break;default:A.active||A.start(1,0,.5,()=>{T(a.g.Z);U(a.g);A.start(0,1,.5)})}}
function fb(a,b,c,d,e){let f=m.g;var g=c.split(" ");let k={x:25,y:d-65,width:34,height:42};f.font="bold 12px Courier New";let n=m.i-20-10;c=[];let l="";for(let q of g)g=l+q+" ",f.measureText(g).width>n?(c.push(l.trim()),l=q+" "):l=g;l.trim()&&c.push(l.trim());y(f,d,m.i-20,Math.max(e,16*c.length+20),4,"#1f1722");a=a.g.U;ib(f,b,"Maggie"===b?a.Ka:"Torx"===b?a.Ua:"Jackal"===b?a.Ia:a.Aa,k);f.fillStyle="white";f.textAlign="left";b=d+5+12;for(let q of c)f.fillText(q,20,b),b+=16}
function ib(a,b,c,{x:d,y:e,width:f,height:g}){c&&(a.save(),a.drawImage(c,d,e,f,g),a.strokeStyle="white",a.lineWidth=1,a.strokeRect(d+.5,e+.5,f-1,g-1),a.strokeRect(d,e,f,g),a.fillStyle="white",a.textAlign="center",a.font="bold 12px Courier New",a.fillText(b,d+f/2,e+g+15),a.restore())}
class jb{constructor(a){this.isActive=!0;this.j=this.i=0;this.o="Scrap secured. Upgrade time!;Jackal\u2019s junk is our treasure.;Zone clear. Let\u2019s bolt on something new.;Reactor\u2019s humming\u2014don\u2019t breathe too close.;Enemy tech? More like spare parts.;Cut the green wire\u2026 I think.;Hull patched. Tape counts as armor, right?;Think Maggie prefers chrome or silver?;Big red button\u2026 probably important.;Not easy, but nothing worth doing is.;Shh\u2014don\u2019t tell the Jackal about this mod.;Found a shiny bit for the collection!;This part\u2019s purr-fect for Benji\u2019s claws.;Stay sharp\u2014Jackal\u2019s crew love ambushes.;Fitting this might take a plasma torch\u2026 or luck.".split(";");this.l=
null;this.g=a}start(){m.g.canvas.addEventListener("click",()=>this.isActive&&hb(this))}D(){if(this.isActive){var a=gb[this.i]??[],b;0<=this.j&&this.j<a.length&&(b=a[this.j]);b&&fb(this,b.J,b.text,m.j-65,50)}}}function U(a){a.V.isActive=!1;a.h.active=!0}async function kb(a,b){a.ha=b;a.U=await Wa();({Na:b}=a.U);a.g=new $a(()=>new xa(R(a.U)));a.ca=new $a(()=>new xa(R(a.U,"red")));a.h=new wa(a,b,a.g);a.V.start();return a}
class lb{constructor(){this.R=[];this.background=new K;this.V=new jb(this);this.ea=new eb(this)}update(a,b){let {h:c,background:d,Z:e}=this;d.update(a,c.oa);c.update(a,b.x,b.y);for(let f of this.R)f.update(a);this.R=this.R.filter(f=>!f.ta()&&!P(f));Ya(this.g,a);Ya(this.ca,a);V(this.g.da.filter(f=>f.active&&!f.L),this.R.filter(f=>!f.L),(f,g)=>{g.na(f.u);M(f,6,2)});V([this.h],this.R,(f,g)=>{f.na(g.Oa)});V([this.h],this.ca.da.filter(f=>f.active&&!f.L),(f,g)=>{100*Math.random()<f.H||f.na(g.u);M(g,6,2)});
e&&e.update(a)}D(a){this.ea.isActive?this.ea.D(a):(this.background.D(a),this.R.forEach(b=>b.D(a)),this.h.D(a),this.Z&&this.Z.D(),Za(this.g,a),Za(this.ca,a),this.V.isActive&&this.V.D())}ma(){this.V.isActive=!1;this.h.active=!0;this.Z=new Ga(this);Ca(this.Z)}}class mb{constructor(a){this.g=a}ka(){c2d.addEventListener("click",()=>{window.location.reload()})}ua(a){v("Game Over",48,z(),100);v("You made it",32,z(),200);v("to level",32,z(),230);v(this.g.toString(),48,z(),300);x("Back to Menu",a)}}
let nb=440*Math.pow(Math.pow(2,1/12),-9),ob=/^[0-9.]+$/,pb=/\s+/,qb=/(\d+)/,rb={};"B#-C C#-Db D D#-Eb E-Fb E#-F F#-Gb G G#-Ab A A#-Bb B-Cb".split(" ").forEach((a,b)=>{a.split("-").forEach(c=>{rb[c]=b})});function sb(a){return ob.test(a)?parseFloat(a):a.toLowerCase().split("").reduce((b,c)=>{switch(c){case "w":return b+4;case "h":return b+2;case "q":return b+1;case "e":return b+.5;case "s":return b+.25;default:return b}},0)}
class tb{constructor(a){let [b,c]=a.split(pb);a=b.split(qb);this.frequency=nb*Math.pow(Math.pow(2,1/12),rb[a[0]])*Math.pow(2,(parseInt(a[1])||4)-4)||0;this.duration=sb(c)||0}}function ub(a){let b=a.gain;[["bass",100],["mid",1E3],["treble",2500]].forEach(([,c])=>{let d=a.i.createBiquadFilter();d.type="peaking";d.frequency.value=c;b.connect(d);b=d;a.X.push(d)});b.connect(a.K);b.connect(a.B)}function vb(a,...b){b.forEach(c=>a.j.push(c instanceof tb?c:new tb(c)))}
function wb(a,b,c){b=a.j[b];let d=60/174*b.duration,e=d*(1-(a.l||1E-10));a.gain.gain.cancelScheduledValues(c);a.g.frequency.cancelScheduledValues(c);0<b.frequency?(a.g.frequency.setValueAtTime(b.frequency,c),a.gain.gain.setValueAtTime(1E-4,c),a.gain.gain.exponentialRampToValueAtTime(1,c+.01),a.gain.gain.setValueAtTime(1,c+Math.max(.01,e-.05)),a.gain.gain.exponentialRampToValueAtTime(1E-4,c+e)):(a.gain.gain.cancelScheduledValues(c),a.gain.gain.setValueAtTime(1E-4,c));return c+d}
function Z(a,b=a.i.currentTime){if(0!==a.j.length){a.createOscillator();a.gain.gain.setValueAtTime(0,b);a.g.start(b);var c=b;for(b=0;b<a.j.length;b++)c=wb(a,b,c);b=c+.02;a.gain.gain.setValueAtTime(0,c);a.g.stop(b);a.g.onended=()=>Z(a,c)}}
class xb{constructor(a,b){this.j=[];this.l=this.G=0;this.o="square";this.g=null;this.X=[];this.i=a;this.gain=this.i.createGain();this.B=this.i.createGain();this.K=this.i.createGain();ub(this);b&&vb(this,...b)}connect(a){this.B.connect(a);this.K.connect(a)}createOscillator(){this.stop();this.g=this.i.createOscillator();this.g.type=this.o;this.g.connect(this.gain)}stop(){if(this.g){try{this.g.onended=null;let a=this.i.currentTime;this.gain.gain.cancelScheduledValues(a);this.gain.gain.setValueAtTime(this.gain.gain.value,
a);this.gain.gain.linearRampToValueAtTime(0,a+.01);this.g.frequency.cancelScheduledValues(a);this.g.stop(a+.02)}catch{}this.g=null}}}function yb(a,b=a.g.currentTime,c){let d=a.g.createOscillator(),e=a.g.createGain();d.type="sine";d.frequency.setValueAtTime(120,b);d.frequency.exponentialRampToValueAtTime(40,b+.08);e.gain.setValueAtTime(c??4,b);e.gain.exponentialRampToValueAtTime(.001,b+.09);d.connect(e).connect(a.i);d.start(b);d.stop(b+.09)}
function zb(a,b=a.g.currentTime,c){var d=a.g.createBuffer(1,.2*a.g.sampleRate,a.g.sampleRate),e=d.getChannelData(0);for(let f=0;f<e.length;f++)e[f]=2*Math.random()-1;e=a.g.createBufferSource();e.buffer=d;d=a.g.createGain();d.gain.setValueAtTime(c??4,b);d.gain.exponentialRampToValueAtTime(.001,b+.2);e.connect(d).connect(a.i);e.start(b);e.stop(b+.2)}
function Ab(a,b=a.g.currentTime,c){var d=a.g.createBuffer(1,.05*a.g.sampleRate,a.g.sampleRate),e=d.getChannelData(0);for(let f=0;f<e.length;f++)e[f]=2*Math.random()-1;e=a.g.createBufferSource();e.buffer=d;d=a.g.createGain();d.gain.setValueAtTime(c??2.4,b);d.gain.exponentialRampToValueAtTime(.001,b+.05);e.connect(d).connect(a.i);e.start(b);e.stop(b+.05)}class Bb{constructor(a,b){this.g=a;this.i=b}}
function Cb(a){if(!a.aa){a.aa=!0;var b=a.g.currentTime,c=60/174*4;Z(a.o,b+8*c);Z(a.l,b);var d=a.g.createOscillator();d.type="sine";d.frequency.value=246.94;var e=a.g.createGain();e.gain.value=0;d.connect(e).connect(a.i);d.start();e.gain.setValueAtTime(0,b+64*c);e.gain.linearRampToValueAtTime(.3,b+64*c);a.G.push(d);a.B.push(e);d=a.g.createOscillator();d.type="sine";d.frequency.value=293.66;e=a.g.createGain();e.gain.value=0;d.connect(e).connect(a.i);d.start();e.gain.setValueAtTime(0,b+80*c);e.gain.linearRampToValueAtTime(.3,
b+64*c);a.G.push(d);a.B.push(e);var f=()=>{let g=a.g.currentTime;for(;a.j*a.fa<g+.1;){let k=a.j*a.fa;256<=a.j&&([0,3,6,10,12,15].includes(a.j%16)&&Ab(a.X,k),[0,7,11].includes(a.j%16)&&yb(a.X,k),[4,12].includes(a.j%16)&&zb(a.X,k));a.j++}a.ba=window.setTimeout(f,25)};f()}}
class Db{constructor(){this.volume=.1;this.j=0;this.ba=null;this.G=[];this.B=[];this.aa=!1;this.g=new AudioContext;this.K=this.g.createGain();this.i=this.g.createDynamicsCompressor();this.X=new Bb(this.g,this.i);this.K.connect(this.g.destination);this.K.gain.value=this.volume;this.i.ratio.value=4;this.i.threshold.value=-12;this.i.connect(this.K);var a="D4 q;A4 q;B3 q;- q;- q;- q;- q;- q".split(";");this.o=new xb(this.g,[...a,...a,...a,"D4 q","E4 q","B3 q","- q","- q","- q","- q","- q"]);this.o.l=
.2;this.o.G=.2;this.o.o="sine";this.o.connect(this.i);this.l=new xb(this.g,"B1 h;- h;B1 h;- h;D2 h;- h;D2 h;- h".split(";"));this.l.l=0;this.l.G=0;this.l.o="triangle";a=this.g.createGain();a.gain.value=1.5;this.l.connect(a);a.connect(this.i);this.fa=60/174/4}stop(){this.o.stop();this.l.stop();this.G.forEach((a,b)=>{b=this.B[b];let c=this.g.currentTime;b.gain.cancelScheduledValues(c);b.gain.setValueAtTime(b.gain.value,c);b.gain.linearRampToValueAtTime(0,c+.05);a.stop(c+.06)});this.G=[];this.B=[];this.aa=
!1;this.ba&&clearTimeout(this.ba);this.j=0}}function Eb(a){P(a.g.h)&&(A.active||A.start(1,0,.5,()=>{pa(new mb(a.g.Z.O));A.start(0,1,.5)}))}class Fb{constructor(){this.i=m.g}async ka(){720>=window.innerWidth&&(document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen());this.ha=new Db;Cb(this.ha);this.g=await kb(new lb,this.ha);A.start(0,1,1)}ua(a){this.g&&(this.g.update(a,m.o),this.g.D(this.i),Eb(this))}za(){this.ha.stop()}}let Gb=new Fb;
class ra{constructor(){this.Aa=null}ma(){pa(Gb)}async ka(){c2d.addEventListener("click",this.ma)}ua(a){v("Benji",56,z()+15,180);w("Super",36,z()-70,145,"#fff","center","#ee2626",3,Math.PI/-20);let {g:b}=m;b.save();b.font='900 14px "Tahoma"';b.textAlign="center";b.fillStyle="#f01b1bce";b.fillText("JS13K 2025",55,m.j-10);b.restore();w("by hseager",14,m.i-60,m.j-11,"#f0f0f0c7");x("Start Game",a,.6*m.j)}za(){c2d.removeEventListener("click",this.ma)}}L=new qa(...[]);let Hb=performance.now(),Ib=new K;
(()=>{function a(b){let c=(b-Hb)/1E3;Hb=b;m.g.clearRect(0,0,m.i,m.j);Ib.update(c);Ib.D(m.g);L.g.ua(c);A.update(c);A.D(m.g);requestAnimationFrame(a)}aa();requestAnimationFrame(a)})();
